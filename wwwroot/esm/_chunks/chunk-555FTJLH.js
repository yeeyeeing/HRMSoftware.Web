import{r as o,s as u,t as c}from"./chunk-3G2WUFSN.js";import{a as p}from"./chunk-27W64ILM.js";import{b as y}from"./chunk-BA2LGLQM.js";import{a as D}from"./chunk-DNINIZJD.js";import{c as m,g as h,h as f,k as R}from"./chunk-L3ECGIWB.js";var e=h(D(),1),v=h(R(),1);var n=class extends e.EntityDialog{constructor(r=!0){super();this.form=new o(this.idPrefix);this.participantRole=[];this.ReadOnly=r}getFormKey(){return o.formKey}getRowDefinition(){return u}getService(){return c.baseUrl}dialogOpen(r){if(super.dialogOpen(r),this.ReadOnly=!(this.isNew()==!0||!this.ReadOnly),this.ReadOnly)this.saveAndCloseButton.hide(),this.applyChangesButton.hide(),this.cloneButton.hide(),this.deleteButton.hide(),e.EditorUtils.setReadonly(this.form.ProgramName.element,this.ReadOnly),e.EditorUtils.setReadonly(this.form.StartDate.element,this.ReadOnly),e.EditorUtils.setReadonly(this.form.EndDate.element,this.ReadOnly),e.EditorUtils.setReadonly(this.form.Detail.element,this.ReadOnly),e.EditorUtils.setReadonly(this.form.ExtraDocument.element,this.ReadOnly),e.EditorUtils.setReadonly(this.form.DepartmentList.element,this.ReadOnly),e.EditorUtils.setReadonly(this.form.Status.element,this.ReadOnly),e.EditorUtils.setReadonly(this.form.Comment.element,this.ReadOnly),e.EditorUtils.setReadonly(this.form.DateTba.element,this.ReadOnly),e.EditorUtils.setReadonly(this.form.OneDay.element,this.ReadOnly),e.EditorUtils.setReadonly(this.form.ParticipantList.element,this.ReadOnly),$('div.category > div.field.FlowList > label[title="Flow List"] + div.editor.s-ProgramFlowEditor.s-DataGrid > div.grid-toolbar.s-Serenity-Toolbar.s-Toolbar.clearfix').hide(),$('div.category > div.field.ParticipantList > label[title="Participant List"] + div.editor.s-ProgramParticipantEditor.s-DataGrid > div.grid-toolbar.s-Serenity-Toolbar.s-Toolbar.clearfix').hide(),v.Authorization.hasPermission(p.HumanResources)||($('li.nav-item > a.nav-link:contains("Participant List")').parent().hide(),$('div.field.Status > label[title="Status"]').parent().hide(),$('div.field.DepartmentList > label[title="Department"]').parent().hide()),this.form.ParticipantList.value=this.form.ParticipantList.value.filter((i,l)=>i.Trainee||i.Staff);else{let i=$("#"+this.idPrefix+"DateTba");e.EditorUtils.setReadonly(this.form.OneDay.element,this.form.DateTba.value),e.EditorUtils.setReadonly(this.form.StartDate.element,this.form.DateTba.value),e.EditorUtils.setReadonly(this.form.EndDate.element,this.form.DateTba.value),i.on("change",s=>{this.form.DateTba.value?(e.EditorUtils.setReadonly(this.form.OneDay.element,!0),e.EditorUtils.setReadonly(this.form.StartDate.element,!0),e.EditorUtils.setReadonly(this.form.EndDate.element,!0)):(e.EditorUtils.setReadonly(this.form.OneDay.element,!1),e.EditorUtils.setReadonly(this.form.StartDate.element,!1),e.EditorUtils.setReadonly(this.form.EndDate.element,this.form.OneDay.value))});let l=$("#"+this.idPrefix+"OneDay"),d=$("#"+this.idPrefix+"EndDate").parent();e.EditorUtils.setReadonly(this.form.EndDate.element,this.form.OneDay.value),l.on("change",s=>{e.EditorUtils.setReadonly(this.form.EndDate.element,this.form.OneDay.value),this.form.OneDay.value?(this.form.EndDate.value=this.form.StartDate.value,d.hide()):d.show()}),$("#"+this.idPrefix+"StartDate").on("change",s=>{this.form.OneDay.value&&(this.form.EndDate.value=this.form.StartDate.value)}),$("#"+this.idPrefix+"ParticipantList").find('.button-inner:contains("Add")').text("Add by Employee ID"),this.form.DepartmentList.element.on("change",s=>{this.updateParticipantList()})}$("div.field.FlowList > div > div.grid-container.slick-container.ltr.ui-widget.sleek-vars > div.slick-viewport").css({height:"auto","min-height":"200px"}),$("div.field.ParticipantList > div > div.grid-container.slick-container.ltr.ui-widget.sleek-vars > div.slick-viewport").css({height:"auto","min-height":"200px"}),$('div.field.DateTba > label[title="Date TBA"] + input.editor.s-BooleanEditor[type="checkbox"]').css({flex:"0 0 auto"}),$('div.field.OneDay > label[title="One Day"] + input.editor.s-BooleanEditor[type="checkbox"]').css({flex:"0 0 auto"});let a=$("#"+this.idPrefix+"Status"),t=$("#"+this.idPrefix+"Comment").parent();this.form.Status.get_value()!=3&&t.hide(),a.on("change",i=>{this.form.Status.get_value()!=3?t.hide():t.show()})}updateTitle(){this.ReadOnly=!(this.isNew()==!0||!this.ReadOnly),this.ReadOnly?this.dialogTitle="View Program ("+this.getEntityNameFieldValue()+")":super.updateTitle()}updateParticipantList(){let r={};this.form.ParticipantList.value=this.form.ParticipantList.value.filter(a=>a.Trainee||a.Staff?(r[a.EmployeeRowId.toString()]=1,!0):!1),this.form.DepartmentList.values.length>0&&y.List({Criteria:(0,e.Criteria)("DepartmentID").in(this.form.DepartmentList.values),ColumnSelection:e.ColumnSelection.KeyOnly,IncludeColumns:["Id","EmployeeID","EmployeeName"]},a=>{for(let t of a.Entities)if(r[t.Id.toString()]!=1){let i=this.form.ParticipantList.value;i.push({EmployeeId:t.EmployeeID,EmployeeName:t.EmployeeName,EmployeeRowId:t.Id,ProgramId:this.entity.Id}),this.form.ParticipantList.value=i}})}};m(n,"ProgramSessionDialog"),n=f([e.Decorators.registerClass("HRMSoftware.TrainingManagement.ProgramSessionDialog")],n);export{n as a};
//# sourceMappingURL=chunk-555FTJLH.js.map
