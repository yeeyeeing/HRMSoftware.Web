import{c as Ke,d as Vt}from"../../../../_chunks/chunk-2W3R3JAJ.js";import{a as Gt}from"../../../../_chunks/chunk-NNRE4DRV.js";import{h as Wt}from"../../../../_chunks/chunk-RTS3PGWE.js";import{a as Tt}from"../../../../_chunks/chunk-KYUD2NNQ.js";import{a as Bt}from"../../../../_chunks/chunk-KJPYPLYR.js";import{a as Ft}from"../../../../_chunks/chunk-3IGW5W2W.js";import{a as Mt}from"../../../../_chunks/chunk-UIOKTG4P.js";import{G as Ht}from"../../../../_chunks/chunk-QIDIFHUV.js";import{a as Nt}from"../../../../_chunks/chunk-GLPN5Y7D.js";import{d as $t,e as Xt,f as ei}from"../../../../_chunks/chunk-7LATD64C.js";import{a as Lt}from"../../../../_chunks/chunk-CKWKG5AG.js";import{d as At}from"../../../../_chunks/chunk-I3VQVPHQ.js";import{d as Ut}from"../../../../_chunks/chunk-XZKAQRVI.js";import"../../../../_chunks/chunk-2WW6XFKA.js";import"../../../../_chunks/chunk-CICJSBLQ.js";import"../../../../_chunks/chunk-BFH3N3PU.js";import{d as Ot}from"../../../../_chunks/chunk-335Q4VKD.js";import"../../../../_chunks/chunk-T7E74GLF.js";import{d as St}from"../../../../_chunks/chunk-XZ77WOQN.js";import{c as kt,d as xt}from"../../../../_chunks/chunk-USJNQGRS.js";import{c as Ct}from"../../../../_chunks/chunk-U2RRK6JY.js";import{d as Ne}from"../../../../_chunks/chunk-HDHDXEPW.js";import"../../../../_chunks/chunk-BVVXSYMS.js";import{n as Te}from"../../../../_chunks/chunk-DA7Z2NN7.js";import{a as He}from"../../../../_chunks/chunk-27W64ILM.js";import{s as It,v as nt}from"../../../../_chunks/chunk-7GGACY5T.js";import"../../../../_chunks/chunk-HERT6KZV.js";import"../../../../_chunks/chunk-DMDSRNFC.js";import"../../../../_chunks/chunk-TIB4BNCY.js";import{a as qe,b as x}from"../../../../_chunks/chunk-TYRFK7TU.js";import"../../../../_chunks/chunk-K2UT2MVJ.js";import{a as ot}from"../../../../_chunks/chunk-DNINIZJD.js";import{c as w,g as W,h as ze,j as Le,k as se}from"../../../../_chunks/chunk-L3ECGIWB.js";var _t=W(ot(),1),De=W(se(),1),Pe=W(se(),1),we=W(se(),1),Yt=W(se(),1);var ie=W(ot(),1);var c=W(ot(),1);var Se=W(se(),1);var b=W(se(),1);var ge=W(se(),1);var be=class extends c.EntityDialog{constructor(){super();this.form=new nt(this.idPrefix);this.list_of_employee_id=[];this.list_of_employee_row_id=[];this.ListOfUserName=[];this.OriginalValue={};this.EditedValue={};this.form.FixedDeductionList.slickGrid.setOptions({rowHeight:30}),this.form.AllowanceLists.slickGrid.setOptions({rowHeight:30}),this.form.EmployeeCareerPath.slickGrid.setOptions({rowHeight:30}),this.cloneButton.remove(),x.List({},e=>{for(var r in e.Entities)this.list_of_employee_id.push(e.Entities[r].EmployeeID),this.list_of_employee_row_id.push(e.Entities[r].Id)}),Ne.List({},e=>{for(var r in e.Entities)e.Entities[r].IsActive==1&&(this.ProbationMonths=e.Entities[r].ProbationPeriod,this.RetireAge=e.Entities[r].RetireAge)})}getFormKey(){return nt.formKey}getRowDefinition(){return qe}getService(){return x.baseUrl}createUser(){var e=this;Te.Create({Entity:{Username:this.form.UserName.value,DisplayName:this.form.EmployeeName.value,Password:this.form.UserPassword.value,PasswordConfirm:this.form.UserPassword.value,Email:this.form.EmployeeEmail.value,MobilePhoneNumber:this.form.TelNumber1.value}})}onSaveSuccess(e){var r=this,g=this.entityId;if(this.isNew()){var u=b.Authorization.userDefinition.Username,s=new Date,p="Employee "+this.form.EmployeeName.value+" is created by "+u+" on "+s;Ke.Create({Entity:{Description:p,OldValue:null,NewValue:null,FieldName:null,EmployeeRowId:this.EmployeeRowID}}),this.form.CreateUser.value==!0&&this.createUser()}else if(!this.isNew())if(this.form.CreateUser.value==!0)Te.List({},h=>{var m=0;for(var D in h.Entities)h.Entities[D].EmployeeRowID==g&&(m=1,Te.Update({EntityId:h.Entities[D].UserId,Entity:{DisplayName:this.form.EmployeeName.value,Email:this.form.EmployeeEmail.value,MobilePhoneNumber:this.form.TelNumber1.value}}));m==0&&r.createUser(),this.Record(this.EditedValue);var V=Object.keys(this.EditedValue),H=b.Authorization.userDefinition.Username,me=new Date;for(let R of V)if(this.EditedValue[R]!=this.OriginalValue[R]&&typeof this.OriginalValue[R]!="object"&&typeof this.EditedValue[R]!="object"){var _=R;if(_=_.replace(/ID/g,""),(0,b.isEmptyOrNull)(this.OriginalValue[R]))var j=_+" of "+this.form.EmployeeName.value+" is set by "+H+" to "+this.EditedValue[R]+" on "+me;else var j=_+" of "+this.form.EmployeeName.value+" is changed by "+H+" from "+this.OriginalValue[R]+" to "+this.EditedValue[R]+" on "+me;Ke.Create({Entity:{Description:j,OldValue:this.OriginalValue[R],NewValue:this.EditedValue[R],FieldName:R,EmployeeRowId:this.EmployeeRowID}})}});else{this.Record(this.EditedValue);var n=Object.keys(this.EditedValue),u=b.Authorization.userDefinition.Username;for(let m of n)if(this.EditedValue[m]!==this.OriginalValue[m]&&typeof this.OriginalValue[m]!="object"&&typeof this.EditedValue[m]!="object"){var s=new Date,A=m;if(A=A.replace(/ID/g,""),(0,b.isEmptyOrNull)(this.OriginalValue[m]))var p=A+" of "+this.form.EmployeeName.value+" is set by "+u+" to "+this.EditedValue[m]+" on "+s;else var p=A+" of "+this.form.EmployeeName.value+" is changed by "+u+" from "+this.OriginalValue[m]+" to "+this.EditedValue[m]+" on "+s;Ke.Create({Entity:{Description:p,OldValue:this.OriginalValue[m],NewValue:this.EditedValue[m],FieldName:m,EmployeeRowId:this.EmployeeRowID}})}}super.onSaveSuccess(e)}onDialogOpen(){super.onDialogOpen();var e=this;c.EditorUtils.setReadonly(e.form.Age.element,!0),this.isNew()?$(".CareerPahth").parent().hide():(c.EditorUtils.setReadonly(e.form.BasicSalary.element,!0),c.EditorUtils.setReadonly(e.form.DivisionID.element,!0),c.EditorUtils.setReadonly(e.form.DepartmentID.element,!0),c.EditorUtils.setReadonly(e.form.OccupationID.element,!0),c.EditorUtils.setReadonly(e.form.SectionID.element,!0),c.EditorUtils.setReadonly(e.form.JobGradeID.element,!0)),$(".EmployeeCareerPath .add-button").on("click",function(){$(".s-HRMSoftware-EmployeeProfile-EmployeeCareerPathEditDialog .s-TemplatedDialog .s-DialogContent .s-Form .EmployeeRowId .s-LookupEditor").val(e.entityId).trigger("change")}),$(".OtPayEntitlement").parent().after(`<ul role="tablist" class="nav nav-tabs property-tabs">
            <li class="nav-item" role="presentation"> <a class="nav-link custom active AllowanceLists" data-bs-toggle="tab" role="tab">Allowance</a> </li>
            <li class="nav-item" role="presentation"> <a class="nav-link custom FixedDeductionList" data-bs-toggle="tab" role="tab"> Deductions</a></li>
        </ul>
        `),$(".field.FixedDeductionList").parent().hide(),$(".field.OtPayEntitlement, .field.FixedOtRateOption, .field.PayByMonth, .field.PayByHour, .field.PayByDay").addClass("col-2"),document.querySelectorAll(".nav-link.custom").forEach(i=>{i.addEventListener("click",function(){document.querySelectorAll(".nav-link.custom").forEach(C=>C.classList.remove("active")),this.classList.add("active"),console.log(this.classList);let y=Object.values(this.classList).includes("AllowanceLists"),I=Object.values(this.classList).includes("FixedDeductionList");y?($(".field.AllowanceLists").parent().show(),$(".field.FixedDeductionList").parent().hide()):I&&($(".field.AllowanceLists").parent().hide(),$(".field.FixedDeductionList").parent().show())})}),$(".FixedOtRateOption").hide();var g=document.getElementById(`${this.idPrefix}OtPayEntitlement`);$(g).on("change",function(){return Le(this,null,function*(){e.form.OtPayEntitlement.value==!0?$(".FixedOtRateOption, .OtRateWeekday, .OtRateWeekend, .OtRatePublicHoliday, .FixedOtRateOption").show():e.form.OtPayEntitlement.value==!1&&(e.form.OtRateWeekday.value=e.form.OtRateWeekend.value=e.form.OtRatePublicHoliday.value=0,$(".OtRateWeekday, .OtRateWeekend, .OtRatePublicHoliday, .FixedOtRateOption").hide())})}),$(g).trigger("change");var u=document.getElementById(`${this.idPrefix}FixedOtRateOption`);$(u).on("change",function(){return Le(this,null,function*(){e.form.FixedOtRateOption.value==!0?(c.EditorUtils.setReadonly(e.form.OtRatePublicHoliday.element,!1),c.EditorUtils.setReadonly(e.form.OtRateWeekday.element,!1),c.EditorUtils.setReadonly(e.form.OtRateWeekend.element,!1)):e.form.FixedOtRateOption.value==!1&&(c.EditorUtils.setReadonly(e.form.OtRatePublicHoliday.element,!0),c.EditorUtils.setReadonly(e.form.OtRateWeekday.element,!0),c.EditorUtils.setReadonly(e.form.OtRateWeekend.element,!0))})}),$(u).trigger("change"),c.EditorUtils.setReadonly(this.form.WorkingHour.element,!0),c.EditorUtils.setReadonly(this.form.WorkingDays.element,!0),c.EditorUtils.setReadonly(this.form.DailyRateBase.element,!0),c.EditorUtils.setReadonly(this.form.NplRateBase.element,!0);var s=this.form.UserPassword.element,p=this.form.UserName.element;$(s).attr("autocomplete","off"),$(p).attr("autocomplete","off"),c.EditorUtils.setReadonly(this.form.PassedProbation.element,!0);let n=document.createElement("div");n.style.position="absolute",n.style.backgroundColor="#000",n.style.color="#fff",n.style.padding="4px",n.style.borderRadius="4px",n.style.zIndex=Number.MAX_SAFE_INTEGER.toString(),n.style.display="none",document.body.appendChild(n),(parseInt(this.form.EmployeeType.value)==1||this.isNew())&&$(".IssueDate, .WorkingPermitIssueDate, .WorkingPermitExpireDate, .WorkingPermitValidFrom, .WorkingPermitValidUntil, .ArrivalDate").hide(),this.validateBeforeSave(),this.form.CreateUser.addValidationRule(this.uniqueName,i=>this.form.CreateUser.value&&((0,b.isEmptyOrNull)(this.form.UserName.value)||(0,b.isEmptyOrNull)(this.form.UserPassword.value))?"Please fill in UserName and Password":null);var A=document.getElementById(this.idPrefix+"Birthday");c.EditorUtils.setReadonly(this.form.RetireDate.element,!0),$(A).on("change",function(){var i=e.form.Birthday.valueAsDate;let y=i.getFullYear()+e.RetireAge,I=new Date(i);I.setFullYear(y),I<new Date&&I.setFullYear(y+1),e.form.RetireDate.valueAsDate=I});var h=document.getElementById(this.idPrefix+"UserName"),m="Username Cannot Start With Number, No Special Characters";$(h).on("blur",function(){(0,b.isEmptyOrNull)($(this).val())&&($(this).val(m),$(this).css({color:"grey"}))}),$(h).on("focus",function(){$(this).val()==m&&($(this).val(""),$(this).css({color:"black"}))}),$(h).on("change",function(){$(this).val()!=""&&$(this).val()!=m?$(this).css("color","black"):$(this).css("color","grey")}),$(h).on("keydown",function(i){var y=this.selectionStart,I=/[A-Za-z0-9]/,C=[8,9,13,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,144,145];i.key.match(I)||C.includes(i.keyCode)?y===0&&i.key.match(/[0-9]/)&&i.preventDefault():i.preventDefault()}),$(h).on("mouseenter",()=>{n.innerHTML="Please dont use repeated username <br> Username can not contain anything else than number and characters";let i=$(p)[0].getBoundingClientRect();n.style.display="block",n.style.top=`${i.bottom}px`,n.style.left=`${i.left}px`}),$(h).on("mouseleave",()=>{n.style.display="none"});var D=document.getElementById(this.idPrefix+"UserPassword"),V="Password length must be greater or equal to 6";$(D).on("blur",function(){(0,b.isEmptyOrNull)($(this).val())&&($(this).val(V),$(this).css({color:"grey"}))}),$(D).on("focus",function(){$(this).val()==V&&($(this).val(""),$(this).css({color:"black"}))}),$(D).on("change",function(){$(this).val()!=""&&$(this).val()!=V?$(this).css("color","black"):$(this).css("color","grey")}),$(D).on("mouseenter",()=>{n.innerHTML="Password length must be greater or equal to 6";let i=$(D)[0].getBoundingClientRect();n.style.display="block",n.style.top=`${i.bottom}px`,n.style.left=`${i.left}px`}),$(D).on("mouseleave",()=>{n.style.display="none"});var H=document.getElementById(this.idPrefix+"CalculationDate");if($(H).on("change",()=>{(0,Se.serviceCall)({service:x.baseUrl+"/CalculateWorkingHourAndDayWithDate",data:{EmployeeRowID:this.entityId,Date:e.form.CalculationDate.value},method:"GET",async:!1,onSuccess:i=>{!(0,b.isEmptyOrNull)(i.Entities[0].NumberOfWorkingDays)&&i.Entities[0].NumberOfWorkingDays>0?e.form.WorkingHour.value=i.Entities[0].TotalWorkingTimeInMinutes/i.Entities[0].NumberOfWorkingDays:e.form.WorkingHour.value=0,e.form.WorkingDays.value=i.Entities[0].NumberOfWorkingDays,e.form.DailyRateBase.value=i.Entities[0].DailyRateBase,e.form.NplRateBase.value=i.Entities[0].NplRateBase},onError:i=>{console.log(i.Error)}}),e.form.OtPayEntitlement.value==!0?(0,Se.serviceCall)({service:x.baseUrl+"/CalculateOtRate",data:{EmployeeRowID:this.entityId,Date:e.form.CalculationDate.value},method:"GET",async:!1,onSuccess:i=>{console.log(i),e.form.OtRateWeekday.value=i.Entities[0].OtRateWeekday,e.form.OtRateWeekend.value=i.Entities[0].OtRateWeekend,e.form.OtRatePublicHoliday.value=i.Entities[0].OtRatePublicHoliday}}):(e.form.OtRateWeekday.value=e.form.OtRateWeekend.value=e.form.OtRatePublicHoliday.value=0,$(".OtRateWeekday, .OtRateWeekend, .OtRatePublicHoliday").hide())}),(0,Se.serviceCall)({service:Ht.baseUrl+"/GetTodayDateTime",method:"GET",data:{},async:!1,onSuccess:i=>{e.form.CalculationDate.value=i,$(H).trigger("change")}}),this.isNew()){var me=document.querySelectorAll(".text-bg-danger");me.forEach(function(i){$(i).hide()});var _=document.querySelectorAll(".text-bg-warning");_.forEach(function(i){$(i).hide()});var j=document.querySelectorAll(".text-bg-success");j.forEach(function(i){$(i).hide()})}else{if(this.OriginalEmployeeId=this.form.EmployeeID.value,this.Username=this.form.UserName.value,parseInt(this.form.PassedProbation.value)==1){var j=document.querySelectorAll(".text-bg-success");j.forEach(function(y){$(y).hide()}),c.EditorUtils.setReadonly(this.form.ProbationPeriodUntil.element,!0),c.EditorUtils.setReadonly(this.form.ProbationPeriodFrom.element,!0)}x.Retrieve({EntityId:this.entityId},i=>{i.Entity.Retired==0&&i.Entity.Terminated==0&&i.Entity.Resigned==0?$(".tool-button").removeClass("hidden"):(e.readOnly=!0,i.Entity.Terminated==1?(e.dialogTitle=`Terminated Employee (${e.form.EmployeeID.value})`,$(".TerminateDate").show(),$(".TerminateLeaveDate").show()):i.Entity.Resigned==1?(e.dialogTitle=`Resigned Employee (${e.form.EmployeeID.value})`,$(".ResignationDate").show(),$(".ResignLeaveDate").show()):i.Entity.Retired==1&&(e.dialogTitle=`Retired Employee (${e.form.EmployeeID.value})`))})}Te.List({},i=>{for(var y in i.Entities)i.Entities[y].Username==this.form.EmployeeID.value&&(this.UserRowID=i.Entities[y].UserId),this.ListOfUserName.push(i.Entities[y].Username)});var R=document.getElementById(this.idPrefix+"ProbationPeriod"),ue=document.getElementById(this.idPrefix+"ProbationPeriodEnd"),Re=document.getElementById(this.idPrefix+"ProbationPeriodStart"),z=document.getElementById(this.idPrefix+"RecruitmentDate"),Be=document.getElementById(this.idPrefix+"EmployeeType"),lt=document.getElementById(this.idPrefix+"PayByDay"),Fe=document.getElementById(this.idPrefix+"PayByMonth"),Me=document.getElementById(this.idPrefix+"PayByHour");if($(lt).on("change",function(i){e.form.PayByDay.value&&(e.form.PayByHour.value=!1,e.form.PayByMonth.value=!1)}),$(Me).on("change",function(i){e.form.PayByHour.value&&(e.form.PayByDay.value=!1,e.form.PayByMonth.value=!1)}),$(Fe).on("change",function(i){e.form.PayByMonth.value&&(e.form.PayByHour.value=!1,e.form.PayByDay.value=!1)}),$(Be).on("change",function(i){$(Be).val()==1?($(".EpfContribution").hide(),$(".WorkingPermit").hide(),$(".WorkingPermitIssueDate").hide(),$(".WorkingPermitExpireDate").hide(),$(".WorkingPermitValidFrom").hide(),$(".WorkingPermitValidUntil").hide(),$(".ArrivalDate").hide()):($(".EpfContribution").show(),$(".WorkingPermit").show(),$(".WorkingPermitIssueDate").show(),$(".WorkingPermitExpireDate").show(),$(".WorkingPermitValidFrom").show(),$(".WorkingPermitValidUntil").show(),$(".ArrivalDate").show(),console.log(e.form.EpfClass.items[0].disabled=!0))}),$(ue).prop("readonly",!0),$(R).on("change",function(i){var y=$(z).val();if((0,b.isEmptyOrNull)(y))return;var I=y.split("/");let C=new Date(parseInt(I[2]),parseInt(I[0])-1,parseInt(I[1]));C.setMonth(C.getMonth()+3);let ce=C.getFullYear(),q=C.getMonth()+1,fe=C.getDate();var pe=`${q}/${fe}/${ce}`;$(ue).val(pe)}),$(z).on("change",function(i){var y=$(z).val();if(console.log("haha"),!e.isNew())return;console.log("haha");var I=y.split("/");let C=new Date(parseInt(I[2]),parseInt(I[0])-1,parseInt(I[1]));C.setMonth(C.getMonth()+3);let ce=C.getFullYear(),q=C.getMonth()+1,fe=C.getDate();var pe=`${q}/${fe}/${ce}`;e.form.ProbationPeriodFrom.value=e.form.RecruitmentDate.value,e.form.ProbationPeriodUntil.value=pe}),this.isNew())$(".EpfContribution").hide(),$(".UserName").hide(),$(".UserPassword").hide(),$(".GrantHRPrivilege").hide(),$(".CreateUser").on("change",i=>{e.form.CreateUser.value==!0?($(".GrantHRPrivilege").show(),$(".UserName").show(),(0,b.isEmptyOrNull)($(p).val())&&($(p).val(m),$(p).css({color:"grey"})),$(".UserPassword").show(),console.log((0,b.isEmptyOrNull)($(D).val())),(0,b.isEmptyOrNull)($(D).val())&&($(D).val(V),$(D).css({color:"grey"}))):($(".GrantHRPrivilege").val(""),$(".UserName").val(""),$(".UserPassword").val(""),$(".GrantHRPrivilege").hide(),$(".UserName").hide(),$(".UserPassword").hide())});else{if(this.form.CreateUser.value==!0?(c.EditorUtils.setReadonly(this.form.CreateUser.element,!0),c.EditorUtils.setReadonly(this.form.UserPassword.element,!0),c.EditorUtils.setReadonly(this.form.UserName.element,!0)):($(".UserName").hide(),$(".UserPassword").hide(),$(".GrantHRPrivilege").hide(),$(".CreateUser").on("change",i=>{this.form.CreateUser.value==!0?($(".UserName").show(),$(".UserPassword").show(),$(".GrantHRPrivilege").show()):($(".GrantHRPrivilege").hide(),$(".UserName").hide(),$(".UserPassword").hide())})),(0,b.isEmptyOrNull)(this.form.RetireDate.value)){var We=e.form.Birthday.valueAsDate;let i=We.getFullYear()+e.RetireAge,y=new Date(We);y.setFullYear(i),y<new Date&&y.setFullYear(i+1),e.form.RetireDate.valueAsDate=y}$(z).prop("readonly",!1),this.Record(this.OriginalValue);for(var ke in this.list_of_employee_id)this.list_of_employee_id[ke]==this.form.EmployeeID.value&&(this.EmployeeRowID=this.list_of_employee_row_id[ke]);parseInt(this.form.PassedProbation.value)==1&&(c.EditorUtils.setReadonly(this.form.ProbationPeriodFrom.element,!0),c.EditorUtils.setReadonly(this.form.ProbationPeriodUntil.element,!0)),(0,b.isEmptyOrNull)(e.form.PassedProbation.value)&&(e.form.PassedProbation.value=0 .toString(),x.Update({EntityId:this.entityId,Entity:{PassedProbation:0}}))}}Record(e){var A,h;var r=this.propertyGrid.get_items(),g=[];for(var u in r){var s=r[u].name;g.push(s)}let p={};for(let m of g){var n=(A=this.form[m])==null?void 0:A.text;(typeof n=="undefined"||n===null)&&(n=(h=this.form[m])==null?void 0:h.value,(typeof n=="undefined"||n===null)&&(n="")),p[m]=n}Object.assign(e,p)}getDialogOptions(){let e=super.getDialogOptions();return e.height=800,e.width=1200,e}save_submitHandler(e){var r=[];function g(h){return/^[0-9]/.test(h)}w(g,"startsWithNumber");function u(h){return!/[^a-zA-Z0-9]/.test(h)}if(w(u,"containsOnlyNumbersAndChars"),this.form.UserName.value=="Username Cannot Start With Number, No Special Characters"&&(this.form.UserName.value=""),this.isNew()||this.Username.toLowerCase()!=this.form.UserName.value.toLowerCase()&&!(0,b.isEmptyOrNull)(this.Username))for(var s in this.ListOfUserName)this.form.UserName.value.toLowerCase()==this.ListOfUserName[s].toLowerCase()&&r.push("Please use another username, there is another user with same username");this.form.CreateUser.value==!0&&this.form.UserPassword.value==""&&r.push("Please fill in UserPassword"),this.form.CreateUser.value==!0&&this.form.UserPassword.value.length<6&&r.push("Length of UserPassword cannot be less than 6"),this.form.CreateUser.value==!0&&g(this.form.UserName.value)==!0&&r.push("User Name cannot start with number"),this.form.CreateUser.value==!0&&u(this.form.UserName.value)==!1&&r.push("User Name cannot contain anything else than number and characters");var p=document.getElementById(this.idPrefix+"EmployeeType");$(p).val()==1&&this.form.Nric.value==""&&r.push("Please fill in the Identity Card Number"),this.form.FixedOtRateOption.value==!0&&((0,b.isEmptyOrNull)(this.form.OtRatePublicHoliday.value)||(0,b.isEmptyOrNull)(this.form.OtRateWeekday.value)||(0,b.isEmptyOrNull)(this.form.OtRateWeekend.value))&&r.push("Please fill in the Ot Rate");var n=this.form.EmployeeID.value.toString();if(this.isNew()||!this.isNew()&&this.form.EmployeeID.value!=this.OriginalEmployeeId)for(var A in this.list_of_employee_id)this.list_of_employee_id[A]===n&&r.push("There is a active employee with the ID, please check again.");if(r.length>0){let h=r.map(m=>`- ${m}`).join(`
`);(0,Se.alertDialog)(h)}else super.save_submitHandler(e)}getToolbarButtons(){var e=super.getToolbarButtons(),r=this,g=document.createElement("style");return g.textContent=`
            .hidden {
      display: none;
    }
    .nav-link.custom {
        cursor: pointer;
    }

            `,document.head.appendChild(g),e.push({title:"Empoyee Retire",cssClass:"text-bg-primary p-2 hidden retireButton",onClick:()=>{var u=new Date;r.form.RetireDate.valueAsDate>u?(0,ge.confirm)("This employee has not reached the retire date, are you sure?",()=>{(0,ge.confirm)("Are you sure this employee has retired?",()=>{x.Update({EntityId:r.entityId,Entity:{Retired:1}}),r.readOnly=!0,r.dialogTitle=`Retired Employee (${r.form.EmployeeID.value})`,$(".confirmEmployee").addClass("hidden"),$(".terminateButton").addClass("hidden"),$(".resignButton").addClass("hidden"),$(".retireButton").addClass("hidden")})}):(0,ge.confirm)("Are you sure this employee has retired?",()=>{x.Update({EntityId:r.entityId,Entity:{Retired:1}}),r.readOnly=!0,r.dialogTitle=`Retired Employee (${r.form.EmployeeID.value})`,$(".confirmEmployee").addClass("hidden"),$(".terminateButton").addClass("hidden"),$(".resignButton").addClass("hidden"),$(".retireButton").addClass("hidden")})}}),e.push({title:"Confirm Empoyee",cssClass:"text-bg-success p-2 confirmEmployee hidden",onClick:()=>{var u=new Date;(0,b.isEmptyOrNull)(r.form.ProbationPeriodUntil.valueAsDate)?(0,ge.confirm)("Do you want to pass probation of this employee?",()=>{x.Update({EntityId:r.entityId,Entity:{PassedProbation:1}}),$(".confirmEmployee").addClass("hidden")}):r.form.ProbationPeriodUntil.valueAsDate>u&&(0,ge.confirm)("This employee has not passed probation period, are you sure?",()=>{(0,ge.confirm)("Do you want to pass probation of this employee?",()=>{x.Update({EntityId:r.entityId,Entity:{PassedProbation:1}}),$(".confirmEmployee").addClass("hidden")})})}}),e.push({title:"Terminate Employee",cssClass:"text-bg-danger p-2 hidden terminateButton",onClick:()=>{var u=new Ft;u.loadByIdAndOpenDialog(this.entityId),u.element.on("dialogclose",function(){x.Retrieve({EntityId:r.entityId},s=>{s.Entity.Retired==0&&s.Entity.Terminated==0&&s.Entity.Resigned==0?$(".tool-button").removeClass("hidden"):(r.readOnly=!0,s.Entity.Terminated==1?r.dialogTitle=`Terminated Employee (${r.form.EmployeeID.value})`:s.Entity.Resigned==1?r.dialogTitle=`Resigned Employee (${r.form.EmployeeID.value})`:s.Entity.Retired==1&&(r.dialogTitle=`Retired Employee (${r.form.EmployeeID.value})`))})})}}),e.push({title:"Employee Resign",cssClass:"text-bg-warning p-2 hidden resignButton",onClick:()=>{var u=new Mt;u.loadByIdAndOpenDialog(this.entityId),u.element.on("dialogclose",function(){x.Retrieve({EntityId:r.entityId},s=>{s.Entity.Retired==0&&s.Entity.Terminated==0&&s.Entity.Resigned==0?$(".tool-button").removeClass("hidden"):(r.readOnly=!0,s.Entity.Terminated==1?r.dialogTitle=`Terminated Employee (${r.form.EmployeeID.value})`:s.Entity.Resigned==1?r.dialogTitle=`Resigned Employee (${r.form.EmployeeID.value})`:s.Entity.Retired==1&&(r.dialogTitle=`Retired Employee (${r.form.EmployeeID.value})`))})})}}),e}};w(be,"EmployeeProfileDialog"),be=ze([c.Decorators.registerClass("HRMSoftware.EmployeeProfile.EmployeeProfileDialog")],be);var le=W(se(),1);var Ee=class extends ie.EntityGrid{constructor(e){super(e);this.RowIdWithInitialisedLeave=[];this.RowIdOfEmployees=[];this.AnnualLeaveStartingRange=[];this.SickLeaveStartingRange=[];this.AnnualLeaveEndingRange=[];this.SickLeaveEndingRange=[];this.EntitledAnnualLeave=[];this.EntitledSickLeave=[];this.PrevYearAnnualLeaveStartingRange=[];this.PrevYearSickLeaveStartingRange=[];this.PrevYearAnnualLeaveEndingRange=[];this.PrevYearSickLeaveEndingRange=[];this.PrevYearEntitledAnnualLeave=[];this.PrevYearEntitledSickLeave=[];this.DynamicList=[];this.UserID=[];this.EmployeeRowID=[]}getColumnsKey(){return It.columnsKey}getDialogType(){return be}getRowDefinition(){return qe}getService(){return x.baseUrl}getAddButtonCaption(){return"Create Employee Profile"}getQuickFilters(){return super.getQuickFilters()}onViewProcessData(e){e=super.onViewProcessData(e),this.toolbar.findButton("column-picker-button").toggle(!1);var r=e.Entities;return this.RowIdOfEmployees.length=0,e}createToolbarExtensions(){super.createToolbarExtensions(),this.rowSelection=new ie.GridRowSelectionMixin(this,{selectable:e=>!0})}getColumns(){ie.DataGrid.defaultRowHeight=100;var e=super.getColumns();return e.splice(0,0,{field:"Employee Leave",name:"",format:r=>{var g='<a class="inline-action leave-application" title="leave"><i class="fa fa-plane"></i></a><br><a class="inline-action employee-post" title="employee profile edit history"><i class="fa fa-wrench"></i></a>';return g},width:12,minWidth:12,maxWidth:12}),e.splice(0,0,{field:"Employee Shift History",name:"",format:r=>{var g='<a class="inline-action shift-history" title="shift history"><i class="fa fa-book"></i></a><br><a class="inline-action basic-info" title="basic info"> <i class="fa fa-user-tie"></i></a>';return g},width:12,minWidth:12,maxWidth:12}),e}getButtons(){var e=super.getButtons();return le.Authorization.hasPermission(He.HumanResources)&&e.push({title:"Batch User Creation",cssClass:"apply-changes-button",onClick:r=>{(0,le.confirm)("Do you want to create users in batch?",()=>{var g=new Bt;g.dialogOpen(),g.element.on("dialogclose",function(){location.reload()})})},separator:!0}),e}onClick(e,r,g){if(super.onClick(e,r,g),!e.isDefaultPrevented()){var u=this.itemAt(r),s=$(e.target);s.parent().hasClass("inline-action")&&(s=s.parent()),s.hasClass("basic-info")&&(0,le.confirm)("Do you want to view basic employee data?",()=>{var p=new Ot(u.Id);p.loadByIdAndOpenDialog(u.Id),p.set_readOnly(!0),p.element.on("dialogopen",function(){})}),s.hasClass("employee-post")&&(0,le.confirm)("Do you want to view employee profile edit history?",()=>{var p=new Vt(u.Id);p.dialogOpen()}),s.hasClass("leave-application")&&(0,le.confirm)("Do you want to view leave details?",()=>{At.List({},p=>{var n=p.Entities.filter(h=>h.EmployeeRowId===u.Id);n.sort((h,m)=>{let D=new Date(h.NextEntitlementDate).getTime(),V=new Date(m.NextEntitlementDate).getTime();return D-V});var A=new Tt(u.Id);A.loadByIdAndOpenDialog(n[n.length-1].Id)})}),s.hasClass("shift-history")&&(0,le.confirm)("Do you want to view the shift history?",()=>{var p=new Nt(u.EmployeeID,u.Id);p.dialogOpen()})}}};w(Ee,"EmployeeProfileGrid"),Ee=ze([ie.Decorators.filterable(),ie.Decorators.registerClass("HRMSoftware.EmployeeProfile.EmployeeProfileGrid")],Ee);var st=W(Xt(),1),jt=W(ei(),1);function Q(de,U){for(let e=0;e<de.length;e++)if(de[e].Id===U)return de[e].Name;return null}w(Q,"findRowById");function ti(){var de;if(Ne.List({},t=>{for(var a in t.Entities)if(t.Entities[a].IsActive==1){de=t.Entities[a].BasedCountry;break}}),we.Authorization.hasPermission(He.HumanResources)){Ne.List({},t=>{if(t.Entities.length==0){let a=document.createElement("main");a.id="main-content",a.className="main-container",a.innerHTML="<h1>This page is used to create Employee Profiles and new users</h1><p>Please initialise company settings to start using this feature.</p>",$("#GridDiv").append(a);return}else(0,Yt.initFullHeightGridPage)(new Ee($("#GridDiv")).element)});return}(0,jt.default)(st);var U,e=[],r=[],g=[],u=[],s=[],p=[],n=[],A=!1;for((0,Pe.serviceCall)({service:Ct.baseUrl+"/ListShift",method:"GET",data:{},async:!1,onSuccess:t=>{A=!0;let a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];for(var o in t.Entities){var f=[],l=[],d=[];for(var v in a)f.push(t.Entities[o][a[v]+"StartingFrom"]),l.push(t.Entities[o][a[v]+"EndingAt"]),d.push(t.Entities[o][a[v]+"WorkingTime"]);n.push({ShiftName:t.Entities[o].ShiftName,WorkingHourFromList:f,WorkingHourUntilList:l,WorkingTimeList:d,Color:t.Entities[o].ShiftColor,ShiftIdList:t.Entities[o].Id}),u.push(f),s.push(l),p.push(d),e.push(t.Entities[o].ShiftName),r.push(t.Entities[o].ShiftColor),g.push(t.Entities[o].Id)}},onError:t=>{console.log(t)}});A==!1;);var h=[],m=!1;for((0,Pe.serviceCall)({service:kt.baseUrl+"/ListPublicHoliday",method:"GET",data:{},async:!1,onSuccess:t=>{m=!0;for(var a in t.Entities)h.push({PublicHolidayDate:t.Entities[a].Date,PublicHolidayName:t.Entities[a].Name,PublicHolidayId:t.Entities[a].Id})},onError:t=>{console.log(t)}});m==!1;);var D=[],V=!1;for((0,Pe.serviceCall)({service:Wt.baseUrl+"/ListGroup",method:"GET",data:{},async:!1,onSuccess:t=>{V=!0;for(var a in t.Entities)D.push({GroupName:t.Entities[a].Name,GroupColor:t.Entities[a].ShiftColor,GroupID:t.Entities[a].Id})},onError:t=>{console.log(t)}});V==!1;);var H=[],me=!1;for((0,Pe.serviceCall)({service:Ut.baseUrl+"/ListTakenLeaveFromID",method:"GET",data:{EmployeeRowID:we.Authorization.userDefinition.EmployeeRowID},async:!1,onSuccess:t=>{me=!0;for(var a in t.Entities){var o=0;t.Entities[a].LeaveReasonId==4&&t.Entities[a].HalfDay==1&&(o=1),H.push({StartDate:t.Entities[a].StartDate.substring(0,10),EndDate:t.Entities[a].EndDate.substring(0,10),HalfDate:o,LeaveReason:t.Entities[a].LeaveReasonId,ID:t.Entities[a].Id})}},onError:t=>{console.log(t)}});me==!1;);var _,j,R,ue=new Date,Re=ue.getMonth()+1,z=ue.getFullYear(),Be=`${ue.getFullYear()}-${(ue.getMonth()+1).toString().padStart(2,"0")}`;function lt(t,a,o){if(a>o){var f=o;o=a,a=f}return t>=a&&t<=o}w(lt,"isInRange");function Fe(t){return t<10?"0"+t:t.toString()}w(Fe,"addLeadingZero");function Me(t,a,o){var f=[],l=[],d=[];for(var v in t){var S=new Date(t[v].PublicHolidayDate.substring(0,10)),k=S.getFullYear(),E=S.getMonth()+1;k==a&&E==o&&(f.push(t[v].PublicHolidayName),l.push(t[v].PublicHolidayDate.substring(0,10)),d.push(t[v].PublicHolidayId))}return[f,l,d]}w(Me,"GetCurrentMonthHoliday");function We(t,a){let o=[],f=new Date(t,a-1,1);for(let l=6;l>0;l--){let d=new Date(f);d.setMonth(d.getMonth()-l),o.push(`${d.getFullYear()}-${(d.getMonth()+1).toString().padStart(2,"0")}`)}o.push(`${f.getFullYear()}-${(f.getMonth()+1).toString().padStart(2,"0")}`);for(let l=1;l<=6;l++){let d=new Date(f);d.setMonth(d.getMonth()+l),o.push(`${d.getFullYear()}-${(d.getMonth()+1).toString().padStart(2,"0")}`)}return o}w(We,"generateMonthRange");function ke(t,a,o){var f=new Date(a,o,0).getDate();let l=[];for(let L=1;L<=f;L++){var d=`${a}-${Fe(o)}-${Fe(L)}`,v=null,S=new Date(d);for(var k in t){var E=new Date(t[k].ShiftStartDate),K=new Date(t[k].ShiftEndDate);if(S.setHours(0),S.setMinutes(0),S.setSeconds(0),S.setMilliseconds(0),typeof t[k].EmployeeGroupID!==void 0&&S>=E&&S<=K){v=t[k].EmployeeGroupID;break}}l.push({date:d,shift:null,GroupID:v})}return l}w(ke,"generateListOfDate");function i(t,a){console.log(a);for(var o in a){let d=new Date(a[o].ShiftStartDate.substring(0,10)),v=new Date(a[o].ShiftEndDate.substring(0,10));for(var f of t){var l=new Date(f.date);l>=d&&l<=v&&f.GroupID==null&&(f.shift=a[o].ShiftId)}}return t}w(i,"appendShift");function y(t,a,o,f,l){console.log(t);let d=new Date(t[0].date).getDay(),v=t.length,S=d,k=[];for(let N=1;N<=v;N++){var E=new Date(t[N-1].date),K=`${E.getFullYear()}-${(E.getMonth()+1).toString().padStart(2,"0")}-${E.getDate().toString().padStart(2,"0")}`;let F=(S+N-1)%7,oe=Math.floor((d+N-1)/7),ne=N;var L=t[N-1].shift,ae=t[N-1].GroupID,Y=null,T=null,G=null;for(var P in f)if(f[P].PublicHolidayDate.substring(0,10)==K){T=G=f[P].PublicHolidayName,Y="#FF0000",L=null,ae=null;break}if(L!=null){var O;for(var P in o)if(o[P].ShiftIdList==L){O=P;break}Y=o[O].Color,T=o[O].ShiftName,o[O].WorkingHourUntilList[F]===void 0&&o[O].WorkingHourFromList[F]==null?(T="Rest Day",Y="#FFFFE0",G="Happy Holidays"):o[O].WorkingHourFromList[F]!=null&&o[O].WorkingHourUntilList[F]!=null&&(G=o[O].WorkingHourFromList[F]+"-"+o[O].WorkingHourUntilList[F])}else if(ae!=null){for(var P in a)if(a[P].GroupID==ae){T=G=a[P].GroupName,Y=a[P].GroupColor;break}}var J=(0,De.getLookup)("LeaveReason.LeaveReason");for(var P in l){var Z=new Date(l[P].StartDate),re=new Date(l[P].EndDate),ye=l[P].LeaveReason,B;for(var X in J.items)if(J.items[X].Id==ye){B=J.items[X].LeaveReason.replace(/\s/g,"");break}E>=Z&&E<=re&&(T=G=B,Y="#00FF00",L=null)}k.push({x:F,y:5-oe,color:Y,shiftstring:T,value:L,date:K,custom:{monthDay:ne,details:G}})}return console.log(k),k}w(y,"generateChartData");function I(t,a,o){return a===void 0||o===void 0?!1:t.getTime()>=a.getTime()&&t.getTime()<=o.getTime()}w(I,"isDateBetween");function C(t,a){var f=st.chart("Employee-Timetable",{chart:{type:"heatmap"},title:{text:"",align:"left"},accessibility:{landmarkVerbosity:"one"},tooltip:{enabled:!0,outside:!0,zIndex:20,headerFormat:"",pointFormat:"{point.date:%A, %b %e, %Y} </br>{point.custom.details:%s }",nullFormat:"{point.date:%A, %b %e, %Y} </br>{point.custom.details:%s }"},xAxis:{categories:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],opposite:!0,lineWidth:26,offset:13,lineColor:"rgba(27, 26, 37, 0.2)",labels:{rotation:0,y:20,style:{textTransform:"uppercase",fontWeight:"bold"}},accessibility:{description:"weekdays",rangeDescription:"X Axis is showing all 7 days of the week, starting with Sunday."}},yAxis:{min:0,max:5,accessibility:{description:"weeks"},visible:!1},legend:{enable:!1,layout:"vertical",verticalAlign:"middle"},series:[{showInLegend:!1,keys:["x","y","value","date","color","id"],data:t,nullColor:"rgba(196, 196, 196, 0.2)",borderWidth:2,borderColor:"rgba(196, 196, 196, 0.2)",dataLabels:[{enabled:!0,format:"{#unless point.custom.empty}{point.shiftstring}{/unless}",style:{textOutline:"none",fontWeight:"normal",fontSize:"0.73rem"},y:4},{enabled:!0,align:"left",verticalAlign:"top",format:"{#unless point.custom.details}{point.custom.details}{/unless}",backgroundColor:"whitesmoke",padding:2,style:{textOutline:"none",color:"rgba(70, 70, 92, 1)",fontSize:"0.8rem",fontWeight:"bold",opacity:.5},x:1,y:1}]}],plotOptions:{series:{point:{events:{click:function(){var v=-1,S=0;for(var k in t)if(t[k].x==this.x&&t[k].y==this.y){var E=new Date(t[k].date),K=E.getDate(),L=E.getMonth()+1,ae=E.getFullYear(),T=!1;let ee=`${ae}-${L.toString().padStart(2,"0")}-${K.toString().padStart(2,"0")}`;var Y=new Date(ee),T=!1;for(var G in H){var P=new Date(H[G].StartDate),O=new Date(H[G].EndDate);if(E>=P&&E<=O){var J=new Lt;J.loadByIdAndOpenDialog(H[G].ID),J.set_readOnly(!0),S=1;break}}if(S==1)break;var Z=!1;for(var re in a)if(a[re].PublicHolidayDate==ee){var ye=a[re].Id;Z=!0;break}if(Z=!0)break;for(var B in U){var X=new Date(U[B].ShiftStartDate),N=new Date(U[B].ShiftEndDate),F=U[B].ShiftEndDate;if(U[B].EmployeeGroupID!==void 0&&E>=X&&E<=N){v=U[B].EmployeeGroupID,T=!0;break}if(I(Y,X,N)){v=U[B].Id;var oe=new St(we.Authorization.userDefinition.EmployeeRowID,ee,1,F);oe.loadByIdAndOpenDialog(v),oe.set_readOnly(!0)}}if(T){var ne=new Gt;ne.loadByIdAndOpenDialog(v),ne.set_readOnly(!0)}if(Z){var Ie=new xt;Ie.loadByIdAndOpenDialog(ye),Ie.set_readOnly(!0)}break}}}}}}}),l=f.chartWidth,d=f.chartHeight;return[l,d]}if(w(C,"plot"),!we.Authorization.hasPermission(He.HumanResources)){var ce=document.createElement("style");ce.setAttribute("type","text/css"),ce.innerHTML=` body {margin-top:20px;}

            .card-style1 {
                box-shadow: 0px 0px 10px 0px rgb(89 75 128 / 9 %);
            }
            .border - 0 {
                border: 0!important;
            }
            .card {
                position: relative;
                display: flex;
                flex-direction: column;
                min-width: 0;
                word-wrap: break-word;
                background-color: #fff;
                background-clip: border-box;
                border: 1px solid rgba(0, 0, 0, .125);
                border-radius: 0.25rem;
            }
            section {
                padding: 120px 0;
                overflow: hidden;
                background: #fff;
            }
            .mb-2-3,.my-2-3 {
                margin-bottom: 2.3rem;
            }

            .section-title {
                font-weight: 600;
                letter-spacing: 2px;
                text-transform: uppercase;
                margin-bottom: 10px;
                position: relative;
                display: inline-block;
            }

            .text-primary {
                    color: #ceaa4d!important;
                }

            .text-secondary {
                    color: #15395A!important;
                }

            .font-weight-600 {
                    font-weight: 600;
                }

            .display-26 {
                    font-size: 1.3rem;
                }

        @media screen and(min-width: 992px) {
        .p-lg-7 {
                padding: 4rem;
            }
        }

        @media screen and(min-width: 768px) {
        .p-md-6 {
                padding: 3.5rem;
            }
        }

        @media screen and(min-width: 576px) {
        .p-sm-2-3 {
                padding: 2.3rem;
            }
        }

    .p-1-9 {
            padding: 1.9rem;
        }

    .bg-secondary {
            background: #15395A!important;
        }

        @media screen and(min - width: 576px) {
        .pe-sm-6,.px-sm-6{
                padding-right: 3.5rem;
            }
        }

        @media screen and(min-width: 576px) {
        .ps-sm-6,.px-sm-6 {
                padding-left: 3.5rem;
            }
        }

    .pe-1-9,.px-1-9{
            padding-right: 1.9rem;
        }

    .ps-1-9,.px-1-9 {
            padding-left: 1.9rem;
        }

    .pb-1-9,.py-1-9 {
            padding-bottom: 1.9rem;
        }

    .pt-1-9,.py-1-9{
            padding-top: 1.9rem;
        }
    .mb-1-9,.my-1-9 {
            margin-bottom: 1.9rem;
        }

        @media(min-width: 992px) {
        .d-lg-inline-block {
                display: inline - block!important;
            }
        }
    .rounded {
            border-radius: 0.25rem!important;
        }
        .tab {
          overflow: hidden;
          border: 1px solid #ccc;
          background-color: #f1f1f1;
        }

        .tab button {
          background-color: inherit;
          float: left;
          border: none;
          outline: none;
          cursor: pointer;
          padding: 14px 16px;
          transition: 0.3s;
        }

        .tab button:hover {
          background-color: #ddd;
        }

        .tab button.active {
          background-color: #ccc;
        }


        .tabcontent {
          display: none;
          padding: 6px 12px;
          border: 1px solid #ccc;
          border-top: none;
        animation: fadeEffect 1s; /* Fading effect takes 1 second */

        }

        @keyframes fadeEffect {
          from {opacity: 0;}
          to {opacity: 1;}
        }
        `;var q=document.createElement("div");q.setAttribute("class","row");var fe=document.createElement("div");fe.setAttribute("class","container");var pe=document.createElement("section");pe.setAttribute("class","bg-light");var Je=document.createElement("DIV");Je.setAttribute("class","col-lg-12 mb-4 mb-sm-5");var Qe=document.createElement("DIV");Qe.setAttribute("class","card card-style1 border-0");var Ze=document.createElement("DIV");Ze.setAttribute("class","card-body");var xe=document.createElement("div");xe.setAttribute("class","row align-items-center");var he=document.createElement("img");he.setAttribute("id","myImg"),he.width=63,he.height=112.5;var zt=document.createElement("DIV");zt.setAttribute("class","col-lg-12 mb-4 mb-sm-5");var Xe=document.createElement("DIV");Xe.classList.add("category-title"),Xe.setAttribute("id","Employee-Timetable");var Ge=!1,dt=(0,De.getLookup)("Department.Department"),mt=(0,De.getLookup)("Division.Division"),ut=(0,De.getLookup)("Section.Section"),ct=(0,De.getLookup)("JobGrade.JobGrade"),ft=(0,De.getLookup)("Occupation.Occupation"),pt=!1;for((0,Pe.serviceCall)({service:$t.baseUrl+"/RetriveShiftHistory",method:"GET",data:{EmployeeID:we.Authorization.userDefinition.EmployeeRowID},async:!1,onSuccess:t=>{U=t.Entities,_=ke(U,z,Re);for(var a in t.Entities)if(parseInt(t.Entities[a].Id)==0){Ge=!0;break}pt=!0},onError:t=>{console.log(t)}});pt==!1;);console.log(Ge),(0,Pe.serviceCall)({service:x.baseUrl+"/EmployeeProfileBasedOnID",data:{EmployeeID:we.Authorization.userDefinition.EmployeeRowID},method:"GET",async:!1,onSuccess:t=>{t.Entities[0].EmployeeImg?he.src="/upload/"+t.Entities[0].EmployeeImg:t.Entities[0].Sex==1?he.src="https://i.stack.imgur.com/l60Hf.png":t.Entities[0].Sex==0&&(he.src="https://st.depositphotos.com/2218212/2938/i/950/depositphotos_29388097-stock-illustration-facebook-profile.jpg");var a=document.createElement("div");a.appendChild(he),a.setAttribute("class","col-lg-2 mb-4 mb-lg-0");var o=document.createElement("div");o.setAttribute("class","col-lg-5 px-xl-10");var f=document.createElement("div");f.setAttribute("class","col-lg-5 px-xl-10");var l=document.createElement("ul");l.setAttribute("class","list-unstyled ");var d=document.createElement("ul");d.setAttribute("class","list-unstyled ");var v=document.createElement("li"),S=document.createElement("span");S.setAttribute("class","text-secondary me-1 font-weight-600"),S.innerText="Name",v.appendChild(S),v.insertAdjacentText("beforeend",t.Entities[0].EmployeeName),l.appendChild(v);var k=document.createElement("li"),E=document.createElement("span");E.setAttribute("class","text-secondary me-1 font-weight-600"),E.innerText="Employee ID",k.appendChild(E),k.insertAdjacentText("beforeend",t.Entities[0].EmployeeID),l.appendChild(k),console.log(t.Entities[0]);var K=document.createElement("li"),L=document.createElement("span");L.setAttribute("class","text-secondary me-1 font-weight-600"),L.innerText="Age",K.appendChild(L),K.insertAdjacentText("beforeend",t.Entities[0].Age),l.appendChild(K);let ae=new Date(t.Entities[0].RecruitmentDate),Y=new Date,T=Y.getFullYear()-ae.getFullYear(),G=Y.getMonth()-ae.getMonth();var P=document.createElement("li"),O=document.createElement("span");O.setAttribute("class","text-secondary me-1 font-weight-600");var J;if(T==0?(O.innerText="Month of service",J=G.toString()):(O.innerText="Year of service",J=T.toString()),P.appendChild(O),P.insertAdjacentText("beforeend",J),l.appendChild(P),Q(dt.items,t.Entities[0].DepartmentId)!=null){var Z=document.createElement("li"),re=document.createElement("span");re.setAttribute("class","text-secondary me-1 font-weight-600"),re.innerText="Department",Z.appendChild(re),Z.insertAdjacentText("beforeend",Q(dt.items,t.Entities[0].DepartmentId)),d.appendChild(Z)}if(Q(mt.items,t.Entities[0].DivisionId)!=null){var ye=document.createElement("li"),B=document.createElement("span");B.setAttribute("class","text-secondary me-1 font-weight-600"),B.innerText="Division",ye.appendChild(B),ye.insertAdjacentText("beforeend",Q(mt.items,t.Entities[0].DivisionId)),d.appendChild(ye)}if(Q(ut.items,t.Entities[0].SectionId)!=null){var X=document.createElement("li"),N=document.createElement("span");N.setAttribute("class","text-secondary me-1 font-weight-600"),N.innerText="Section",X.appendChild(N),X.insertAdjacentText("beforeend",Q(ut.items,t.Entities[0].SectionId)),d.appendChild(X)}if(Q(ft.items,t.Entities[0].OccupationId)!=null){var F=document.createElement("li"),oe=document.createElement("span");oe.setAttribute("class","text-secondary me-1 font-weight-600"),oe.innerText="Occupation",F.appendChild(oe),F.insertAdjacentText("beforeend",Q(ft.items,t.Entities[0].OccupationId)),d.appendChild(F)}if(Q(ct.items,t.Entities[0].JobGradeId)!=null){var ne=document.createElement("li"),Ie=document.createElement("span");Ie.setAttribute("class"," text-secondary me-1 font-weight-600"),Ie.innerText="JobGrade",ne.appendChild(Ie),ne.insertAdjacentText("beforeend",Q(ct.items,t.Entities[0].JobGradeId)),d.appendChild(ne)}o.appendChild(l),f.appendChild(d),xe.appendChild(a),xe.appendChild(o),xe.appendChild(f),Ze.appendChild(xe),Qe.appendChild(Ze),Je.appendChild(Qe),q.append(Je),fe.append(q),pe.append(fe),$("#GridDiv").append(pe),$("#GridDiv").append(ce);var ee=document.createElement("DIV");ee.setAttribute("id","time-box"),ee.setAttribute("class","row"),ee.setAttribute("align","right");var ht=document.createElement("DIV"),Ve=document.createElement("INPUT");Ve.setAttribute("id","Month"),Ve.setAttribute("type","text"),Ve.setAttribute("class","monthSelect"),ht.appendChild(Ve),ee.appendChild(ht);function yt(it,Ae){var M,Oe,ve;for(Oe=document.getElementsByClassName("tabcontent"),M=0;M<Oe.length;M++)Oe[M].style.display="none";for(ve=document.getElementsByClassName("tablinks"),M=0;M<ve.length;M++)ve[M].className=ve[M].className.replace(" active","");document.getElementById(Ae)!=null&&(document.getElementById(Ae).style.display="block"),it.currentTarget.className+=" active"}w(yt,"open");var _e=document.createElement("div");_e.setAttribute("class","tab");var $e=document.createElement("button");$e.addEventListener("click",function(){yt(event,"shifttab")},!1),$e.setAttribute("class","tablinks"),$e.innerText="Shift",$e.setAttribute("id","defaultOpen");var Ye=document.createElement("button");Ye.addEventListener("click",function(){yt(event,"tab2")},!1),Ye.setAttribute("class","tablinks"),Ye.innerText="tab2",_e.appendChild($e),_e.appendChild(Ye);var Ue=document.createElement("DIV");Ue.setAttribute("class","tabcontent"),Ue.setAttribute("id","shifttab"),Ue.appendChild(ee),Ue.appendChild(Xe);var te=document.createElement("DIV");te.setAttribute("class","tabcontent"),te.setAttribute("id","tab2");var vt=document.createElement("h3");vt.textContent="Tab 2";var gt=document.createElement("p");gt.textContent="This is the content of Tab 2",te.appendChild(vt),te.appendChild(gt),q.appendChild(_e),q.appendChild(Ue),q.appendChild(te);var je=We(z,Re);let bt=new _t.Select2Editor($("#Month"));for(var Ce=0;Ce<je.length;Ce++)bt.addItem({id:Ce.toString(),text:je[Ce].toString()}),je[Ce].toString()==Be&&bt.set_value(Ce.toString());$("#Month").on("change",function(){return Le(this,null,function*(){var it=$(this).val(),Ae=je[it];j=parseInt(Ae.split("-")[0]),R=parseInt(Ae.split("-")[1]),Re=R,z=j;var M=ke(U,j,R);Ge==!1&&(M=i(M,U));var[Oe,ve,Qt]=Me(h,z,Re),at=[];for(var rt in ve)at.push({PublicHolidayDate:ve[rt],PublicHolidayId:Qt[rt],PublicHolidayName:Oe[rt]});var Zt=y(M,D,n,at,H),wt,Rt;[wt,Rt]=C(Zt,at),te.style.width=String(wt)+"px",te.style.height=String(Rt)+"px"})}),Ge==!1&&(_=i(_,U));var[qt,Et,Kt]=Me(h,z,Re),et=[];for(var tt in Et)et.push({PublicHolidayDate:Et[tt],PublicHolidayId:Kt[tt],PublicHolidayName:qt[tt]});var Jt=y(_,D,n,et,H),Dt,Pt;[Dt,Pt]=C(Jt,et),te.style.width=String(Dt)+"px",te.style.height=String(Pt)+"px",$e.click()},onError:t=>{console.log(t.Error)}})}}w(ti,"pageInit");export{ti as default};
//# sourceMappingURL=EmployeeProfilePage.js.map
