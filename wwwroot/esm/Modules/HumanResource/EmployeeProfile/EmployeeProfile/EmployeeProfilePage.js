import{c as pt,d as Yt}from"../../../../_chunks/chunk-2W3R3JAJ.js";import{a as Vt}from"../../../../_chunks/chunk-EYQI2MFC.js";import{h as Gt}from"../../../../_chunks/chunk-2372Z4UN.js";import{a as Bt}from"../../../../_chunks/chunk-53CRG3DT.js";import{a as Ft}from"../../../../_chunks/chunk-7WVXPYTP.js";import{a as Mt}from"../../../../_chunks/chunk-ORXTUDXC.js";import{a as Wt}from"../../../../_chunks/chunk-DUK5UC5T.js";import{G as Ht}from"../../../../_chunks/chunk-BAMNZFIK.js";import{a as Tt}from"../../../../_chunks/chunk-ISFBPFFX.js";import{a as ei,b as ti}from"../../../../_chunks/chunk-FQXHXHZD.js";import{a as Lt}from"../../../../_chunks/chunk-N4LYTVJ7.js";import{d as Nt}from"../../../../_chunks/chunk-I3VQVPHQ.js";import{d as xt}from"../../../../_chunks/chunk-OLYWZP6G.js";import"../../../../_chunks/chunk-6BHXH7OQ.js";import"../../../../_chunks/chunk-CICJSBLQ.js";import"../../../../_chunks/chunk-PMW367QL.js";import{d as At}from"../../../../_chunks/chunk-HHF47QKB.js";import"../../../../_chunks/chunk-T7E74GLF.js";import{d as Ut}from"../../../../_chunks/chunk-4KNAMXIO.js";import{d as $t}from"../../../../_chunks/chunk-T7MGTPAP.js";import{c as kt,d as Ot}from"../../../../_chunks/chunk-E4P46BHF.js";import{c as St}from"../../../../_chunks/chunk-U2RRK6JY.js";import{d as _e}from"../../../../_chunks/chunk-HDHDXEPW.js";import"../../../../_chunks/chunk-BVVXSYMS.js";import{n as oe}from"../../../../_chunks/chunk-DA7Z2NN7.js";import{a as je}from"../../../../_chunks/chunk-27W64ILM.js";import{j as Rt,s as Ct,v as ft}from"../../../../_chunks/chunk-NN5FEWI3.js";import"../../../../_chunks/chunk-KCWQ5BXW.js";import"../../../../_chunks/chunk-MVZ476J5.js";import"../../../../_chunks/chunk-DMDSRNFC.js";import"../../../../_chunks/chunk-LLMDZJQJ.js";import{a as it,b as S}from"../../../../_chunks/chunk-MUCPV7IN.js";import"../../../../_chunks/chunk-K2UT2MVJ.js";import{a as ct}from"../../../../_chunks/chunk-DNINIZJD.js";import{c as I,g as T,h as tt,j as re,k as ae}from"../../../../_chunks/chunk-L3ECGIWB.js";var _t=T(ct(),1),$e=T(ae(),1),Se=T(ae(),1),Ue=T(ae(),1),jt=T(ae(),1);var ne=T(ct(),1);var p=T(ct(),1);var Re=T(ae(),1);var f=T(ae(),1);var Ie=T(ae(),1);var rt=T(ae(),1);var we=class extends p.EntityDialog{constructor(){super();this.form=new ft(this.idPrefix);this.list_of_employee_id=[];this.list_of_employee_row_id=[];this.ListOfUser=[];this.OriginalValue={};this.EditedValue={};this.form.FixedDeductionList.slickGrid.setOptions({rowHeight:30}),this.form.AllowanceLists.slickGrid.setOptions({rowHeight:30}),this.form.EmployeeCareerPath.slickGrid.setOptions({rowHeight:30}),this.cloneButton.remove(),S.List({},e=>{for(var r in e.Entities)this.list_of_employee_id.push(e.Entities[r].EmployeeID),this.list_of_employee_row_id.push(e.Entities[r].Id)})}getFormKey(){return ft.formKey}getRowDefinition(){return it}getService(){return S.baseUrl}onDeleteSuccess(e){super.onDeleteSuccess(e);var r=this;oe.Update({EntityId:r.form.UserRowID.value,Entity:{EmployeeRowID:null,Email:null}})}createUser(e){var r=this;oe.Create({Entity:{Username:this.form.UserName.value,DisplayName:this.form.EmployeeName.value,Password:this.form.UserPassword.value,PasswordConfirm:this.form.UserPassword.value,Email:this.form.EmployeeEmail.value,MobilePhoneNumber:this.form.TelNumber1.value}},l=>{var c=l.EntityId;S.Update({EntityId:r.entityId,Entity:{UserRowID:c}}),oe.Update({EntityId:c,Entity:{EmployeeRowID:r.entityId}}),super.onSaveSuccess(e)})}onSaveSuccess(e){var r=this.entityId,l=this,c=e;if(this.isNew()){var a=f.Authorization.userDefinition.Username,v=new Date,y="Employee "+this.form.EmployeeName.value+" is created by "+a+" on "+v;pt.Create({Entity:{Description:y,OldValue:null,NewValue:null,FieldName:null,EmployeeRowId:r}})}else if(!this.isNew()){this.Record(this.EditedValue);var L=Object.keys(this.EditedValue),a=f.Authorization.userDefinition.Username,v=new Date;for(let s of L)if(this.EditedValue[s]!=this.OriginalValue[s]&&typeof this.OriginalValue[s]!="object"&&typeof this.EditedValue[s]!="object"){var b=s;if(b=b.replace(/ID/g,""),(0,f.isEmptyOrNull)(this.OriginalValue[s]))var y=b+" of "+this.form.EmployeeName.value+" is set by "+a+" to "+this.EditedValue[s]+" on "+v;else var y=b+" of "+this.form.EmployeeName.value+" is changed by "+a+" from "+this.OriginalValue[s]+" to "+this.EditedValue[s]+" on "+v;pt.Create({Entity:{Description:y,OldValue:this.OriginalValue[s],NewValue:this.EditedValue[s],FieldName:s,EmployeeRowId:r}})}}l.form.CreateUser.value==!0&&(0,f.isEmptyOrNull)(l.form.UserRowID.value)?(console.log("heree"),oe.Create({Entity:{Username:this.form.UserName.value,DisplayName:this.form.EmployeeName.value,Password:this.form.UserPassword.value,PasswordConfirm:this.form.UserPassword.value,Email:this.form.EmployeeEmail.value,MobilePhoneNumber:this.form.TelNumber1.value}},U=>{var E=U.EntityId;S.Update({EntityId:l.entityId,Entity:{UserRowID:E}}),oe.Update({EntityId:E,Entity:{EmployeeRowID:l.entityId}}),super.onSaveSuccess(c)})):super.onSaveSuccess(e)}onDialogClose(){super.onDialogClose(),clearInterval(this.refreshInterval)}dialogOpen(){super.dialogOpen();var e=this;$(document).on("click",".tool-button.add-button",function(){console.log("Add button clicked");var r=e.form.EmployeeCareerPath.value.length;$(".s-HRMSoftware-EmployeeProfile-EmployeeCareerPathEditDialog").on("dialogclose",function(){if(r!=e.form.EmployeeCareerPath.value.length){e.loadById(e.entityId);for(let l=0;l<e.form.EmployeeCareerPath.value.length;l++)console.log(e.form.EmployeeCareerPath.value[l]),(0,f.isEmptyOrNull)(e.form.EmployeeCareerPath.value[l].IsActive)&&(e.form.EmployeeCareerPath.value[l].IsActive=1,Rt.Create({Entity:{EmployeeRowId:e.entityId,CareerPathId:e.form.EmployeeCareerPath.value[l].CareerPathId,CareerPathCode:e.form.EmployeeCareerPath.value[l].CareerPathCode,careerPaathType:e.form.EmployeeCareerPath.value[l].careerPaathType,CategoryId:e.form.EmployeeCareerPath.value[l].CategoryId,NewValue:e.form.EmployeeCareerPath.value[l].NewValue,newCostCentre:e.form.EmployeeCareerPath.value[l].newCostCentre,newDivision:e.form.EmployeeCareerPath.value[l].newDivision,oldValue:e.form.EmployeeCareerPath.value[l].oldValue,newDepartment:e.form.EmployeeCareerPath.value[l].newDepartment,newSection:e.form.EmployeeCareerPath.value[l].newSection,newOccupation:e.form.EmployeeCareerPath.value[l].newOccupation,newJobGrade:e.form.EmployeeCareerPath.value[l].newJobGrade,EffectiveDate:e.form.EmployeeCareerPath.value[l].EffectiveDate,Description:e.form.EmployeeCareerPath.value[l].Description,ManDesc:e.form.EmployeeCareerPath.value[l].ManDesc}},c=>{let a=0,v=!1,y=JSON.stringify(e.getSaveEntity()),L=I(()=>{let U=JSON.stringify(e.getSaveEntity());y!==U&&(v=!0,clearInterval(b))},"checkForChanges"),b=setInterval(()=>{a>=5||v?clearInterval(b):(e.loadById(e.entityId),L(),a++)},1e3)}))}})})}onDialogOpen(){super.onDialogOpen();var e=this;_e.List({},i=>{for(var g in i.Entities)i.Entities[g].IsActive==1&&(this.ProbationMonths=i.Entities[g].ProbationPeriod,this.RetireAge=i.Entities[g].RetireAge,e.isNew()&&(e.form.ProbationPeriod.value=this.ProbationMonths))}),$(".UserRowID").hide();var r=document.getElementById(this.idPrefix+"EpfAccountNumber");$(r).on("input",function(){return re(this,null,function*(){let i=this.value;i=i.replace(/\D/g,""),i.length>19&&(i=i.slice(0,19)),this.value=i})});var l=document.getElementById(this.idPrefix+"Nric");$(l).on("input",function(){return re(this,null,function*(){let i=this.value;i=i.replace(/\D/g,""),i.length>12&&(i=i.slice(0,12)),this.value=i})});var c=document.getElementById(this.idPrefix+"SsfwNumber");$(c).on("input",function(){return re(this,null,function*(){let i=this.value;i=i.replace(/\D/g,""),i.length>12&&(i=i.slice(0,12)),this.value=i})}),p.EditorUtils.setReadonly(e.form.Age.element,!0),$(".OtPayEntitlement").parent().after(`<ul role="tablist" class="nav nav-tabs property-tabs">
            <li class="nav-item" role="presentation"> <a class="nav-link custom active AllowanceLists" data-bs-toggle="tab" role="tab">Allowance</a> </li>
            <li class="nav-item" role="presentation"> <a class="nav-link custom FixedDeductionList" data-bs-toggle="tab" role="tab"> Deductions</a></li>
        </ul>
        `),$(".field.FixedDeductionList").parent().hide(),$(".field.OtPayEntitlement, .field.FixedOtRateOption, .field.PayByMonth, .field.PayByHour, .field.PayByDay").addClass("col-2"),document.querySelectorAll(".nav-link.custom").forEach(i=>{i.addEventListener("click",function(){document.querySelectorAll(".nav-link.custom").forEach(Z=>Z.classList.remove("active")),this.classList.add("active"),console.log(this.classList);let g=Object.values(this.classList).includes("AllowanceLists"),O=Object.values(this.classList).includes("FixedDeductionList");g?($(".field.AllowanceLists").parent().show(),$(".field.FixedDeductionList").parent().hide()):O&&($(".field.AllowanceLists").parent().hide(),$(".field.FixedDeductionList").parent().show())})}),$(".FixedOtRateOption").hide();var K=document.getElementById(`${this.idPrefix}EmployeeType`);if($(K).on("change",function(){return re(this,null,function*(){$(".SsfwNumber, .Nric, .OldNRIC").hide(),parseInt(e.form.EmployeeType.value)==1 .valueOf()?$(".Nric, .OldNRIC").show():parseInt(e.form.EmployeeType.value)==2 .valueOf()&&$(".SsfwNumber").show()})}),this.isNew())$(".CareerPahth").parent().hide(),$(".EmployeeCareerPath").parent().hide();else{$(K).trigger("change");var a=e.form.DivisionID.value,v=e.form.DepartmentID.value,y=e.form.OccupationID.value,L=e.form.SectionID.value,b=e.form.JobGradeID.value,U=e.form.BasicSalary.value,E=document.getElementById(`${this.idPrefix}DivisionID`),s=document.getElementById(`${this.idPrefix}Cp8dID`),_=document.getElementById(`${this.idPrefix}DepartmentID`),at=document.getElementById(`${this.idPrefix}SectionID`),Le=document.getElementById(`${this.idPrefix}JobGradeID`),Je=document.getElementById(`${this.idPrefix}OccupationID`),ze=document.getElementById(`${this.idPrefix}CostCentreID`),Te=document.getElementById(`${this.idPrefix}BasicSalary`)}var le=document.getElementById(`${this.idPrefix}OtPayEntitlement`);$(le).on("change",function(){return re(this,null,function*(){e.form.OtPayEntitlement.value==!0?$(".FixedOtRateOption, .OtRateWeekday, .OtRateWeekend, .OtRatePublicHoliday, .FixedOtRateOption").show():e.form.OtPayEntitlement.value==!1&&(e.form.OtRateWeekday.value=e.form.OtRateWeekend.value=e.form.OtRatePublicHoliday.value=0,$(".OtRateWeekday, .OtRateWeekend, .OtRatePublicHoliday, .FixedOtRateOption").hide())})}),$(le).trigger("change");var se=document.getElementById(`${this.idPrefix}FixedOtRateOption`);$(se).on("change",function(){return re(this,null,function*(){e.form.FixedOtRateOption.value==!0?(p.EditorUtils.setReadonly(e.form.OtRatePublicHoliday.element,!1),p.EditorUtils.setReadonly(e.form.OtRateWeekday.element,!1),p.EditorUtils.setReadonly(e.form.OtRateWeekend.element,!1)):e.form.FixedOtRateOption.value==!1&&(p.EditorUtils.setReadonly(e.form.OtRatePublicHoliday.element,!0),p.EditorUtils.setReadonly(e.form.OtRateWeekday.element,!0),p.EditorUtils.setReadonly(e.form.OtRateWeekend.element,!0))})}),$(se).trigger("change"),p.EditorUtils.setReadonly(this.form.WorkingHour.element,!0),p.EditorUtils.setReadonly(this.form.WorkingDays.element,!0),p.EditorUtils.setReadonly(this.form.DailyRateBase.element,!0),p.EditorUtils.setReadonly(this.form.NplRateBase.element,!0);var ot=this.form.UserPassword.element,ke=this.form.UserName.element;$(ot).attr("autocomplete","off"),$(ke).attr("autocomplete","off");let P=document.createElement("div");P.style.position="absolute",P.style.backgroundColor="#000",P.style.color="#fff",P.style.padding="4px",P.style.borderRadius="4px",P.style.zIndex=Number.MAX_SAFE_INTEGER.toString(),P.style.display="none",document.body.appendChild(P),(parseInt(this.form.EmployeeType.value)==1||this.isNew())&&$(".IssueDate, .WorkingPermitIssueDate, .WorkingPermitExpireDate, .WorkingPermitValidFrom, .WorkingPermitValidUntil, .ArrivalDate").hide(),this.validateBeforeSave(),this.form.CreateUser.addValidationRule(this.uniqueName,i=>this.form.CreateUser.value&&((0,f.isEmptyOrNull)(this.form.UserName.value)||(0,f.isEmptyOrNull)(this.form.UserPassword.value))?"Please fill in UserName and Password":null);var qe=document.getElementById(this.idPrefix+"Birthday");p.EditorUtils.setReadonly(this.form.RetireDate.element,!0),$(qe).on("change",function(){var i=e.form.Birthday.valueAsDate;let g=i.getFullYear()+e.RetireAge,O=new Date(i);O.setFullYear(g),O<new Date&&O.setFullYear(g+1),console.log(O),e.form.RetireDate.valueAsDate=O});var de=document.getElementById(this.idPrefix+"UserName"),ve="Username Cannot Start With Number, No Special Characters";$(de).on("blur",function(){(0,f.isEmptyOrNull)($(this).val())&&($(this).val(ve),$(this).css({color:"grey"}))}),$(de).on("focus",function(){$(this).val()==ve&&($(this).val(""),$(this).css({color:"black"}))}),$(de).on("change",function(){$(this).val()!=""&&$(this).val()!=ve?$(this).css("color","black"):$(this).css("color","grey")}),$(de).on("keydown",function(i){var g=this.selectionStart,O=/[A-Za-z0-9]/,Z=[8,9,13,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,144,145];i.key.match(O)||Z.includes(i.keyCode)?g===0&&i.key.match(/[0-9]/)&&i.preventDefault():i.preventDefault()}),$(de).on("mouseenter",()=>{P.innerHTML="Please dont use repeated username <br> Username can not contain anything else than number and characters";let i=$(ke)[0].getBoundingClientRect();P.style.display="block",P.style.top=`${i.bottom}px`,P.style.left=`${i.left}px`}),$(de).on("mouseleave",()=>{P.style.display="none"});var W=document.getElementById(this.idPrefix+"UserPassword"),ye="Password length must be greater or equal to 6";$(W).on("blur",function(){(0,f.isEmptyOrNull)($(this).val())&&($(this).val(ye),$(this).css({color:"grey"}))}),$(W).on("focus",function(){$(this).val()==ye&&($(this).val(""),$(this).css({color:"black"}))}),$(W).on("change",function(){$(this).val()!=""&&$(this).val()!=ye?$(this).css("color","black"):$(this).css("color","grey")}),$(W).on("mouseenter",()=>{P.innerHTML="Password length must be greater or equal to 6";let i=$(W)[0].getBoundingClientRect();P.style.display="block",P.style.top=`${i.bottom}px`,P.style.left=`${i.left}px`}),$(W).on("mouseleave",()=>{P.style.display="none"});var Ke=document.getElementById(this.idPrefix+"CalculationDate");if($(Ke).on("change",()=>{(0,Re.serviceCall)({service:S.baseUrl+"/CalculateWorkingHourAndDayWithDate",data:{EmployeeRowID:this.entityId,Date:e.form.CalculationDate.value},method:"GET",async:!1,onSuccess:i=>{!(0,f.isEmptyOrNull)(i.Entities[0].NumberOfWorkingDays)&&i.Entities[0].NumberOfWorkingDays>0?e.form.WorkingHour.value=i.Entities[0].TotalWorkingTimeInMinutes/i.Entities[0].NumberOfWorkingDays:e.form.WorkingHour.value=0,e.form.WorkingDays.value=i.Entities[0].NumberOfWorkingDays,e.form.DailyRateBase.value=i.Entities[0].DailyRateBase,e.form.NplRateBase.value=i.Entities[0].NplRateBase},onError:i=>{console.log(i.Error)}}),e.form.OtPayEntitlement.value==!0?(0,Re.serviceCall)({service:S.baseUrl+"/CalculateOtRate",data:{EmployeeRowID:this.entityId,Date:e.form.CalculationDate.value},method:"GET",async:!1,onSuccess:i=>{console.log(i),e.form.OtRateWeekday.value=i.Entities[0].OtRateWeekday,e.form.OtRateWeekend.value=i.Entities[0].OtRateWeekend,e.form.OtRatePublicHoliday.value=i.Entities[0].OtRatePublicHoliday}}):(e.form.OtRateWeekday.value=e.form.OtRateWeekend.value=e.form.OtRatePublicHoliday.value=0,$(".OtRateWeekday, .OtRateWeekend, .OtRatePublicHoliday").hide())}),(0,Re.serviceCall)({service:Ht.baseUrl+"/GetTodayDateTime",method:"GET",data:{},async:!1,onSuccess:i=>{e.form.CalculationDate.value=i,$(Ke).trigger("change")}}),this.isNew()){var Qe=document.querySelectorAll(".text-bg-danger");Qe.forEach(function(i){$(i).hide()});var He=document.querySelectorAll(".text-bg-warning");He.forEach(function(i){$(i).hide()});var j=document.querySelectorAll(".text-bg-success");j.forEach(function(i){$(i).hide()})}else{if(this.OriginalEmployeeId=this.form.EmployeeID.value,this.Username=this.form.UserName.value,console.log(this.form.PassedProbation.value),parseInt(this.form.PassedProbation.value)==2||parseInt(this.form.PassedProbation.value)==1){var j=document.querySelectorAll(".text-bg-success");j.forEach(function(g){$(g).hide()}),p.EditorUtils.setReadonly(this.form.ProbationPeriodUntil.element,!0),p.EditorUtils.setReadonly(this.form.ProbationPeriodFrom.element,!0)}S.Retrieve({EntityId:this.entityId},i=>{i.Entity.Retired==0&&i.Entity.Terminated==0&&i.Entity.Resigned==0?$(".tool-button").removeClass("hidden"):(e.readOnly=!0,i.Entity.Terminated==1?(e.dialogTitle=`Terminated Employee (${e.form.EmployeeID.value})`,$(".TerminateDate").show(),$(".TerminateLeaveDate").show()):i.Entity.Resigned==1?(e.dialogTitle=`Resigned Employee (${e.form.EmployeeID.value})`,$(".ResignationDate").show(),$(".ResignLeaveDate").show()):i.Entity.Retired==1&&(e.dialogTitle=`Retired Employee (${e.form.EmployeeID.value})`))})}p.EditorUtils.setReadonly(this.form.PassedProbation.element,!0),p.EditorUtils.setReadonly(this.form.ProbationPeriodFrom.element,!0),p.EditorUtils.setReadonly(this.form.ProbationPeriodUntil.element,!0);var Be=document.getElementById(this.idPrefix+"ProbationPeriod"),Fe=document.getElementById(this.idPrefix+"ProbationPeriodUntil"),ge=document.getElementById(this.idPrefix+"JoinDate"),K=document.getElementById(this.idPrefix+"EmployeeType"),Me=document.getElementById(this.idPrefix+"PayByDay"),be=document.getElementById(this.idPrefix+"PayByMonth"),Q=document.getElementById(this.idPrefix+"PayByHour");$(Me).on("change",function(i){e.form.PayByDay.value&&(e.form.PayByHour.value=!1,e.form.PayByMonth.value=!1)}),$(Q).on("change",function(i){e.form.PayByHour.value&&(e.form.PayByDay.value=!1,e.form.PayByMonth.value=!1)}),$(be).on("change",function(i){e.form.PayByMonth.value&&(e.form.PayByHour.value=!1,e.form.PayByDay.value=!1)}),$(K).on("change",function(i){$(K).val()==1?($(".EpfContribution").hide(),$(".WorkingPermit").hide(),$(".WorkingPermitIssueDate").hide(),$(".WorkingPermitExpireDate").hide(),$(".WorkingPermitValidFrom").hide(),$(".WorkingPermitValidUntil").hide(),$(".ArrivalDate").hide()):($(".EpfContribution").show(),$(".WorkingPermit").show(),$(".WorkingPermitIssueDate").show(),$(".WorkingPermitExpireDate").show(),$(".WorkingPermitValidFrom").show(),$(".WorkingPermitValidUntil").show(),$(".ArrivalDate").show())}),$(document).ready(function(){$("<span>months</span>").insertAfter(`#${e.idPrefix}ProbationPeriod`)});function We(){var i=$(ge).val(),g=e.form.ProbationPeriod.value;if(g==0){e.form.ProbationPeriodFrom.value=e.form.ProbationPeriodUntil.value="00/00/0000",e.form.PassedProbation.value=1 .valueOf().toString();return}else e.form.PassedProbation.value==2 .valueOf().toString();if(!((0,f.isEmptyOrNull)(e.form.JoinDate.value)||(0,f.isEmptyOrNull)(e.form.ProbationPeriod.value))&&g>0){var O=i.split("/");let G=new Date(parseInt(O[2]),parseInt(O[0])-1,parseInt(O[1])),t=Math.floor(g),o=g-t;if(G.setMonth(G.getMonth()+t),o>0){let m=new Date(G.getFullYear(),G.getMonth()+1,0).getDate(),h=Math.round(m*o);G.setDate(G.getDate()+h)}let n=G.getFullYear(),u=G.getMonth()+1,d=G.getDate();var Z=`${u}/${d}/${n}`;e.form.ProbationPeriodFrom.value=i,e.form.ProbationPeriodUntil.value=Z,$(Fe).val(Z);var Ze=new Date(e.form.ProbationPeriodUntil.value);e.form.CalculationDate.valueAsDate>Ze?e.form.PassedProbation.value=2 .valueOf().toString():e.form.PassedProbation.value=0 .valueOf().toString(),console.log(e.form.PassedProbation.value)}}if(I(We,"calculateProbation"),console.log(e.form.PassedProbation.value),console.log(2 .valueOf().toString()),this.isNew())$(".EpfContribution, .UserName, .UserPassword, .GrantHRPrivilege").hide(),$(".CreateUser").on("change",i=>{e.form.CreateUser.value==!0?($(".GrantHRPrivilege").show(),$(".UserName").show(),(0,f.isEmptyOrNull)($(ke).val())&&($(ke).val(ve),$(ke).css({color:"grey"})),$(".UserPassword").show(),(0,f.isEmptyOrNull)($(W).val())&&($(W).val(ye),$(W).css({color:"grey"}))):($(".GrantHRPrivilege, .UserName, .UserPassword").val(""),$(".GrantHRPrivilege, .UserName, .UserPassword").hide())});else{if(We(),window.employeeRowId=this.entityId,this.form.CreateUser.value==!0?p.EditorUtils.setReadonly(this.form.CreateUser.element,!0):($(".UserName, .UserPassword, .GrantHRPrivilegeUserName").hide(),$(".CreateUser").on("change",i=>{this.form.CreateUser.value==!0?$(".UserName, .UserPassword, .GrantHRPrivilegeUserName").show():$(".UserName, .UserPassword, .GrantHRPrivilegeUserName").hide()})),(0,f.isEmptyOrNull)(this.form.RetireDate.value)){var Oe=e.form.Birthday.valueAsDate;let i=Oe.getFullYear()+e.RetireAge,g=new Date(Oe);g.setFullYear(i),g<new Date&&g.setFullYear(i+1),e.form.RetireDate.valueAsDate=g}$(ge).prop("readonly",!1),this.Record(this.OriginalValue);for(var Ee in this.list_of_employee_id)this.list_of_employee_id[Ee]==this.form.EmployeeID.value&&(this.EmployeeRowID=this.list_of_employee_row_id[Ee]);(parseInt(this.form.PassedProbation.value)==2||parseInt(this.form.PassedProbation.value)==1)&&(p.EditorUtils.setReadonly(this.form.ProbationPeriodFrom.element,!0),p.EditorUtils.setReadonly(this.form.ProbationPeriodUntil.element,!0),p.EditorUtils.setReadonly(this.form.ProbationPeriod.element,!0))}e.form.PassedProbation.value!=2 .valueOf().toString()&&($(Be).on("change",function(i){We()}),$(ge).on("change",function(i){We()}))}Record(e){var L,b;var r=this.propertyGrid.get_items(),l=[];for(var c in r){var a=r[c].name;l.push(a)}let v={};for(let U of l){var y=(L=this.form[U])==null?void 0:L.text;(typeof y=="undefined"||y===null)&&(y=(b=this.form[U])==null?void 0:b.value,(typeof y=="undefined"||y===null)&&(y="")),v[U]=y}Object.assign(e,v)}getDialogOptions(){let e=super.getDialogOptions();return e.height=800,e.width=1200,e}save_submitHandler(e){console.log(this.form.ProbationPeriod.value);var r=[];function l(E){return/^[0-9]/.test(E)}I(l,"startsWithNumber");function c(E){return!/[^a-zA-Z0-9]/.test(E)}I(c,"containsOnlyNumbersAndChars"),this.form.UserName.value=="Username Cannot Start With Number, No Special Characters"&&(this.form.UserName.value="");var a=this;parseInt(a.form.EmployeeType.value)==1 .valueOf()?(0,f.isEmptyOrNull)(a.form.Nric.value)?r.push("Please fill in NRIC number"):a.form.Nric.value.length<12&&r.push("The length of NRIC should be 12"):parseInt(a.form.EmployeeType.value)==2 .valueOf()&&((0,f.isEmptyOrNull)(a.form.SsfwNumber.value)?r.push("Please fill in SSFW number"):a.form.SsfwNumber.value.length<12&&r.push("The length of SSFW should be 12")),this.form.CreateUser.value==!0&&this.form.UserPassword.value==""&&r.push("Please fill in UserPassword"),this.form.CreateUser.value==!0&&this.form.UserPassword.value.length<6&&r.push("Length of UserPassword cannot be less than 6"),this.form.CreateUser.value==!0&&l(this.form.UserName.value)==!0&&r.push("User Name cannot start with number"),this.form.CreateUser.value==!0&&c(this.form.UserName.value)==!1&&r.push("User Name cannot contain anything else than number and characters");var v=document.getElementById(this.idPrefix+"EmployeeType");$(v).val()==1&&this.form.Nric.value==""&&r.push("Please fill in the Identity Card Number"),this.form.FixedOtRateOption.value==!0&&((0,f.isEmptyOrNull)(this.form.OtRatePublicHoliday.value)||(0,f.isEmptyOrNull)(this.form.OtRateWeekday.value)||(0,f.isEmptyOrNull)(this.form.OtRateWeekend.value))&&r.push("Please fill in the Ot Rate");var y=this.form.EmployeeID.value.toString();if(this.isNew()||!this.isNew()&&this.form.EmployeeID.value!=this.OriginalEmployeeId)for(var L in this.list_of_employee_id)this.list_of_employee_id[L]===y&&r.push("There is a active employee with the ID, please check again.");if(r.length>0){let E=r.map(s=>`- ${s}`).join(`
`);(0,Re.alertDialog)(E)}else if(r.length==0){var b=0,U=e;a.form.CreateUser.value==!0?oe.List({},E=>{a.ListOfUser.length=0;for(var s in E.Entities)E.Entities[s].Username==this.form.EmployeeID.value&&(this.UserRowID=E.Entities[s].UserId),this.ListOfUser.push({EmployeeRowId:E.Entities[s].EmployeeRowID,UserName:E.Entities[s].Username,UserId:E.Entities[s].UserId});var _=1;if((0,f.isEmptyOrNull)(a.form.UserRowID.value)){for(var s in this.ListOfUser)if(console.log(this.ListOfUser[s].EmployeeRowId==a.entityId&&!(0,f.isEmptyOrNull)(a.entityId)),this.form.UserName.value==this.ListOfUser[s].UserName){if(_=0,(0,f.isEmptyOrNull)(this.ListOfUser[s].EmployeeRowId)||this.ListOfUser[s].EmployeeRowId==a.entityId&&!(0,f.isEmptyOrNull)(a.entityId)){b=1,(0,rt.confirmDialog)("There is already a user with the same username, do you want to link this employee to that account?",()=>{a.form.UserRowID.value=a.ListOfUser[s].UserId,oe.Update({EntityId:a.ListOfUser[s].UserId,Entity:{EmployeeRowID:a.entityId,Password:a.form.UserPassword.value,PasswordConfirm:a.form.UserPassword.value}}),a.form.ProbationPeriod.value==0&&(a.form.ProbationPeriodUntil.value=a.form.ProbationPeriodFrom.value=""),super.save_submitHandler(U)},{onNo:()=>{(0,rt.notifyInfo)("Please select another unique username")}});break}else if(!(0,f.isEmptyOrNull)(this.ListOfUser[s].EmployeeRowId)){if(this.entityId!=this.ListOfUser[s].EmployeeRowId){(0,Re.alertDialog)("Please use another username, there is another user with same username");return}else a.form.ProbationPeriod.value==0&&(a.form.ProbationPeriodUntil.value=a.form.ProbationPeriodFrom.value="");break}break}}else oe.Update({EntityId:a.form.UserRowID.value,Entity:{Username:a.form.UserName.value,Password:a.form.UserPassword.value,PasswordConfirm:a.form.UserPassword.value}});a.form.ProbationPeriod.value==0&&(a.form.ProbationPeriodUntil.value=a.form.ProbationPeriodFrom.value=""),b==0&&super.save_submitHandler(U)}):(a.form.ProbationPeriod.value==0&&(a.form.ProbationPeriodUntil.value=a.form.ProbationPeriodFrom.value=""),super.save_submitHandler(U))}}getToolbarButtons(){var e=super.getToolbarButtons(),r=this,l=document.createElement("style");return l.textContent=`
            .hidden {
      display: none;
    }
    .nav-link.custom {
        cursor: pointer;
    }

            `,document.head.appendChild(l),e.push({title:"Empoyee Retire",cssClass:"text-bg-primary p-2 hidden retireButton",onClick:()=>{var c=new Date;r.form.RetireDate.valueAsDate>c?(0,Ie.confirm)("This employee has not reached the retire date, are you sure?",()=>{(0,Ie.confirm)("Are you sure this employee has retired?",()=>{S.Update({EntityId:r.entityId,Entity:{Retired:1}}),r.readOnly=!0,r.dialogTitle=`Retired Employee (${r.form.EmployeeID.value})`,$(".confirmEmployee").addClass("hidden"),$(".terminateButton").addClass("hidden"),$(".resignButton").addClass("hidden"),$(".retireButton").addClass("hidden")})}):(0,Ie.confirm)("Are you sure this employee has retired?",()=>{S.Update({EntityId:r.entityId,Entity:{Retired:1}}),r.readOnly=!0,r.dialogTitle=`Retired Employee (${r.form.EmployeeID.value})`,$(".confirmEmployee").addClass("hidden"),$(".terminateButton").addClass("hidden"),$(".resignButton").addClass("hidden"),$(".retireButton").addClass("hidden")})}}),e.push({title:"Confirm Empoyee",cssClass:"text-bg-success p-2 confirmEmployee hidden",onClick:()=>{var c=new Date;if(!(0,f.isEmptyOrNull)(r.form.ProbationPeriodUntil.value)){console.log(r.form.ProbationPeriodUntil.value);var a=new Date(r.form.ProbationPeriodUntil.value);a>c?(0,Ie.confirm)("This employee has not passed probation period, are you sure?",()=>{(0,Ie.confirm)("Do you want to pass probation of this employee?",()=>{S.Update({EntityId:r.entityId,Entity:{PassedProbation:2}}),r.form.PassedProbation.value=2 .valueOf().toString(),$(".confirmEmployee").addClass("hidden")})}):(0,Ie.confirm)("Do you want to pass probation of this employee?",()=>{S.Update({EntityId:r.entityId,Entity:{PassedProbation:2}}),p.EditorUtils.setReadonly(r.form.ProbationPeriod.element,!0),r.form.PassedProbation.value=2 .valueOf().toString(),$(".confirmEmployee").addClass("hidden")})}}}),e.push({title:"Terminate Employee",cssClass:"text-bg-danger p-2 hidden terminateButton",onClick:()=>{var c=new Mt;c.loadByIdAndOpenDialog(this.entityId),c.element.on("dialogclose",function(){S.Retrieve({EntityId:r.entityId},a=>{a.Entity.Retired==0&&a.Entity.Terminated==0&&a.Entity.Resigned==0?$(".tool-button").removeClass("hidden"):(r.readOnly=!0,a.Entity.Terminated==1?r.dialogTitle=`Terminated Employee (${r.form.EmployeeID.value})`:a.Entity.Resigned==1?r.dialogTitle=`Resigned Employee (${r.form.EmployeeID.value})`:a.Entity.Retired==1&&(r.dialogTitle=`Retired Employee (${r.form.EmployeeID.value})`))})})}}),e.push({title:"Employee Resign",cssClass:"text-bg-warning p-2 hidden resignButton",onClick:()=>{var c=new Wt;c.loadByIdAndOpenDialog(this.entityId),c.element.on("dialogclose",function(){S.Retrieve({EntityId:r.entityId},a=>{a.Entity.Retired==0&&a.Entity.Terminated==0&&a.Entity.Resigned==0?$(".tool-button").removeClass("hidden"):(r.readOnly=!0,a.Entity.Terminated==1?r.dialogTitle=`Terminated Employee (${r.form.EmployeeID.value})`:a.Entity.Resigned==1?r.dialogTitle=`Resigned Employee (${r.form.EmployeeID.value})`:a.Entity.Retired==1&&(r.dialogTitle=`Retired Employee (${r.form.EmployeeID.value})`))})})}}),e}};I(we,"EmployeeProfileDialog"),we=tt([p.Decorators.registerClass("HRMSoftware.EmployeeProfile.EmployeeProfileDialog")],we);var pe=T(ae(),1);var Ce=class extends ne.EntityGrid{constructor(e){super(e);this.RowIdWithInitialisedLeave=[];this.RowIdOfEmployees=[];this.AnnualLeaveStartingRange=[];this.SickLeaveStartingRange=[];this.AnnualLeaveEndingRange=[];this.SickLeaveEndingRange=[];this.EntitledAnnualLeave=[];this.EntitledSickLeave=[];this.PrevYearAnnualLeaveStartingRange=[];this.PrevYearSickLeaveStartingRange=[];this.PrevYearAnnualLeaveEndingRange=[];this.PrevYearSickLeaveEndingRange=[];this.PrevYearEntitledAnnualLeave=[];this.PrevYearEntitledSickLeave=[];this.DynamicList=[];this.UserID=[];this.EmployeeRowID=[]}getColumnsKey(){return Ct.columnsKey}getDialogType(){return we}getRowDefinition(){return it}getService(){return S.baseUrl}getAddButtonCaption(){return"Create Employee Profile"}getQuickFilters(){return super.getQuickFilters()}onViewProcessData(e){e=super.onViewProcessData(e),this.toolbar.findButton("column-picker-button").toggle(!1);var r=e.Entities;return this.RowIdOfEmployees.length=0,e}createToolbarExtensions(){super.createToolbarExtensions(),this.rowSelection=new ne.GridRowSelectionMixin(this,{selectable:e=>!0})}getColumns(){ne.DataGrid.defaultRowHeight=100;var e=super.getColumns();return e.splice(0,0,{field:"Employee Leave",name:"",format:r=>{var l='<a class="inline-action leave-application" title="leave"><i class="fa fa-plane"></i></a><br><a class="inline-action employee-post" title="employee profile edit history"><i class="fa fa-wrench"></i></a>';return l},width:12,minWidth:12,maxWidth:12}),e.splice(0,0,{field:"Employee Shift History",name:"",format:r=>{var l='<a class="inline-action shift-history" title="shift history"><i class="fa fa-book"></i></a><br><a class="inline-action basic-info" title="basic info"> <i class="fa fa-user-tie"></i></a>';return l},width:12,minWidth:12,maxWidth:12}),e}getButtons(){var e=super.getButtons();return pe.Authorization.hasPermission(je.HumanResources)&&e.push({title:"Batch User Creation",cssClass:"apply-changes-button",onClick:r=>{(0,pe.confirm)("Do you want to create users in batch?",()=>{var l=new Ft;l.dialogOpen(),l.element.on("dialogclose",function(){location.reload()})})},separator:!0}),e}onClick(e,r,l){if(super.onClick(e,r,l),!e.isDefaultPrevented()){var c=this.itemAt(r),a=$(e.target);a.parent().hasClass("inline-action")&&(a=a.parent()),a.hasClass("basic-info")&&(0,pe.confirm)("Do you want to view basic employee data?",()=>{var v=new At(c.Id);v.loadByIdAndOpenDialog(c.Id),v.set_readOnly(!0),v.element.on("dialogopen",function(){})}),a.hasClass("employee-post")&&(0,pe.confirm)("Do you want to view employee profile edit history?",()=>{var v=new Yt(c.Id);v.dialogOpen()}),a.hasClass("leave-application")&&(0,pe.confirm)("Do you want to view leave details?",()=>{Nt.List({},v=>{var y=v.Entities.filter(b=>b.EmployeeRowId===c.Id);y.sort((b,U)=>{let E=new Date(b.NextEntitlementDate).getTime(),s=new Date(U.NextEntitlementDate).getTime();return E-s});var L=new Bt(c.Id);L.loadByIdAndOpenDialog(y[y.length-1].Id)})}),a.hasClass("shift-history")&&(0,pe.confirm)("Do you want to view the shift history?",()=>{var v=new Tt(c.EmployeeID,c.Id);v.dialogOpen()})}}};I(Ce,"EmployeeProfileGrid"),Ce=tt([ne.Decorators.filterable(),ne.Decorators.registerClass("HRMSoftware.EmployeeProfile.EmployeeProfileGrid")],Ce);var ht=T(ei(),1),Jt=T(ti(),1);function q(he,k){for(let e=0;e<he.length;e++)if(he[e].Id===k)return he[e].Name;return null}I(q,"findRowById");function ii(){var he;if(_e.List({},t=>{for(var o in t.Entities)if(t.Entities[o].IsActive==1){he=t.Entities[o].BasedCountry;break}}),Ue.Authorization.hasPermission(je.HumanResources)){_e.List({},t=>{if(t.Entities.length==0){let o=document.createElement("main");o.id="main-content",o.className="main-container",o.innerHTML="<h1>This page is used to create Employee Profiles and new users</h1><p>Please initialise company settings to start using this feature.</p>",$("#GridDiv").append(o);return}else(0,jt.initFullHeightGridPage)(new Ce($("#GridDiv")).element)});return}(0,Jt.default)(ht);var k,e=[],r=[],l=[],c=[],a=[],v=[],y=[],L=!1;for((0,Se.serviceCall)({service:St.baseUrl+"/ListShift",method:"GET",data:{},async:!1,onSuccess:t=>{L=!0;let o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];for(var n in t.Entities){var u=[],d=[],m=[];for(var h in o)u.push(t.Entities[n][o[h]+"StartingFrom"]),d.push(t.Entities[n][o[h]+"EndingAt"]),m.push(t.Entities[n][o[h]+"WorkingTime"]);y.push({ShiftName:t.Entities[n].ShiftName,WorkingHourFromList:u,WorkingHourUntilList:d,WorkingTimeList:m,Color:t.Entities[n].ShiftColor,ShiftIdList:t.Entities[n].Id}),c.push(u),a.push(d),v.push(m),e.push(t.Entities[n].ShiftName),r.push(t.Entities[n].ShiftColor),l.push(t.Entities[n].Id)}},onError:t=>{console.log(t)}});L==!1;);var b=[],U=!1;for((0,Se.serviceCall)({service:kt.baseUrl+"/ListPublicHoliday",method:"GET",data:{},async:!1,onSuccess:t=>{U=!0;for(var o in t.Entities)t.Entities[o].IsActive==1&&b.push({PublicHolidayDate:t.Entities[o].Date,PublicHolidayName:t.Entities[o].Name,PublicHolidayId:t.Entities[o].Id})},onError:t=>{console.log(t)}});U==!1;);var E=[],s=!1;for((0,Se.serviceCall)({service:Gt.baseUrl+"/ListGroup",method:"GET",data:{},async:!1,onSuccess:t=>{s=!0;for(var o in t.Entities)E.push({GroupName:t.Entities[o].Name,GroupColor:t.Entities[o].ShiftColor,GroupID:t.Entities[o].Id})},onError:t=>{console.log(t)}});s==!1;);var _=[],at=!1;for((0,Se.serviceCall)({service:xt.baseUrl+"/ListTakenLeaveFromID",method:"GET",data:{EmployeeRowID:Ue.Authorization.userDefinition.EmployeeRowID},async:!1,onSuccess:t=>{at=!0;for(var o in t.Entities){var n=0;t.Entities[o].LeaveReasonId==4&&t.Entities[o].HalfDay==1&&(n=1),_.push({StartDate:t.Entities[o].StartDate.substring(0,10),EndDate:t.Entities[o].EndDate.substring(0,10),HalfDate:n,LeaveReason:t.Entities[o].LeaveReasonId,ID:t.Entities[o].Id})}},onError:t=>{console.log(t)}});at==!1;);var Le,Je,ze,Te=new Date,le=Te.getMonth()+1,se=Te.getFullYear(),ot=`${Te.getFullYear()}-${(Te.getMonth()+1).toString().padStart(2,"0")}`;function ke(t,o,n){if(o>n){var u=n;n=o,o=u}return t>=o&&t<=n}I(ke,"isInRange");function P(t){return t<10?"0"+t:t.toString()}I(P,"addLeadingZero");function qe(t,o,n){var u=[],d=[],m=[];for(var h in t){var R=new Date(t[h].PublicHolidayDate.substring(0,10)),C=R.getFullYear(),D=R.getMonth()+1;C==o&&D==n&&(u.push(t[h].PublicHolidayName),d.push(t[h].PublicHolidayDate.substring(0,10)),m.push(t[h].PublicHolidayId))}return[u,d,m]}I(qe,"GetCurrentMonthHoliday");function de(t,o){let n=[],u=new Date(t,o-1,1);for(let d=6;d>0;d--){let m=new Date(u);m.setMonth(m.getMonth()-d),n.push(`${m.getFullYear()}-${(m.getMonth()+1).toString().padStart(2,"0")}`)}n.push(`${u.getFullYear()}-${(u.getMonth()+1).toString().padStart(2,"0")}`);for(let d=1;d<=6;d++){let m=new Date(u);m.setMonth(m.getMonth()+d),n.push(`${m.getFullYear()}-${(m.getMonth()+1).toString().padStart(2,"0")}`)}return n}I(de,"generateMonthRange");function ve(t,o,n){var u=new Date(o,n,0).getDate();let d=[];for(let N=1;N<=u;N++){var m=`${o}-${P(n)}-${P(N)}`,h=null,R=new Date(m);for(var C in t){var D=new Date(t[C].ShiftStartDate),J=new Date(t[C].ShiftEndDate);if(R.setHours(0),R.setMinutes(0),R.setSeconds(0),R.setMilliseconds(0),typeof t[C].EmployeeGroupID!==void 0&&R>=D&&R<=J){h=t[C].EmployeeGroupID;break}}d.push({date:m,shift:null,GroupID:h})}return d}I(ve,"generateListOfDate");function W(t,o){console.log(o);for(var n in o){let m=new Date(o[n].ShiftStartDate.substring(0,10)),h=new Date(o[n].ShiftEndDate.substring(0,10));for(var u of t){var d=new Date(u.date);d>=m&&d<=h&&u.GroupID==null&&(u.shift=o[n].ShiftId)}}return t}I(W,"appendShift");function ye(t,o,n,u,d){console.log(t);let m=new Date(t[0].date).getDay(),h=t.length,R=m,C=[];for(let A=1;A<=h;A++){var D=new Date(t[A-1].date),J=`${D.getFullYear()}-${(D.getMonth()+1).toString().padStart(2,"0")}-${D.getDate().toString().padStart(2,"0")}`;let F=(R+A-1)%7,ce=Math.floor((m+A-1)/7),fe=A;var N=t[A-1].shift,me=t[A-1].GroupID,Y=null,H=null,V=null;for(var w in u)if(u[w].PublicHolidayDate.substring(0,10)==J){H=V=u[w].PublicHolidayName,Y="#FF0000",N=null,me=null;break}if(N!=null){var x;for(var w in n)if(n[w].ShiftIdList==N){x=w;break}Y=n[x].Color,H=n[x].ShiftName,n[x].WorkingHourUntilList[F]===void 0&&n[x].WorkingHourFromList[F]==null?(H="Rest Day",Y="#FFFFE0",V="Happy Holidays"):n[x].WorkingHourFromList[F]!=null&&n[x].WorkingHourUntilList[F]!=null&&(V=n[x].WorkingHourFromList[F]+"-"+n[x].WorkingHourUntilList[F])}else if(me!=null){for(var w in o)if(o[w].GroupID==me){H=V=o[w].GroupName,Y=o[w].GroupColor;break}}var z=(0,$e.getLookup)("LeaveReason.LeaveReason");for(var w in d){var X=new Date(d[w].StartDate),ue=new Date(d[w].EndDate),Pe=d[w].LeaveReason,B;for(var ee in z.items)if(z.items[ee].Id==Pe){B=z.items[ee].LeaveReason.replace(/\s/g,"");break}D>=X&&D<=ue&&(H=V=B,Y="#00FF00",N=null)}C.push({x:F,y:5-ce,color:Y,shiftstring:H,value:N,date:J,custom:{monthDay:fe,details:V}})}return console.log(C),C}I(ye,"generateChartData");function Ke(t,o,n){return o===void 0||n===void 0?!1:t.getTime()>=o.getTime()&&t.getTime()<=n.getTime()}I(Ke,"isDateBetween");function Qe(t,o){var u=ht.chart("Employee-Timetable",{chart:{type:"heatmap"},title:{text:"",align:"left"},accessibility:{landmarkVerbosity:"one"},tooltip:{enabled:!0,outside:!0,zIndex:20,headerFormat:"",pointFormat:"{point.date:%A, %b %e, %Y} </br>{point.custom.details:%s }",nullFormat:"{point.date:%A, %b %e, %Y} </br>{point.custom.details:%s }"},xAxis:{categories:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],opposite:!0,lineWidth:26,offset:13,lineColor:"rgba(27, 26, 37, 0.2)",labels:{rotation:0,y:20,style:{textTransform:"uppercase",fontWeight:"bold"}},accessibility:{description:"weekdays",rangeDescription:"X Axis is showing all 7 days of the week, starting with Sunday."}},yAxis:{min:0,max:5,accessibility:{description:"weeks"},visible:!1},legend:{enable:!1,layout:"vertical",verticalAlign:"middle"},series:[{showInLegend:!1,keys:["x","y","value","date","color","id"],data:t,nullColor:"rgba(196, 196, 196, 0.2)",borderWidth:2,borderColor:"rgba(196, 196, 196, 0.2)",dataLabels:[{enabled:!0,format:"{#unless point.custom.empty}{point.shiftstring}{/unless}",style:{textOutline:"none",fontWeight:"normal",fontSize:"0.73rem"},y:4},{enabled:!0,align:"left",verticalAlign:"top",format:"{#unless point.custom.details}{point.custom.details}{/unless}",backgroundColor:"whitesmoke",padding:2,style:{textOutline:"none",color:"rgba(70, 70, 92, 1)",fontSize:"0.8rem",fontWeight:"bold",opacity:.5},x:1,y:1}]}],plotOptions:{series:{point:{events:{click:function(){var h=-1,R=0;for(var C in t)if(t[C].x==this.x&&t[C].y==this.y){var D=new Date(t[C].date),J=D.getDate(),N=D.getMonth()+1,me=D.getFullYear(),H=!1;let te=`${me}-${N.toString().padStart(2,"0")}-${J.toString().padStart(2,"0")}`;var Y=new Date(te),H=!1;for(var V in _){var w=new Date(_[V].StartDate),x=new Date(_[V].EndDate);if(D>=w&&D<=x){var z=new Lt;z.loadByIdAndOpenDialog(_[V].ID),z.set_readOnly(!0),R=1;break}}if(R==1)break;var X=!1;for(var ue in o)if(o[ue].PublicHolidayDate==te){var Pe=o[ue].Id;X=!0;break}if(X=!0)break;for(var B in k){var ee=new Date(k[B].ShiftStartDate),A=new Date(k[B].ShiftEndDate),F=k[B].ShiftEndDate;if(k[B].EmployeeGroupID!==void 0&&D>=ee&&D<=A){h=k[B].EmployeeGroupID,H=!0;break}if(Ke(Y,ee,A)){h=k[B].Id;var ce=new Ut(Ue.Authorization.userDefinition.EmployeeRowID,te,1,F);ce.loadByIdAndOpenDialog(h),ce.set_readOnly(!0)}}if(H){var fe=new Vt;fe.loadByIdAndOpenDialog(h),fe.set_readOnly(!0)}if(X){var xe=new Ot;xe.loadByIdAndOpenDialog(Pe),xe.set_readOnly(!0)}break}}}}}}}),d=u.chartWidth,m=u.chartHeight;return[d,m]}if(I(Qe,"plot"),!Ue.Authorization.hasPermission(je.HumanResources)){var He=document.createElement("style");He.setAttribute("type","text/css"),He.innerHTML=` body {margin-top:20px;}

            .card-style1 {
                box-shadow: 0px 0px 10px 0px rgb(89 75 128 / 9 %);
            }
            .border - 0 {
                border: 0!important;
            }
            .card {
                position: relative;
                display: flex;
                flex-direction: column;
                min-width: 0;
                word-wrap: break-word;
                background-color: #fff;
                background-clip: border-box;
                border: 1px solid rgba(0, 0, 0, .125);
                border-radius: 0.25rem;
            }
            section {
                padding: 120px 0;
                overflow: hidden;
                background: #fff;
            }
            .mb-2-3,.my-2-3 {
                margin-bottom: 2.3rem;
            }

            .section-title {
                font-weight: 600;
                letter-spacing: 2px;
                text-transform: uppercase;
                margin-bottom: 10px;
                position: relative;
                display: inline-block;
            }

            .text-primary {
                    color: #ceaa4d!important;
                }

            .text-secondary {
                    color: #15395A!important;
                }

            .font-weight-600 {
                    font-weight: 600;
                }

            .display-26 {
                    font-size: 1.3rem;
                }

        @media screen and(min-width: 992px) {
        .p-lg-7 {
                padding: 4rem;
            }
        }

        @media screen and(min-width: 768px) {
        .p-md-6 {
                padding: 3.5rem;
            }
        }

        @media screen and(min-width: 576px) {
        .p-sm-2-3 {
                padding: 2.3rem;
            }
        }

    .p-1-9 {
            padding: 1.9rem;
        }

    .bg-secondary {
            background: #15395A!important;
        }

        @media screen and(min - width: 576px) {
        .pe-sm-6,.px-sm-6{
                padding-right: 3.5rem;
            }
        }

        @media screen and(min-width: 576px) {
        .ps-sm-6,.px-sm-6 {
                padding-left: 3.5rem;
            }
        }

    .pe-1-9,.px-1-9{
            padding-right: 1.9rem;
        }

    .ps-1-9,.px-1-9 {
            padding-left: 1.9rem;
        }

    .pb-1-9,.py-1-9 {
            padding-bottom: 1.9rem;
        }

    .pt-1-9,.py-1-9{
            padding-top: 1.9rem;
        }
    .mb-1-9,.my-1-9 {
            margin-bottom: 1.9rem;
        }

        @media(min-width: 992px) {
        .d-lg-inline-block {
                display: inline - block!important;
            }
        }
    .rounded {
            border-radius: 0.25rem!important;
        }
        .tab {
          overflow: hidden;
          border: 1px solid #ccc;
          background-color: #f1f1f1;
        }

        .tab button {
          background-color: inherit;
          float: left;
          border: none;
          outline: none;
          cursor: pointer;
          padding: 14px 16px;
          transition: 0.3s;
        }

        .tab button:hover {
          background-color: #ddd;
        }

        .tab button.active {
          background-color: #ccc;
        }


        .tabcontent {
          display: none;
          padding: 6px 12px;
          border: 1px solid #ccc;
          border-top: none;
        animation: fadeEffect 1s; /* Fading effect takes 1 second */

        }

        @keyframes fadeEffect {
          from {opacity: 0;}
          to {opacity: 1;}
        }
        `;var j=document.createElement("div");j.setAttribute("class","row");var Be=document.createElement("div");Be.setAttribute("class","container");var Fe=document.createElement("section");Fe.setAttribute("class","bg-light");var ge=document.createElement("DIV");ge.setAttribute("class","col-lg-12 mb-4 mb-sm-5");var K=document.createElement("DIV");K.setAttribute("class","card card-style1 border-0");var Me=document.createElement("DIV");Me.setAttribute("class","card-body");var be=document.createElement("div");be.setAttribute("class","row align-items-center");var Q=document.createElement("img");Q.setAttribute("id","myImg"),Q.width=63,Q.height=112.5;var We=document.createElement("DIV");We.setAttribute("class","col-lg-12 mb-4 mb-sm-5");var Oe=document.createElement("DIV");Oe.classList.add("category-title"),Oe.setAttribute("id","Employee-Timetable");var Ee=!1,i=(0,$e.getLookup)("Department.Department"),g=(0,$e.getLookup)("Division.Division"),O=(0,$e.getLookup)("Section.Section"),Z=(0,$e.getLookup)("JobGrade.JobGrade"),Ze=(0,$e.getLookup)("Occupation.Occupation"),G=!1;for((0,Se.serviceCall)({service:$t.baseUrl+"/RetriveShiftHistory",method:"GET",data:{EmployeeID:Ue.Authorization.userDefinition.EmployeeRowID},async:!1,onSuccess:t=>{k=t.Entities,Le=ve(k,se,le);for(var o in t.Entities)if(parseInt(t.Entities[o].Id)==0){Ee=!0;break}G=!0},onError:t=>{console.log(t)}});G==!1;);console.log(Ee),(0,Se.serviceCall)({service:S.baseUrl+"/EmployeeProfileBasedOnID",data:{EmployeeID:Ue.Authorization.userDefinition.EmployeeRowID},method:"GET",async:!1,onSuccess:t=>{t.Entities[0].EmployeeImg?Q.src="/upload/"+t.Entities[0].EmployeeImg:t.Entities[0].Sex==1?Q.src="https://i.stack.imgur.com/l60Hf.png":t.Entities[0].Sex==0&&(Q.src="https://st.depositphotos.com/2218212/2938/i/950/depositphotos_29388097-stock-illustration-facebook-profile.jpg");var o=document.createElement("div");o.appendChild(Q),o.setAttribute("class","col-lg-2 mb-4 mb-lg-0");var n=document.createElement("div");n.setAttribute("class","col-lg-5 px-xl-10");var u=document.createElement("div");u.setAttribute("class","col-lg-5 px-xl-10");var d=document.createElement("ul");d.setAttribute("class","list-unstyled ");var m=document.createElement("ul");m.setAttribute("class","list-unstyled ");var h=document.createElement("li"),R=document.createElement("span");R.setAttribute("class","text-secondary me-1 font-weight-600"),R.innerText="Name",h.appendChild(R),h.insertAdjacentText("beforeend",t.Entities[0].EmployeeName),d.appendChild(h);var C=document.createElement("li"),D=document.createElement("span");D.setAttribute("class","text-secondary me-1 font-weight-600"),D.innerText="Employee ID",C.appendChild(D),C.insertAdjacentText("beforeend",t.Entities[0].EmployeeID),d.appendChild(C),console.log(t.Entities[0]);var J=document.createElement("li"),N=document.createElement("span");N.setAttribute("class","text-secondary me-1 font-weight-600"),N.innerText="Age",J.appendChild(N),J.insertAdjacentText("beforeend",t.Entities[0].Age),d.appendChild(J);let me=new Date(t.Entities[0].RecruitmentDate),Y=new Date,H=Y.getFullYear()-me.getFullYear(),V=Y.getMonth()-me.getMonth();var w=document.createElement("li"),x=document.createElement("span");x.setAttribute("class","text-secondary me-1 font-weight-600");var z;if(H==0?(x.innerText="Month of service",z=V.toString()):(x.innerText="Year of service",z=H.toString()),w.appendChild(x),w.insertAdjacentText("beforeend",z),d.appendChild(w),q(i.items,t.Entities[0].DepartmentId)!=null){var X=document.createElement("li"),ue=document.createElement("span");ue.setAttribute("class","text-secondary me-1 font-weight-600"),ue.innerText="Department",X.appendChild(ue),X.insertAdjacentText("beforeend",q(i.items,t.Entities[0].DepartmentId)),m.appendChild(X)}if(q(g.items,t.Entities[0].DivisionId)!=null){var Pe=document.createElement("li"),B=document.createElement("span");B.setAttribute("class","text-secondary me-1 font-weight-600"),B.innerText="Division",Pe.appendChild(B),Pe.insertAdjacentText("beforeend",q(g.items,t.Entities[0].DivisionId)),m.appendChild(Pe)}if(q(O.items,t.Entities[0].SectionId)!=null){var ee=document.createElement("li"),A=document.createElement("span");A.setAttribute("class","text-secondary me-1 font-weight-600"),A.innerText="Section",ee.appendChild(A),ee.insertAdjacentText("beforeend",q(O.items,t.Entities[0].SectionId)),m.appendChild(ee)}if(q(Ze.items,t.Entities[0].OccupationId)!=null){var F=document.createElement("li"),ce=document.createElement("span");ce.setAttribute("class","text-secondary me-1 font-weight-600"),ce.innerText="Occupation",F.appendChild(ce),F.insertAdjacentText("beforeend",q(Ze.items,t.Entities[0].OccupationId)),m.appendChild(F)}if(q(Z.items,t.Entities[0].JobGradeId)!=null){var fe=document.createElement("li"),xe=document.createElement("span");xe.setAttribute("class"," text-secondary me-1 font-weight-600"),xe.innerText="JobGrade",fe.appendChild(xe),fe.insertAdjacentText("beforeend",q(Z.items,t.Entities[0].JobGradeId)),m.appendChild(fe)}n.appendChild(d),u.appendChild(m),be.appendChild(o),be.appendChild(n),be.appendChild(u),Me.appendChild(be),K.appendChild(Me),ge.appendChild(K),j.append(ge),Be.append(j),Fe.append(Be),$("#GridDiv").append(Fe),$("#GridDiv").append(He);var te=document.createElement("DIV");te.setAttribute("id","time-box"),te.setAttribute("class","row"),te.setAttribute("align","right");var vt=document.createElement("DIV"),Xe=document.createElement("INPUT");Xe.setAttribute("id","Month"),Xe.setAttribute("type","text"),Xe.setAttribute("class","monthSelect"),vt.appendChild(Xe),te.appendChild(vt);function zt(dt,Ve){var M,Ye,De;for(Ye=document.getElementsByClassName("tabcontent"),M=0;M<Ye.length;M++)Ye[M].style.display="none";for(De=document.getElementsByClassName("tablinks"),M=0;M<De.length;M++)De[M].className=De[M].className.replace(" active","");document.getElementById(Ve)!=null&&(document.getElementById(Ve).style.display="block"),dt.currentTarget.className+=" active"}I(zt,"open");var nt=document.createElement("div");nt.setAttribute("class","tab");var Ne=document.createElement("button");Ne.addEventListener("click",function(){zt(event,"shifttab")},!1),Ne.setAttribute("class","tablinks"),Ne.innerText="Shift",Ne.setAttribute("id","defaultOpen"),nt.appendChild(Ne);var Ge=document.createElement("DIV");Ge.setAttribute("class","tabcontent"),Ge.setAttribute("id","shifttab"),Ge.appendChild(te),Ge.appendChild(Oe);var ie=document.createElement("DIV");ie.setAttribute("class","tabcontent"),ie.setAttribute("id","tab2");var yt=document.createElement("h3");yt.textContent="Tab 2";var gt=document.createElement("p");gt.textContent="This is the content of Tab 2",ie.appendChild(yt),ie.appendChild(gt),j.appendChild(nt),j.appendChild(Ge),j.appendChild(ie);var et=de(se,le);let bt=new _t.Select2Editor($("#Month"));for(var Ae=0;Ae<et.length;Ae++)bt.addItem({id:Ae.toString(),text:et[Ae].toString()}),et[Ae].toString()==ot&&bt.set_value(Ae.toString());$("#Month").on("change",function(){return re(this,null,function*(){var dt=$(this).val(),Ve=et[dt];Je=parseInt(Ve.split("-")[0]),ze=parseInt(Ve.split("-")[1]),le=ze,se=Je;var M=ve(k,Je,ze);Ee==!1&&(M=W(M,k));var[Ye,De,Zt]=qe(b,se,le),mt=[];for(var ut in De)mt.push({PublicHolidayDate:De[ut],PublicHolidayId:Zt[ut],PublicHolidayName:Ye[ut]});var Xt=ye(M,E,y,mt,_),It,wt;[It,wt]=Qe(Xt,mt),ie.style.width=String(It)+"px",ie.style.height=String(wt)+"px"})}),Ee==!1&&(Le=W(Le,k));var[qt,Et,Kt]=qe(b,se,le),lt=[];for(var st in Et)lt.push({PublicHolidayDate:Et[st],PublicHolidayId:Kt[st],PublicHolidayName:qt[st]});var Qt=ye(Le,E,y,lt,_),Pt,Dt;[Pt,Dt]=Qe(Qt,lt),ie.style.width=String(Pt)+"px",ie.style.height=String(Dt)+"px",Ne.click()},onError:t=>{console.log(t.Error)}})}}I(ii,"pageInit");export{ii as default};
//# sourceMappingURL=EmployeeProfilePage.js.map
