import{c as ze,d as Vt}from"../../../../_chunks/chunk-2W3R3JAJ.js";import{a as Bt}from"../../../../_chunks/chunk-PTFCEV6T.js";import{a as Ft}from"../../../../_chunks/chunk-X34WG5YO.js";import{a as Wt}from"../../../../_chunks/chunk-JH4A6EMM.js";import{a as Gt}from"../../../../_chunks/chunk-RANEDM4E.js";import{h as Mt}from"../../../../_chunks/chunk-YH4BIPAQ.js";import{a as Tt}from"../../../../_chunks/chunk-3U4AUCNV.js";import{G as Ht}from"../../../../_chunks/chunk-C6XWQKYL.js";import{a as Nt}from"../../../../_chunks/chunk-U2MASTIE.js";import{d as $t,e as Xt,f as ei}from"../../../../_chunks/chunk-7LATD64C.js";import{a as Lt}from"../../../../_chunks/chunk-WDYCTSFS.js";import{d as At}from"../../../../_chunks/chunk-I3VQVPHQ.js";import{d as Ut}from"../../../../_chunks/chunk-XZKAQRVI.js";import"../../../../_chunks/chunk-JVVTNWA6.js";import"../../../../_chunks/chunk-CICJSBLQ.js";import"../../../../_chunks/chunk-BFH3N3PU.js";import{d as Ot}from"../../../../_chunks/chunk-LCDQ6GJF.js";import"../../../../_chunks/chunk-T7E74GLF.js";import{d as kt}from"../../../../_chunks/chunk-FT4TSSDS.js";import{c as St,d as xt}from"../../../../_chunks/chunk-USJNQGRS.js";import{c as Ct}from"../../../../_chunks/chunk-O6KXVEE7.js";import{d as Te}from"../../../../_chunks/chunk-2YAUIENJ.js";import"../../../../_chunks/chunk-BVVXSYMS.js";import{n as Fe}from"../../../../_chunks/chunk-YDNSOE4Z.js";import{a as Be}from"../../../../_chunks/chunk-27W64ILM.js";import{c as It,f as ot}from"../../../../_chunks/chunk-KJR5IZZY.js";import{a as je,b as S}from"../../../../_chunks/chunk-2SJ2SYN6.js";import"../../../../_chunks/chunk-K2UT2MVJ.js";import{a as nt}from"../../../../_chunks/chunk-DNINIZJD.js";import{c as I,g as G,h as Ye,j as He,k as de}from"../../../../_chunks/chunk-L3ECGIWB.js";var _t=G(nt(),1),we=G(de(),1),Pe=G(de(),1),Re=G(de(),1),Yt=G(de(),1);var ae=G(nt(),1);var y=G(nt(),1);var Ee=G(de(),1);var v=G(de(),1);var ge=G(de(),1);var be=class extends y.EntityDialog{constructor(){super();this.form=new ot(this.idPrefix);this.list_of_employee_id=[];this.list_of_employee_row_id=[];this.ListOfUserName=[];this.OriginalValue={};this.EditedValue={};this.form.FixedDeductionList.slickGrid.setOptions({rowHeight:30}),this.form.AllowanceLists.slickGrid.setOptions({rowHeight:30}),this.cloneButton.remove(),S.List({},t=>{for(var r in t.Entities)this.list_of_employee_id.push(t.Entities[r].EmployeeID),this.list_of_employee_row_id.push(t.Entities[r].Id)}),Te.List({},t=>{for(var r in t.Entities)t.Entities[r].IsActive==1&&(this.RetireAge=t.Entities[r].RetireAge)})}getFormKey(){return ot.formKey}getRowDefinition(){return je}getService(){return S.baseUrl}createUser(){var t=this;Fe.Create({Entity:{Username:this.form.UserName.value,DisplayName:this.form.EmployeeName.value,Password:this.form.UserPassword.value,PasswordConfirm:this.form.UserPassword.value,Email:this.form.EmployeeEmail.value,MobilePhoneNumber:this.form.TelNumber1.value}})}onSaveSuccess(t){var r=this,g=this.entityId;if(this.isNew()){var u=v.Authorization.userDefinition.Username,s=new Date,o="Employee "+this.form.EmployeeName.value+" is created by "+u+" on "+s;ze.Create({Entity:{Description:o,OldValue:null,NewValue:null,FieldName:null,EmployeeRowId:this.EmployeeRowID}}),this.form.CreateUser.value==!0&&this.createUser()}else if(!this.isNew())if(this.form.CreateUser.value==!0)Fe.List({},b=>{var l=0;for(var P in b.Entities)b.Entities[P].EmployeeRowID==g&&(l=1,Fe.Update({EntityId:b.Entities[P].UserId,Entity:{DisplayName:this.form.EmployeeName.value,Email:this.form.EmployeeEmail.value,MobilePhoneNumber:this.form.TelNumber1.value}}));l==0&&r.createUser(),this.Record(this.EditedValue);var H=Object.keys(this.EditedValue),V=v.Authorization.userDefinition.Username,ce=new Date;for(let f of H)if(this.EditedValue[f]!=this.OriginalValue[f]&&typeof this.OriginalValue[f]!="object"&&typeof this.EditedValue[f]!="object"){var T=f;if(T=T.replace(/ID/g,""),(0,v.isEmptyOrNull)(this.OriginalValue[f]))var J=T+" of "+this.form.EmployeeName.value+" is set by "+V+" to "+this.EditedValue[f]+" on "+ce;else var J=T+" of "+this.form.EmployeeName.value+" is changed by "+V+" from "+this.OriginalValue[f]+" to "+this.EditedValue[f]+" on "+ce;ze.Create({Entity:{Description:J,OldValue:this.OriginalValue[f],NewValue:this.EditedValue[f],FieldName:f,EmployeeRowId:this.EmployeeRowID}})}});else{this.Record(this.EditedValue);var E=Object.keys(this.EditedValue),u=v.Authorization.userDefinition.Username;for(let l of E)if(this.EditedValue[l]!==this.OriginalValue[l]&&typeof this.OriginalValue[l]!="object"&&typeof this.EditedValue[l]!="object"){var s=new Date,D=l;if(D=D.replace(/ID/g,""),(0,v.isEmptyOrNull)(this.OriginalValue[l]))var o=D+" of "+this.form.EmployeeName.value+" is set by "+u+" to "+this.EditedValue[l]+" on "+s;else var o=D+" of "+this.form.EmployeeName.value+" is changed by "+u+" from "+this.OriginalValue[l]+" to "+this.EditedValue[l]+" on "+s;ze.Create({Entity:{Description:o,OldValue:this.OriginalValue[l],NewValue:this.EditedValue[l],FieldName:l,EmployeeRowId:this.EmployeeRowID}})}}super.onSaveSuccess(t)}onDialogOpen(){super.onDialogOpen();var t=this;$(".OtPayEntitlement").parent().after(`<ul role="tablist" class="nav nav-tabs property-tabs">
            <li class="nav-item" role="presentation"> <a class="nav-link custom active AllowanceLists" data-bs-toggle="tab" role="tab">Allowance</a> </li>
            <li class="nav-item" role="presentation"> <a class="nav-link custom FixedDeductionList" data-bs-toggle="tab" role="tab"> Deductions</a></li>
        </ul>
        `),$(".field.FixedDeductionList").parent().hide(),$(".field.OtPayEntitlement, .field.FixedOtRateOption, .field.PayByMonth, .field.PayByHour, .field.PayByDay").addClass("col-2"),document.querySelectorAll(".nav-link.custom").forEach(i=>{i.addEventListener("click",function(){document.querySelectorAll(".nav-link.custom").forEach(A=>A.classList.remove("active")),this.classList.add("active"),console.log(this.classList);let p=Object.values(this.classList).includes("AllowanceLists"),x=Object.values(this.classList).includes("FixedDeductionList");p?($(".field.AllowanceLists").parent().show(),$(".field.FixedDeductionList").parent().hide()):x&&($(".field.AllowanceLists").parent().hide(),$(".field.FixedDeductionList").parent().show())})}),$(".FixedOtRateOption").hide();var r=document.getElementById(`${this.idPrefix}OtPayEntitlement`);$(r).on("change",function(){return He(this,null,function*(){t.form.OtPayEntitlement.value==!0?$(".FixedOtRateOption, .OtRateWeekday, .OtRateWeekend, .OtRatePublicHoliday, .FixedOtRateOption").show():t.form.OtPayEntitlement.value==!1&&(t.form.OtRateWeekday.value=t.form.OtRateWeekend.value=t.form.OtRatePublicHoliday.value=0,$(".OtRateWeekday, .OtRateWeekend, .OtRatePublicHoliday, .FixedOtRateOption").hide())})}),$(r).trigger("change");var g=document.getElementById(`${this.idPrefix}FixedOtRateOption`);$(g).on("change",function(){return He(this,null,function*(){t.form.FixedOtRateOption.value==!0?(y.EditorUtils.setReadonly(t.form.OtRatePublicHoliday.element,!1),y.EditorUtils.setReadonly(t.form.OtRateWeekday.element,!1),y.EditorUtils.setReadonly(t.form.OtRateWeekend.element,!1)):t.form.FixedOtRateOption.value==!1&&(y.EditorUtils.setReadonly(t.form.OtRatePublicHoliday.element,!0),y.EditorUtils.setReadonly(t.form.OtRateWeekday.element,!0),y.EditorUtils.setReadonly(t.form.OtRateWeekend.element,!0))})}),$(g).trigger("change"),y.EditorUtils.setReadonly(this.form.WorkingHour.element,!0),y.EditorUtils.setReadonly(this.form.WorkingDays.element,!0),y.EditorUtils.setReadonly(this.form.DailyRateBase.element,!0),y.EditorUtils.setReadonly(this.form.NplRateBase.element,!0);var u=this.form.UserPassword.element,s=this.form.UserName.element;$(u).attr("autocomplete","off"),$(s).attr("autocomplete","off"),y.EditorUtils.setReadonly(this.form.PassedProbation.element,!0);let o=document.createElement("div");o.style.position="absolute",o.style.backgroundColor="#000",o.style.color="#fff",o.style.padding="4px",o.style.borderRadius="4px",o.style.zIndex=Number.MAX_SAFE_INTEGER.toString(),o.style.display="none",document.body.appendChild(o),(parseInt(this.form.EmployeeType.value)==1||this.isNew())&&$(".IssueDate, .WorkingPermitIssueDate, .WorkingPermitExpireDate, .WorkingPermitValidFrom, .WorkingPermitValidUntil, .ArrivalDate").hide(),this.validateBeforeSave(),this.form.CreateUser.addValidationRule(this.uniqueName,i=>this.form.CreateUser.value&&((0,v.isEmptyOrNull)(this.form.UserName.value)||(0,v.isEmptyOrNull)(this.form.UserPassword.value))?"Please fill in UserName and Password":null);var E=document.getElementById(this.idPrefix+"Birthday");y.EditorUtils.setReadonly(this.form.RetireDate.element,!0),$(E).on("change",function(){var i=t.form.Birthday.valueAsDate;let p=i.getFullYear()+t.RetireAge,x=new Date(i);x.setFullYear(p),x<new Date&&x.setFullYear(p+1),t.form.RetireDate.valueAsDate=x});var D=document.getElementById(this.idPrefix+"UserName"),b="Username Cannot Start With Number, No Special Characters";$(D).on("blur",function(){(0,v.isEmptyOrNull)($(this).val())&&($(this).val(b),$(this).css({color:"grey"}))}),$(D).on("focus",function(){$(this).val()==b&&($(this).val(""),$(this).css({color:"black"}))}),$(D).on("change",function(){$(this).val()!=""&&$(this).val()!=b?$(this).css("color","black"):$(this).css("color","grey")}),$(D).on("keydown",function(i){var p=this.selectionStart,x=/[A-Za-z0-9]/,A=[8,9,13,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,144,145];i.key.match(x)||A.includes(i.keyCode)?p===0&&i.key.match(/[0-9]/)&&i.preventDefault():i.preventDefault()}),$(D).on("mouseenter",()=>{o.innerHTML="Please dont use repeated username <br> Username can not contain anything else than number and characters";let i=$(s)[0].getBoundingClientRect();o.style.display="block",o.style.top=`${i.bottom}px`,o.style.left=`${i.left}px`}),$(D).on("mouseleave",()=>{o.style.display="none"});var l=document.getElementById(this.idPrefix+"UserPassword"),P="Password length must be greater or equal to 6";$(l).on("blur",function(){(0,v.isEmptyOrNull)($(this).val())&&($(this).val(P),$(this).css({color:"grey"}))}),$(l).on("focus",function(){$(this).val()==P&&($(this).val(""),$(this).css({color:"black"}))}),$(l).on("change",function(){$(this).val()!=""&&$(this).val()!=P?$(this).css("color","black"):$(this).css("color","grey")}),$(l).on("mouseenter",()=>{o.innerHTML="Password length must be greater or equal to 6";let i=$(l)[0].getBoundingClientRect();o.style.display="block",o.style.top=`${i.bottom}px`,o.style.left=`${i.left}px`}),$(l).on("mouseleave",()=>{o.style.display="none"});var H=document.getElementById(this.idPrefix+"CalculationDate");if($(H).on("change",()=>{(0,Ee.serviceCall)({service:S.baseUrl+"/CalculateWorkingHourAndDayWithDate",data:{EmployeeRowID:this.entityId,Date:t.form.CalculationDate.value},method:"GET",async:!1,onSuccess:i=>{!(0,v.isEmptyOrNull)(i.Entities[0].NumberOfWorkingDays)&&i.Entities[0].NumberOfWorkingDays>0?t.form.WorkingHour.value=i.Entities[0].TotalWorkingTimeInMinutes/i.Entities[0].NumberOfWorkingDays:t.form.WorkingHour.value=0,t.form.WorkingDays.value=i.Entities[0].NumberOfWorkingDays,t.form.DailyRateBase.value=i.Entities[0].DailyRateBase,t.form.NplRateBase.value=i.Entities[0].NplRateBase},onError:i=>{console.log(i.Error)}}),t.form.OtPayEntitlement.value==!0?(0,Ee.serviceCall)({service:S.baseUrl+"/CalculateOtRate",data:{EmployeeRowID:this.entityId,Date:t.form.CalculationDate.value},method:"GET",async:!1,onSuccess:i=>{console.log(i),t.form.OtRateWeekday.value=i.Entities[0].OtRateWeekday,t.form.OtRateWeekend.value=i.Entities[0].OtRateWeekend,t.form.OtRatePublicHoliday.value=i.Entities[0].OtRatePublicHoliday}}):(t.form.OtRateWeekday.value=t.form.OtRateWeekend.value=t.form.OtRatePublicHoliday.value=0,$(".OtRateWeekday, .OtRateWeekend, .OtRatePublicHoliday").hide())}),(0,Ee.serviceCall)({service:Ht.baseUrl+"/GetTodayDateTime",method:"GET",data:{},async:!1,onSuccess:i=>{t.form.CalculationDate.value=i,$(H).trigger("change")}}),this.isNew()){var V=document.querySelectorAll(".text-bg-danger");V.forEach(function(i){$(i).hide()});var ce=document.querySelectorAll(".text-bg-warning");ce.forEach(function(i){$(i).hide()});var T=document.querySelectorAll(".text-bg-success");T.forEach(function(i){$(i).hide()})}else{if(this.OriginalEmployeeId=this.form.EmployeeID.value,this.Username=this.form.UserName.value,parseInt(this.form.PassedProbation.value)==1){var T=document.querySelectorAll(".text-bg-success");T.forEach(function(p){$(p).hide()}),y.EditorUtils.setReadonly(this.form.ProbationPeriodUntil.element,!0),y.EditorUtils.setReadonly(this.form.ProbationPeriodFrom.element,!0)}S.Retrieve({EntityId:this.entityId},i=>{i.Entity.Retired==0&&i.Entity.Terminated==0&&i.Entity.Resigned==0?$(".tool-button").removeClass("hidden"):(t.readOnly=!0,i.Entity.Terminated==1?(t.dialogTitle=`Terminated Employee (${t.form.EmployeeID.value})`,$(".TerminateDate").show(),$(".TerminateLeaveDate").show()):i.Entity.Resigned==1?(t.dialogTitle=`Resigned Employee (${t.form.EmployeeID.value})`,$(".ResignationDate").show(),$(".ResignLeaveDate").show()):i.Entity.Retired==1&&(t.dialogTitle=`Retired Employee (${t.form.EmployeeID.value})`))})}Fe.List({},i=>{for(var p in i.Entities)i.Entities[p].Username==this.form.EmployeeID.value&&(this.UserRowID=i.Entities[p].UserId),this.ListOfUserName.push(i.Entities[p].Username)});var J=document.getElementById(this.idPrefix+"ProbationPeriod"),f=document.getElementById(this.idPrefix+"ProbationPeriodEnd"),Q=document.getElementById(this.idPrefix+"RecruitmentDate"),re=document.getElementById(this.idPrefix+"EmployeeType"),pe=document.getElementById(this.idPrefix+"PayByDay"),qe=document.getElementById(this.idPrefix+"PayByMonth"),lt=document.getElementById(this.idPrefix+"PayByHour");if($(pe).on("change",function(i){t.form.PayByDay.value&&(t.form.PayByHour.value=!1,t.form.PayByMonth.value=!1)}),$(lt).on("change",function(i){t.form.PayByHour.value&&(t.form.PayByDay.value=!1,t.form.PayByMonth.value=!1)}),$(qe).on("change",function(i){t.form.PayByMonth.value&&(t.form.PayByHour.value=!1,t.form.PayByDay.value=!1)}),$(re).on("change",function(i){$(re).val()==1?($(".EpfContribution").hide(),$(".WorkingPermit").hide(),$(".WorkingPermitIssueDate").hide(),$(".WorkingPermitExpireDate").hide(),$(".WorkingPermitValidFrom").hide(),$(".WorkingPermitValidUntil").hide(),$(".ArrivalDate").hide()):($(".EpfContribution").show(),$(".WorkingPermit").show(),$(".WorkingPermitIssueDate").show(),$(".WorkingPermitExpireDate").show(),$(".WorkingPermitValidFrom").show(),$(".WorkingPermitValidUntil").show(),$(".ArrivalDate").show(),console.log(t.form.EpfClass.items[0].disabled=!0))}),$(f).prop("readonly",!0),$(J).on("change",function(i){var p=$(Q).val();if((0,v.isEmptyOrNull)(p))return;var x=p.split("/");let A=new Date(parseInt(x[2]),parseInt(x[0])-1,parseInt(x[1]));A.setMonth(A.getMonth()+3);let Z=A.getFullYear(),Ie=A.getMonth()+1,fe=A.getDate();var j=`${Ie}/${fe}/${Z}`;$(f).prop("readonly",!1),$(f).val(j),$(f).prop("readonly",!0)}),$(Q).on("change",function(i){var p=$(J).val(),x=$(Q).val();if((0,v.isEmptyOrNull)(p))return;var A=x.split("/");let Z=new Date(parseInt(A[2]),parseInt(A[0])-1,parseInt(A[1]));Z.setMonth(Z.getMonth()+3);let Ie=Z.getFullYear(),fe=Z.getMonth()+1,j=Z.getDate();var Ue=`${fe}/${j}/${Ie}`;$(f).prop("readonly",!1),$(f).val(Ue),$(f).prop("readonly",!0)}),this.isNew())$(".EpfContribution").hide(),$(".UserName").hide(),$(".UserPassword").hide(),$(".GrantHRPrivilege").hide(),$(".CreateUser").on("change",i=>{t.form.CreateUser.value==!0?($(".GrantHRPrivilege").show(),$(".UserName").show(),(0,v.isEmptyOrNull)($(s).val())&&($(s).val(b),$(s).css({color:"grey"})),$(".UserPassword").show(),console.log((0,v.isEmptyOrNull)($(l).val())),(0,v.isEmptyOrNull)($(l).val())&&($(l).val(P),$(l).css({color:"grey"}))):($(".GrantHRPrivilege").val(""),$(".UserName").val(""),$(".UserPassword").val(""),$(".GrantHRPrivilege").hide(),$(".UserName").hide(),$(".UserPassword").hide())});else{if(this.form.CreateUser.value==!0?(y.EditorUtils.setReadonly(this.form.CreateUser.element,!0),y.EditorUtils.setReadonly(this.form.UserPassword.element,!0),y.EditorUtils.setReadonly(this.form.UserName.element,!0)):($(".UserName").hide(),$(".UserPassword").hide(),$(".GrantHRPrivilege").hide(),$(".CreateUser").on("change",i=>{this.form.CreateUser.value==!0?($(".UserName").show(),$(".UserPassword").show(),$(".GrantHRPrivilege").show()):($(".GrantHRPrivilege").hide(),$(".UserName").hide(),$(".UserPassword").hide())})),(0,v.isEmptyOrNull)(this.form.RetireDate.value)){var Se=t.form.Birthday.valueAsDate;let i=Se.getFullYear()+t.RetireAge,p=new Date(Se);p.setFullYear(i),p<new Date&&p.setFullYear(i+1),t.form.RetireDate.valueAsDate=p}$(Q).prop("readonly",!1),this.Record(this.OriginalValue);for(var xe in this.list_of_employee_id)this.list_of_employee_id[xe]==this.form.EmployeeID.value&&(this.EmployeeRowID=this.list_of_employee_row_id[xe]);parseInt(this.form.PassedProbation.value)==1&&(y.EditorUtils.setReadonly(this.form.ProbationPeriodFrom.element,!0),y.EditorUtils.setReadonly(this.form.ProbationPeriodUntil.element,!0)),(0,v.isEmptyOrNull)(t.form.PassedProbation.value)&&(t.form.PassedProbation.value=0 .toString(),S.Update({EntityId:this.entityId,Entity:{PassedProbation:0}}))}}Record(t){var D,b;var r=this.propertyGrid.get_items(),g=[];for(var u in r){var s=r[u].name;g.push(s)}let o={};for(let l of g){var E=(D=this.form[l])==null?void 0:D.text;(typeof E=="undefined"||E===null)&&(E=(b=this.form[l])==null?void 0:b.value,(typeof E=="undefined"||E===null)&&(E="")),o[l]=E}Object.assign(t,o)}getDialogOptions(){let t=super.getDialogOptions();return t.height=800,t.width=1200,t}save_submitHandler(t){var r=[];function g(P){return/^[0-9]/.test(P)}I(g,"startsWithNumber");function u(P){return!/[^a-zA-Z0-9]/.test(P)}if(I(u,"containsOnlyNumbersAndChars"),this.form.UserName.value=="Username Cannot Start With Number, No Special Characters"&&(this.form.UserName.value=""),this.isNew()||this.Username.toLowerCase()!=this.form.UserName.value.toLowerCase()&&!(0,v.isEmptyOrNull)(this.Username))for(var s in this.ListOfUserName)this.form.UserName.value.toLowerCase()==this.ListOfUserName[s].toLowerCase()&&r.push("Please use another username, there is another user with same username");this.form.CreateUser.value==!0&&this.form.UserPassword.value==""&&r.push("Please fill in UserPassword"),this.form.CreateUser.value==!0&&this.form.UserPassword.value.length<6&&r.push("Length of UserPassword cannot be less than 6"),this.form.CreateUser.value==!0&&g(this.form.UserName.value)==!0&&r.push("User Name cannot start with number"),this.form.CreateUser.value==!0&&u(this.form.UserName.value)==!1&&r.push("User Name cannot contain anything else than number and characters");var o=document.getElementById(this.idPrefix+"EmployeeType");$(o).val()==1&&this.form.Nric.value==""&&r.push("Please fill in the Identity Card Number");var E=this.form.EmployeeID.value.toString();if(this.isNew()||!this.isNew()&&this.form.EmployeeID.value!=this.OriginalEmployeeId)for(var D in this.list_of_employee_id)this.list_of_employee_id[D]===E&&r.push("There is a active employee with the ID, please check again.");if(this.form.FixedOtRateOption.value==!0&&((0,v.isEmptyOrNull)(this.form.OtRateWeekday.value)||(0,v.isEmptyOrNull)(this.form.OtRateWeekend.value)||(0,v.isEmptyOrNull)(this.form.OtRatePublicHoliday.value))){(0,Ee.alertDialog)("Please fill in the OT rate");return}if(r.length>0){let P=r.map(H=>`- ${H}`).join(`
`);(0,Ee.alertDialog)(P)}else{var b=t,l=this;this.isNew()?super.save_submitHandler(b):S.Retrieve({EntityId:this.entityId},P=>{console.log("haha"),super.save_submitHandler(b)})}}getToolbarButtons(){var t=super.getToolbarButtons(),r=this,g=document.createElement("style");return g.textContent=`
            .hidden {
      display: none;
    }
    .nav-link.custom {
        cursor: pointer;
    }

            `,document.head.appendChild(g),t.push({title:"Empoyee Retire",cssClass:"text-bg-primary p-2 hidden retireButton",onClick:()=>{var u=new Date;r.form.RetireDate.valueAsDate>u?(0,ge.confirm)("This employee has not reached the retire date, are you sure?",()=>{(0,ge.confirm)("Are you sure this employee has retired?",()=>{S.Update({EntityId:r.entityId,Entity:{Retired:1}}),r.readOnly=!0,r.dialogTitle=`Retired Employee (${r.form.EmployeeID.value})`,$(".confirmEmployee").addClass("hidden"),$(".terminateButton").addClass("hidden"),$(".resignButton").addClass("hidden"),$(".retireButton").addClass("hidden")})}):(0,ge.confirm)("Are you sure this employee has retired?",()=>{S.Update({EntityId:r.entityId,Entity:{Retired:1}}),r.readOnly=!0,r.dialogTitle=`Retired Employee (${r.form.EmployeeID.value})`,$(".confirmEmployee").addClass("hidden"),$(".terminateButton").addClass("hidden"),$(".resignButton").addClass("hidden"),$(".retireButton").addClass("hidden")})}}),t.push({title:"Confirm Empoyee",cssClass:"text-bg-success p-2 confirmEmployee hidden",onClick:()=>{var u=new Date;(0,v.isEmptyOrNull)(r.form.ProbationPeriodUntil.valueAsDate)?(0,ge.confirm)("Do you want to pass probation of this employee?",()=>{S.Update({EntityId:r.entityId,Entity:{PassedProbation:1}}),$(".confirmEmployee").addClass("hidden")}):r.form.ProbationPeriodUntil.valueAsDate>u&&(0,ge.confirm)("This employee has not passed probation period, are you sure?",()=>{(0,ge.confirm)("Do you want to pass probation of this employee?",()=>{S.Update({EntityId:r.entityId,Entity:{PassedProbation:1}}),$(".confirmEmployee").addClass("hidden")})})}}),t.push({title:"Terminate Employee",cssClass:"text-bg-danger p-2 hidden terminateButton",onClick:()=>{var u=new Ft;u.loadByIdAndOpenDialog(this.entityId),u.element.on("dialogclose",function(){S.Retrieve({EntityId:r.entityId},s=>{s.Entity.Retired==0&&s.Entity.Terminated==0&&s.Entity.Resigned==0?$(".tool-button").removeClass("hidden"):(r.readOnly=!0,s.Entity.Terminated==1?r.dialogTitle=`Terminated Employee (${r.form.EmployeeID.value})`:s.Entity.Resigned==1?r.dialogTitle=`Resigned Employee (${r.form.EmployeeID.value})`:s.Entity.Retired==1&&(r.dialogTitle=`Retired Employee (${r.form.EmployeeID.value})`))})})}}),t.push({title:"Employee Resign",cssClass:"text-bg-warning p-2 hidden resignButton",onClick:()=>{var u=new Wt;u.loadByIdAndOpenDialog(this.entityId),u.element.on("dialogclose",function(){S.Retrieve({EntityId:r.entityId},s=>{s.Entity.Retired==0&&s.Entity.Terminated==0&&s.Entity.Resigned==0?$(".tool-button").removeClass("hidden"):(r.readOnly=!0,s.Entity.Terminated==1?r.dialogTitle=`Terminated Employee (${r.form.EmployeeID.value})`:s.Entity.Resigned==1?r.dialogTitle=`Resigned Employee (${r.form.EmployeeID.value})`:s.Entity.Retired==1&&(r.dialogTitle=`Retired Employee (${r.form.EmployeeID.value})`))})})}}),t}};I(be,"EmployeeProfileDialog"),be=Ye([y.Decorators.registerClass("HRMSoftware.EmployeeProfile.EmployeeProfileDialog")],be);var me=G(de(),1);var De=class extends ae.EntityGrid{constructor(t){super(t);this.RowIdWithInitialisedLeave=[];this.RowIdOfEmployees=[];this.AnnualLeaveStartingRange=[];this.SickLeaveStartingRange=[];this.AnnualLeaveEndingRange=[];this.SickLeaveEndingRange=[];this.EntitledAnnualLeave=[];this.EntitledSickLeave=[];this.PrevYearAnnualLeaveStartingRange=[];this.PrevYearSickLeaveStartingRange=[];this.PrevYearAnnualLeaveEndingRange=[];this.PrevYearSickLeaveEndingRange=[];this.PrevYearEntitledAnnualLeave=[];this.PrevYearEntitledSickLeave=[];this.DynamicList=[];this.UserID=[];this.EmployeeRowID=[]}getColumnsKey(){return It.columnsKey}getDialogType(){return be}getRowDefinition(){return je}getService(){return S.baseUrl}getAddButtonCaption(){return"Create Employee Profile"}getQuickFilters(){return super.getQuickFilters()}onViewProcessData(t){t=super.onViewProcessData(t),this.toolbar.findButton("column-picker-button").toggle(!1);var r=t.Entities;return this.RowIdOfEmployees.length=0,t}createToolbarExtensions(){super.createToolbarExtensions(),this.rowSelection=new ae.GridRowSelectionMixin(this,{selectable:t=>!0})}getColumns(){ae.DataGrid.defaultRowHeight=100;var t=super.getColumns();return t.splice(0,0,{field:"Employee Leave",name:"",format:r=>{var g='<a class="inline-action leave-application" title="leave"><i class="fa fa-plane"></i></a><br><a class="inline-action employee-post" title="employee profile edit history"><i class="fa fa-wrench"></i></a>';return g},width:12,minWidth:12,maxWidth:12}),t.splice(0,0,{field:"Employee Shift History",name:"",format:r=>{var g='<a class="inline-action shift-history" title="shift history"><i class="fa fa-book"></i></a><br><a class="inline-action basic-info" title="basic info"> <i class="fa fa-user-tie"></i></a>';return g},width:12,minWidth:12,maxWidth:12}),t}getButtons(){var t=super.getButtons();return me.Authorization.hasPermission(Be.HumanResources)&&t.push({title:"Batch User Creation",cssClass:"apply-changes-button",onClick:r=>{(0,me.confirm)("Do you want to create users in batch?",()=>{var g=new Bt;g.dialogOpen(),g.element.on("dialogclose",function(){location.reload()})})},separator:!0}),t}onClick(t,r,g){if(super.onClick(t,r,g),!t.isDefaultPrevented()){var u=this.itemAt(r),s=$(t.target);s.parent().hasClass("inline-action")&&(s=s.parent()),s.hasClass("basic-info")&&(0,me.confirm)("Do you want to view basic employee data?",()=>{var o=new Ot(u.Id);o.loadByIdAndOpenDialog(u.Id),o.set_readOnly(!0),o.element.on("dialogopen",function(){})}),s.hasClass("employee-post")&&(0,me.confirm)("Do you want to view employee profile edit history?",()=>{var o=new Vt(u.Id);o.dialogOpen()}),s.hasClass("leave-application")&&(0,me.confirm)("Do you want to view leave details?",()=>{At.List({},o=>{var E=o.Entities.filter(b=>b.EmployeeRowId===u.Id);E.sort((b,l)=>{let P=new Date(b.NextEntitlementDate).getTime(),H=new Date(l.NextEntitlementDate).getTime();return P-H});var D=new Tt(u.Id);D.loadByIdAndOpenDialog(E[E.length-1].Id)})}),s.hasClass("shift-history")&&(0,me.confirm)("Do you want to view the shift history?",()=>{var o=new Nt(u.EmployeeID,u.Id);o.dialogOpen()})}}};I(De,"EmployeeProfileGrid"),De=Ye([ae.Decorators.filterable(),ae.Decorators.registerClass("HRMSoftware.EmployeeProfile.EmployeeProfileGrid")],De);var st=G(Xt(),1),jt=G(ei(),1);function K(ue,U){for(let t=0;t<ue.length;t++)if(ue[t].Id===U)return ue[t].Name;return null}I(K,"findRowById");function ti(){var ue;if(Te.List({},e=>{for(var a in e.Entities)if(e.Entities[a].IsActive==1){ue=e.Entities[a].BasedCountry;break}}),Re.Authorization.hasPermission(Be.HumanResources)){Te.List({},e=>{if(e.Entities.length==0){let a=document.createElement("main");a.id="main-content",a.className="main-container",a.innerHTML="<h1>This page is used to create Employee Profiles and new users</h1><p>Please initialise company settings to start using this feature.</p>",$("#GridDiv").append(a);return}else(0,Yt.initFullHeightGridPage)(new De($("#GridDiv")).element)});return}(0,jt.default)(st);var U,t=[],r=[],g=[],u=[],s=[],o=[],E=[],D=!1;for((0,Pe.serviceCall)({service:Ct.baseUrl+"/ListShift",method:"GET",data:{},async:!1,onSuccess:e=>{D=!0;let a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];for(var n in e.Entities){var c=[],d=[],m=[];for(var h in a)c.push(e.Entities[n][a[h]+"StartingFrom"]),d.push(e.Entities[n][a[h]+"EndingAt"]),m.push(e.Entities[n][a[h]+"WorkingTime"]);E.push({ShiftName:e.Entities[n].ShiftName,WorkingHourFromList:c,WorkingHourUntilList:d,WorkingTimeList:m,Color:e.Entities[n].ShiftColor,ShiftIdList:e.Entities[n].Id}),u.push(c),s.push(d),o.push(m),t.push(e.Entities[n].ShiftName),r.push(e.Entities[n].ShiftColor),g.push(e.Entities[n].Id)}},onError:e=>{console.log(e)}});D==!1;);var b=[],l=!1;for((0,Pe.serviceCall)({service:St.baseUrl+"/ListPublicHoliday",method:"GET",data:{},async:!1,onSuccess:e=>{l=!0;for(var a in e.Entities)b.push({PublicHolidayDate:e.Entities[a].Date,PublicHolidayName:e.Entities[a].Name,PublicHolidayId:e.Entities[a].Id})},onError:e=>{console.log(e)}});l==!1;);var P=[],H=!1;for((0,Pe.serviceCall)({service:Mt.baseUrl+"/ListGroup",method:"GET",data:{},async:!1,onSuccess:e=>{H=!0;for(var a in e.Entities)P.push({GroupName:e.Entities[a].Name,GroupColor:e.Entities[a].ShiftColor,GroupID:e.Entities[a].Id})},onError:e=>{console.log(e)}});H==!1;);var V=[],ce=!1;for((0,Pe.serviceCall)({service:Ut.baseUrl+"/ListTakenLeaveFromID",method:"GET",data:{EmployeeRowID:Re.Authorization.userDefinition.EmployeeRowID},async:!1,onSuccess:e=>{ce=!0;for(var a in e.Entities){var n=0;e.Entities[a].LeaveReasonId==4&&e.Entities[a].HalfDay==1&&(n=1),V.push({StartDate:e.Entities[a].StartDate.substring(0,10),EndDate:e.Entities[a].EndDate.substring(0,10),HalfDate:n,LeaveReason:e.Entities[a].LeaveReasonId,ID:e.Entities[a].Id})}},onError:e=>{console.log(e)}});ce==!1;);var T,J,f,Q=new Date,re=Q.getMonth()+1,pe=Q.getFullYear(),qe=`${Q.getFullYear()}-${(Q.getMonth()+1).toString().padStart(2,"0")}`;function lt(e,a,n){if(a>n){var c=n;n=a,a=c}return e>=a&&e<=n}I(lt,"isInRange");function Se(e){return e<10?"0"+e:e.toString()}I(Se,"addLeadingZero");function xe(e,a,n){var c=[],d=[],m=[];for(var h in e){var C=new Date(e[h].PublicHolidayDate.substring(0,10)),k=C.getFullYear(),w=C.getMonth()+1;k==a&&w==n&&(c.push(e[h].PublicHolidayName),d.push(e[h].PublicHolidayDate.substring(0,10)),m.push(e[h].PublicHolidayId))}return[c,d,m]}I(xe,"GetCurrentMonthHoliday");function i(e,a){let n=[],c=new Date(e,a-1,1);for(let d=6;d>0;d--){let m=new Date(c);m.setMonth(m.getMonth()-d),n.push(`${m.getFullYear()}-${(m.getMonth()+1).toString().padStart(2,"0")}`)}n.push(`${c.getFullYear()}-${(c.getMonth()+1).toString().padStart(2,"0")}`);for(let d=1;d<=6;d++){let m=new Date(c);m.setMonth(m.getMonth()+d),n.push(`${m.getFullYear()}-${(m.getMonth()+1).toString().padStart(2,"0")}`)}return n}I(i,"generateMonthRange");function p(e,a,n){var c=new Date(a,n,0).getDate();let d=[];for(let L=1;L<=c;L++){var m=`${a}-${Se(n)}-${Se(L)}`,h=null,C=new Date(m);for(var k in e){var w=new Date(e[k].ShiftStartDate),z=new Date(e[k].ShiftEndDate);if(C.setHours(0),C.setMinutes(0),C.setSeconds(0),C.setMilliseconds(0),typeof e[k].EmployeeGroupID!==void 0&&C>=w&&C<=z){h=e[k].EmployeeGroupID;break}}d.push({date:m,shift:null,GroupID:h})}return d}I(p,"generateListOfDate");function x(e,a){console.log(a);for(var n in a){let m=new Date(a[n].ShiftStartDate.substring(0,10)),h=new Date(a[n].ShiftEndDate.substring(0,10));for(var c of e){var d=new Date(c.date);d>=m&&d<=h&&c.GroupID==null&&(c.shift=a[n].ShiftId)}}return e}I(x,"appendShift");function A(e,a,n,c,d){console.log(e);let m=new Date(e[0].date).getDay(),h=e.length,C=m,k=[];for(let N=1;N<=h;N++){var w=new Date(e[N-1].date),z=`${w.getFullYear()}-${(w.getMonth()+1).toString().padStart(2,"0")}-${w.getDate().toString().padStart(2,"0")}`;let W=(C+N-1)%7,se=Math.floor((m+N-1)/7),le=N;var L=e[N-1].shift,ne=e[N-1].GroupID,Y=null,B=null,_=null;for(var R in c)if(c[R].PublicHolidayDate.substring(0,10)==z){B=_=c[R].PublicHolidayName,Y="#FF0000",L=null,ne=null;break}if(L!=null){var O;for(var R in n)if(n[R].ShiftIdList==L){O=R;break}Y=n[O].Color,B=n[O].ShiftName,n[O].WorkingHourUntilList[W]===void 0&&n[O].WorkingHourFromList[W]==null?(B="Rest Day",Y="#FFFFE0",_="Happy Holidays"):n[O].WorkingHourFromList[W]!=null&&n[O].WorkingHourUntilList[W]!=null&&(_=n[O].WorkingHourFromList[W]+"-"+n[O].WorkingHourUntilList[W])}else if(ne!=null){for(var R in a)if(a[R].GroupID==ne){B=_=a[R].GroupName,Y=a[R].GroupColor;break}}var q=(0,we.getLookup)("LeaveReason.LeaveReason");for(var R in d){var X=new Date(d[R].StartDate),oe=new Date(d[R].EndDate),ye=d[R].LeaveReason,F;for(var ee in q.items)if(q.items[ee].Id==ye){F=q.items[ee].LeaveReason.replace(/\s/g,"");break}w>=X&&w<=oe&&(B=_=F,Y="#00FF00",L=null)}k.push({x:W,y:5-se,color:Y,shiftstring:B,value:L,date:z,custom:{monthDay:le,details:_}})}return console.log(k),k}I(A,"generateChartData");function Z(e,a,n){return a===void 0||n===void 0?!1:e.getTime()>=a.getTime()&&e.getTime()<=n.getTime()}I(Z,"isDateBetween");function Ie(e,a){var c=st.chart("Employee-Timetable",{chart:{type:"heatmap"},title:{text:"",align:"left"},accessibility:{landmarkVerbosity:"one"},tooltip:{enabled:!0,outside:!0,zIndex:20,headerFormat:"",pointFormat:"{point.date:%A, %b %e, %Y} </br>{point.custom.details:%s }",nullFormat:"{point.date:%A, %b %e, %Y} </br>{point.custom.details:%s }"},xAxis:{categories:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],opposite:!0,lineWidth:26,offset:13,lineColor:"rgba(27, 26, 37, 0.2)",labels:{rotation:0,y:20,style:{textTransform:"uppercase",fontWeight:"bold"}},accessibility:{description:"weekdays",rangeDescription:"X Axis is showing all 7 days of the week, starting with Sunday."}},yAxis:{min:0,max:5,accessibility:{description:"weeks"},visible:!1},legend:{enable:!1,layout:"vertical",verticalAlign:"middle"},series:[{showInLegend:!1,keys:["x","y","value","date","color","id"],data:e,nullColor:"rgba(196, 196, 196, 0.2)",borderWidth:2,borderColor:"rgba(196, 196, 196, 0.2)",dataLabels:[{enabled:!0,format:"{#unless point.custom.empty}{point.shiftstring}{/unless}",style:{textOutline:"none",fontWeight:"normal",fontSize:"0.73rem"},y:4},{enabled:!0,align:"left",verticalAlign:"top",format:"{#unless point.custom.details}{point.custom.details}{/unless}",backgroundColor:"whitesmoke",padding:2,style:{textOutline:"none",color:"rgba(70, 70, 92, 1)",fontSize:"0.8rem",fontWeight:"bold",opacity:.5},x:1,y:1}]}],plotOptions:{series:{point:{events:{click:function(){var h=-1,C=0;for(var k in e)if(e[k].x==this.x&&e[k].y==this.y){var w=new Date(e[k].date),z=w.getDate(),L=w.getMonth()+1,ne=w.getFullYear(),B=!1;let te=`${ne}-${L.toString().padStart(2,"0")}-${z.toString().padStart(2,"0")}`;var Y=new Date(te),B=!1;for(var _ in V){var R=new Date(V[_].StartDate),O=new Date(V[_].EndDate);if(w>=R&&w<=O){var q=new Lt;q.loadByIdAndOpenDialog(V[_].ID),q.set_readOnly(!0),C=1;break}}if(C==1)break;var X=!1;for(var oe in a)if(a[oe].PublicHolidayDate==te){var ye=a[oe].Id;X=!0;break}if(X=!0)break;for(var F in U){var ee=new Date(U[F].ShiftStartDate),N=new Date(U[F].ShiftEndDate),W=U[F].ShiftEndDate;if(U[F].EmployeeGroupID!==void 0&&w>=ee&&w<=N){h=U[F].EmployeeGroupID,B=!0;break}if(Z(Y,ee,N)){h=U[F].Id;var se=new kt(Re.Authorization.userDefinition.EmployeeRowID,te,1,W);se.loadByIdAndOpenDialog(h),se.set_readOnly(!0)}}if(B){var le=new Gt;le.loadByIdAndOpenDialog(h),le.set_readOnly(!0)}if(X){var $e=new xt;$e.loadByIdAndOpenDialog(ye),$e.set_readOnly(!0)}break}}}}}}}),d=c.chartWidth,m=c.chartHeight;return[d,m]}if(I(Ie,"plot"),!Re.Authorization.hasPermission(Be.HumanResources)){var fe=document.createElement("style");fe.setAttribute("type","text/css"),fe.innerHTML=` body {margin-top:20px;}

            .card-style1 {
                box-shadow: 0px 0px 10px 0px rgb(89 75 128 / 9 %);
            }
            .border - 0 {
                border: 0!important;
            }
            .card {
                position: relative;
                display: flex;
                flex-direction: column;
                min-width: 0;
                word-wrap: break-word;
                background-color: #fff;
                background-clip: border-box;
                border: 1px solid rgba(0, 0, 0, .125);
                border-radius: 0.25rem;
            }
            section {
                padding: 120px 0;
                overflow: hidden;
                background: #fff;
            }
            .mb-2-3,.my-2-3 {
                margin-bottom: 2.3rem;
            }

            .section-title {
                font-weight: 600;
                letter-spacing: 2px;
                text-transform: uppercase;
                margin-bottom: 10px;
                position: relative;
                display: inline-block;
            }

            .text-primary {
                    color: #ceaa4d!important;
                }

            .text-secondary {
                    color: #15395A!important;
                }

            .font-weight-600 {
                    font-weight: 600;
                }

            .display-26 {
                    font-size: 1.3rem;
                }

        @media screen and(min-width: 992px) {
        .p-lg-7 {
                padding: 4rem;
            }
        }

        @media screen and(min-width: 768px) {
        .p-md-6 {
                padding: 3.5rem;
            }
        }

        @media screen and(min-width: 576px) {
        .p-sm-2-3 {
                padding: 2.3rem;
            }
        }

    .p-1-9 {
            padding: 1.9rem;
        }

    .bg-secondary {
            background: #15395A!important;
        }

        @media screen and(min - width: 576px) {
        .pe-sm-6,.px-sm-6{
                padding-right: 3.5rem;
            }
        }

        @media screen and(min-width: 576px) {
        .ps-sm-6,.px-sm-6 {
                padding-left: 3.5rem;
            }
        }

    .pe-1-9,.px-1-9{
            padding-right: 1.9rem;
        }

    .ps-1-9,.px-1-9 {
            padding-left: 1.9rem;
        }

    .pb-1-9,.py-1-9 {
            padding-bottom: 1.9rem;
        }

    .pt-1-9,.py-1-9{
            padding-top: 1.9rem;
        }
    .mb-1-9,.my-1-9 {
            margin-bottom: 1.9rem;
        }

        @media(min-width: 992px) {
        .d-lg-inline-block {
                display: inline - block!important;
            }
        }
    .rounded {
            border-radius: 0.25rem!important;
        }
        .tab {
          overflow: hidden;
          border: 1px solid #ccc;
          background-color: #f1f1f1;
        }

        .tab button {
          background-color: inherit;
          float: left;
          border: none;
          outline: none;
          cursor: pointer;
          padding: 14px 16px;
          transition: 0.3s;
        }

        .tab button:hover {
          background-color: #ddd;
        }

        .tab button.active {
          background-color: #ccc;
        }


        .tabcontent {
          display: none;
          padding: 6px 12px;
          border: 1px solid #ccc;
          border-top: none;
        animation: fadeEffect 1s; /* Fading effect takes 1 second */

        }

        @keyframes fadeEffect {
          from {opacity: 0;}
          to {opacity: 1;}
        }
        `;var j=document.createElement("div");j.setAttribute("class","row");var Ue=document.createElement("div");Ue.setAttribute("class","container");var Ke=document.createElement("section");Ke.setAttribute("class","bg-light");var Je=document.createElement("DIV");Je.setAttribute("class","col-lg-12 mb-4 mb-sm-5");var Qe=document.createElement("DIV");Qe.setAttribute("class","card card-style1 border-0");var Ze=document.createElement("DIV");Ze.setAttribute("class","card-body");var Ae=document.createElement("div");Ae.setAttribute("class","row align-items-center");var he=document.createElement("img");he.setAttribute("id","myImg"),he.width=63,he.height=112.5;var zt=document.createElement("DIV");zt.setAttribute("class","col-lg-12 mb-4 mb-sm-5");var Xe=document.createElement("DIV");Xe.classList.add("category-title"),Xe.setAttribute("id","Employee-Timetable");var We=!1,dt=(0,we.getLookup)("Department.Department"),mt=(0,we.getLookup)("Division.Division"),ut=(0,we.getLookup)("Section.Section"),ct=(0,we.getLookup)("JobGrade.JobGrade"),pt=(0,we.getLookup)("Occupation.Occupation"),ft=!1;for((0,Pe.serviceCall)({service:$t.baseUrl+"/RetriveShiftHistory",method:"GET",data:{EmployeeID:Re.Authorization.userDefinition.EmployeeRowID},async:!1,onSuccess:e=>{U=e.Entities,T=p(U,pe,re);for(var a in e.Entities)if(parseInt(e.Entities[a].Id)==0){We=!0;break}ft=!0},onError:e=>{console.log(e)}});ft==!1;);console.log(We),(0,Pe.serviceCall)({service:S.baseUrl+"/EmployeeProfileBasedOnID",data:{EmployeeID:Re.Authorization.userDefinition.EmployeeRowID},method:"GET",async:!1,onSuccess:e=>{e.Entities[0].EmployeeImg?he.src="/upload/"+e.Entities[0].EmployeeImg:e.Entities[0].Sex==1?he.src="https://i.stack.imgur.com/l60Hf.png":e.Entities[0].Sex==0&&(he.src="https://st.depositphotos.com/2218212/2938/i/950/depositphotos_29388097-stock-illustration-facebook-profile.jpg");var a=document.createElement("div");a.appendChild(he),a.setAttribute("class","col-lg-2 mb-4 mb-lg-0");var n=document.createElement("div");n.setAttribute("class","col-lg-5 px-xl-10");var c=document.createElement("div");c.setAttribute("class","col-lg-5 px-xl-10");var d=document.createElement("ul");d.setAttribute("class","list-unstyled ");var m=document.createElement("ul");m.setAttribute("class","list-unstyled ");var h=document.createElement("li"),C=document.createElement("span");C.setAttribute("class","text-secondary me-1 font-weight-600"),C.innerText="Name",h.appendChild(C),h.insertAdjacentText("beforeend",e.Entities[0].EmployeeName),d.appendChild(h);var k=document.createElement("li"),w=document.createElement("span");w.setAttribute("class","text-secondary me-1 font-weight-600"),w.innerText="Employee ID",k.appendChild(w),k.insertAdjacentText("beforeend",e.Entities[0].EmployeeID),d.appendChild(k),console.log(e.Entities[0]);var z=document.createElement("li"),L=document.createElement("span");L.setAttribute("class","text-secondary me-1 font-weight-600"),L.innerText="Age",z.appendChild(L),z.insertAdjacentText("beforeend",e.Entities[0].Age),d.appendChild(z);let ne=new Date(e.Entities[0].RecruitmentDate),Y=new Date,B=Y.getFullYear()-ne.getFullYear(),_=Y.getMonth()-ne.getMonth();var R=document.createElement("li"),O=document.createElement("span");O.setAttribute("class","text-secondary me-1 font-weight-600");var q;if(B==0?(O.innerText="Month of service",q=_.toString()):(O.innerText="Year of service",q=B.toString()),R.appendChild(O),R.insertAdjacentText("beforeend",q),d.appendChild(R),K(dt.items,e.Entities[0].DepartmentId)!=null){var X=document.createElement("li"),oe=document.createElement("span");oe.setAttribute("class","text-secondary me-1 font-weight-600"),oe.innerText="Department",X.appendChild(oe),X.insertAdjacentText("beforeend",K(dt.items,e.Entities[0].DepartmentId)),m.appendChild(X)}if(K(mt.items,e.Entities[0].DivisionId)!=null){var ye=document.createElement("li"),F=document.createElement("span");F.setAttribute("class","text-secondary me-1 font-weight-600"),F.innerText="Division",ye.appendChild(F),ye.insertAdjacentText("beforeend",K(mt.items,e.Entities[0].DivisionId)),m.appendChild(ye)}if(K(ut.items,e.Entities[0].SectionId)!=null){var ee=document.createElement("li"),N=document.createElement("span");N.setAttribute("class","text-secondary me-1 font-weight-600"),N.innerText="Section",ee.appendChild(N),ee.insertAdjacentText("beforeend",K(ut.items,e.Entities[0].SectionId)),m.appendChild(ee)}if(K(pt.items,e.Entities[0].OccupationId)!=null){var W=document.createElement("li"),se=document.createElement("span");se.setAttribute("class","text-secondary me-1 font-weight-600"),se.innerText="Occupation",W.appendChild(se),W.insertAdjacentText("beforeend",K(pt.items,e.Entities[0].OccupationId)),m.appendChild(W)}if(K(ct.items,e.Entities[0].JobGradeId)!=null){var le=document.createElement("li"),$e=document.createElement("span");$e.setAttribute("class"," text-secondary me-1 font-weight-600"),$e.innerText="JobGrade",le.appendChild($e),le.insertAdjacentText("beforeend",K(ct.items,e.Entities[0].JobGradeId)),m.appendChild(le)}n.appendChild(d),c.appendChild(m),Ae.appendChild(a),Ae.appendChild(n),Ae.appendChild(c),Ze.appendChild(Ae),Qe.appendChild(Ze),Je.appendChild(Qe),j.append(Je),Ue.append(j),Ke.append(Ue),$("#GridDiv").append(Ke),$("#GridDiv").append(fe);var te=document.createElement("DIV");te.setAttribute("id","time-box"),te.setAttribute("class","row"),te.setAttribute("align","right");var ht=document.createElement("DIV"),Me=document.createElement("INPUT");Me.setAttribute("id","Month"),Me.setAttribute("type","text"),Me.setAttribute("class","monthSelect"),ht.appendChild(Me),te.appendChild(ht);function yt(it,Le){var M,Ne,ve;for(Ne=document.getElementsByClassName("tabcontent"),M=0;M<Ne.length;M++)Ne[M].style.display="none";for(ve=document.getElementsByClassName("tablinks"),M=0;M<ve.length;M++)ve[M].className=ve[M].className.replace(" active","");document.getElementById(Le)!=null&&(document.getElementById(Le).style.display="block"),it.currentTarget.className+=" active"}I(yt,"open");var Ge=document.createElement("div");Ge.setAttribute("class","tab");var Ce=document.createElement("button");Ce.addEventListener("click",function(){yt(event,"shifttab")},!1),Ce.setAttribute("class","tablinks"),Ce.innerText="Shift",Ce.setAttribute("id","defaultOpen");var Ve=document.createElement("button");Ve.addEventListener("click",function(){yt(event,"tab2")},!1),Ve.setAttribute("class","tablinks"),Ve.innerText="tab2",Ge.appendChild(Ce),Ge.appendChild(Ve);var Oe=document.createElement("DIV");Oe.setAttribute("class","tabcontent"),Oe.setAttribute("id","shifttab"),Oe.appendChild(te),Oe.appendChild(Xe);var ie=document.createElement("DIV");ie.setAttribute("class","tabcontent"),ie.setAttribute("id","tab2");var vt=document.createElement("h3");vt.textContent="Tab 2";var gt=document.createElement("p");gt.textContent="This is the content of Tab 2",ie.appendChild(vt),ie.appendChild(gt),j.appendChild(Ge),j.appendChild(Oe),j.appendChild(ie);var _e=i(pe,re);let bt=new _t.Select2Editor($("#Month"));for(var ke=0;ke<_e.length;ke++)bt.addItem({id:ke.toString(),text:_e[ke].toString()}),_e[ke].toString()==qe&&bt.set_value(ke.toString());$("#Month").on("change",function(){return He(this,null,function*(){var it=$(this).val(),Le=_e[it];J=parseInt(Le.split("-")[0]),f=parseInt(Le.split("-")[1]),re=f,pe=J;var M=p(U,J,f);We==!1&&(M=x(M,U));var[Ne,ve,Qt]=xe(b,pe,re),at=[];for(var rt in ve)at.push({PublicHolidayDate:ve[rt],PublicHolidayId:Qt[rt],PublicHolidayName:Ne[rt]});var Zt=A(M,P,E,at,V),Pt,Rt;[Pt,Rt]=Ie(Zt,at),ie.style.width=String(Pt)+"px",ie.style.height=String(Rt)+"px"})}),We==!1&&(T=x(T,U));var[qt,Et,Kt]=xe(b,pe,re),et=[];for(var tt in Et)et.push({PublicHolidayDate:Et[tt],PublicHolidayId:Kt[tt],PublicHolidayName:qt[tt]});var Jt=A(T,P,E,et,V),Dt,wt;[Dt,wt]=Ie(Jt,et),ie.style.width=String(Dt)+"px",ie.style.height=String(wt)+"px",Ce.click()},onError:e=>{console.log(e.Error)}})}}I(ti,"pageInit");export{ti as default};
//# sourceMappingURL=EmployeeProfilePage.js.map
