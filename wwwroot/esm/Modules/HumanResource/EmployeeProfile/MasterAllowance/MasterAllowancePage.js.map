{
  "version": 3,
  "sources": ["../../../../../../Modules/HumanResource/EmployeeProfile/MasterAllowance/MasterAllowancePage.ts", "../../../../../../Modules/HumanResource/EmployeeProfile/MasterAllowance/MasterAllowanceGrid.ts", "../../../../../../Modules/HumanResource/EmployeeProfile/MasterAllowance/MasterAllowanceDialog.ts"],
  "sourcesContent": ["\uFEFFimport { initFullHeightGridPage } from '@serenity-is/corelib/q';\r\nimport { MasterAllowanceGrid } from './MasterAllowanceGrid';\r\n\r\nexport default function pageInit() {\n    initFullHeightGridPage(new MasterAllowanceGrid($('#GridDiv')).element);\n}", "import { Decorators, EntityGrid } from '@serenity-is/corelib';\r\nimport { MasterAllowanceColumns, MasterAllowanceRow, MasterAllowanceService } from '../../../ServerTypes/EmployeeProfile';\r\nimport { MasterAllowanceDialog } from './MasterAllowanceDialog';\r\n\r\n@Decorators.registerClass('HRMSoftware.EmployeeProfile.MasterAllowanceGrid')\nexport class MasterAllowanceGrid extends EntityGrid<MasterAllowanceRow, any> {\n    protected getColumnsKey() { return MasterAllowanceColumns.columnsKey; }\n    protected getDialogType() { return MasterAllowanceDialog; }\n    protected getRowDefinition() { return MasterAllowanceRow; }\n    protected getService() { return MasterAllowanceService.baseUrl; }\n\n    constructor(container: JQuery) {\n        super(container);\n    }\n}", "import {  Decorators, EntityDialog } from '@serenity-is/corelib';\r\nimport { EmployeeAllowanceRow, EmployeeAllowanceService, MasterAllowanceForm, MasterAllowanceRow, MasterAllowanceService } from '../../../ServerTypes/EmployeeProfile';\r\nimport {  EditorUtils } from '@serenity-is/corelib';\nimport { alertDialog, confirmDialog, getHighlightTarget, RetrieveResponse, serviceCall } from '@serenity-is/corelib/q';\n\r\n@Decorators.registerClass('HRMSoftware.EmployeeProfile.MasterAllowanceDialog')\nexport class MasterAllowanceDialog extends EntityDialog<MasterAllowanceRow, any> {\n    protected getFormKey() { return MasterAllowanceForm.formKey; }\n    protected getRowDefinition() { return MasterAllowanceRow; }\n    protected getService() { return MasterAllowanceService.baseUrl; }\n\n    protected form = new MasterAllowanceForm(this.idPrefix);\n\n\n    public onDialogOpen() {\n        super.onDialogOpen()\n        var self = this\n        this.applyChangesButton.hide()\n        $('.field.SubjectionEis label.caption, .field.SubjectionEpf label.caption, .field.SubjectionHrdf label.caption').removeClass('caption');\n        $('.field.SubjectionPcb label.caption, .field.SubjectionSocso label.caption, .field.SubjectionOt label.caption').removeClass('caption');\n        $('.field.SubjectionEis, .field.SubjectionEpf, .field.SubjectionHrdf, .field.SubjectionPcb, .field.SubjectionSocso,  .field.SubjectionOt').addClass('col-md-2');\r\n\n\n\n        var AllowanceSubjectionsElement = document.getElementById(this.idPrefix + 'AllowanceSubjections')\n        $(AllowanceSubjectionsElement).on('change', async function () {\n            if (self.form.AllowanceSubjections.value == true) {\n                $('.FullAttendance').show()\n                $('.NoLate').show()\n                $('.NoAbsence').show()\n                $('.NoEarlyLeaving').show()\n                if (self.form.FullAttendance.value == false)\n                    $('.ExemptUnpaidLeave').parent().hide()\n            }\n            else {\n                self.form.FullAttendance.value = self.form.NoLate.value = self.form.NoAbsence.value = false\n                $('.FullAttendance').hide()\n                $('.NoLate').hide()\n                $('.NoAbsence').hide()\n                $('.NoEarlyLeaving').hide()\n                $('.ExemptUnpaidLeave').parent().hide()\r\n            }\n        })\n        var FullAttendanceElement = document.getElementById(this.idPrefix + 'FullAttendance')\n        $(FullAttendanceElement).on('change', async function () {\n            self.form.ExemptUnpaidLeave.value = self.form.ExemptHospitalisationLeave.value = self.form.ExemptSickLeave.value =\n                self.form.ExemptAnnualLeave.value = self.form.ExemptMaternityLeave.value = self.form.ExemptPaternityLeave.value =\n                self.form.ExemptMarriageLeave.value = self.form.ExemptCompassionateLeave.value = self.form.ExemptEmergencyLeave.value =\n                self.form.ExemptGatepassLeave.value = false\n            if (self.form.FullAttendance.value == true)\n                $('.ExemptUnpaidLeave').parent().show()\n            else\n                $('.ExemptUnpaidLeave').parent().hide()\n        })\n\n        var RecurringElement = document.getElementById(this.idPrefix + 'Recurring')\n        $(RecurringElement).on('change', async function () {\n            $('.PaidOneTime').hide()\n\n            if (self.form.OneTime.value == true)\n                self.form.OneTime.value = false\n\n            if (self.form.Recurring.value == true) {\n                self.form.OneTime.value = false\n            }\n        })\n        var OneTimeElement = document.getElementById(this.idPrefix + 'OneTime')\n        $(OneTimeElement).on('change', async function () {\n            $('.PaidOneTime').hide()\n            if (self.form.Recurring.value == true)\n                self.form.Recurring.value = false\r\n            if (self.form.OneTime.value == true) {\n                $('.PaidOneTime').show()\n                self.form.Recurring.value = false\n            }\n\n        })\n        if (self.form.OneTime.value == true) {\n            $('.PaidOneTime').show()\n            self.form.Recurring.value = false\n        }\n        $(AllowanceSubjectionsElement).trigger('change')\n\n    }\n\n    protected save_submitHandler(response): void {\n        var res = response\n        var self = this\n        if (this.form.Recurring.value == false && this.form.OneTime.value == false) {\n            alertDialog('Please choose the frequency of this allowance')\n            return\n        }\n\n        if (this.form.AllowanceSubjections.value == true &&\n            (this.form.FullAttendance.value == false && this.form.NoAbsence.value == false && this.form.NoEarlyLeaving.value == false && this.form.NoLate.value == false)) {\n            alertDialog('Please choose subjection of this allowance')\n            return\n        }\n\n        if(!this.isNew())\n        {\n          \n            confirmDialog(\r\n                // here we demonstrate how you can detect which button user has clicked\r\n                // second parameter is Yes handler and it is called only when user clicks Yes.\r\n                // third parameter has some additional options, that you should only use when needed            \r\n                \"Do you want to update all employee with the Allowance?\",\r\n                () => {\n                    EmployeeAllowanceService.List({\n                        Criteria: [[EmployeeAllowanceRow.Fields.MasterAllowanceId], '=', self.entityId]\n                    }, response => {\n                        for (var index in response.Entities) {\n                            EmployeeAllowanceService.Update({\n                                EntityId: response.Entities[index].Id,\n                                Entity:\n                                {\n                                    \"AllowanceCode\": self.form.AllowanceCode.value,\n                                    \"AllowanceSubjections\": self.form.AllowanceSubjections.value,\n                                    \"Amount\": self.form.Amount.value,\n                                    \"Description\": self.form.Description.value,\n                                    \"ExemptAnnualLeave\": self.form.ExemptAnnualLeave.value,\n                                    \"ExemptCompassionateLeave\": self.form.ExemptCompassionateLeave.value,\n                                    \"ExemptEmergencyLeave\": self.form.ExemptEmergencyLeave.value,\n                                    \"ExemptGatepassLeave\": self.form.ExemptGatepassLeave.value,\n                                    \"ExemptHospitalisationLeave\": self.form.ExemptHospitalisationLeave.value,\n                                    \"ExemptMarriageLeave\": self.form.ExemptMarriageLeave.value,\n                                    \"ExemptMaternityLeave\": self.form.ExemptMaternityLeave.value,\n                                    \"ExemptPaternityLeave\": self.form.ExemptPaternityLeave.value,\n                                    \"ExemptSickLeave\": self.form.ExemptSickLeave.value,\n                                    \"ExemptUnpaidLeave\": self.form.ExemptUnpaidLeave.value,\n                                    \"FullAttendance\": self.form.FullAttendance.value,\n                                    \"NoAbsence\": self.form.NoAbsence.value,\n                                    \"NoEarlyLeaving\": self.form.NoEarlyLeaving.value,\n                                    \"NoLate\": self.form.NoLate.value,\n                                    \"OneTime\": self.form.OneTime.value,\n                                    \"Recurring\": self.form.Recurring.value,\n                                    \"SubjectionEis\": self.form.SubjectionEis.value,\n                                    \"SubjectionEpf\": self.form.SubjectionEpf.value,\n                                    \"SubjectionHrdf\": self.form.SubjectionHrdf.value,\n                                    \"SubjectionOt\": self.form.SubjectionOt.value,\n                                    \"SubjectionPcb\": self.form.SubjectionPcb.value,\n                                    \"SubjectionSocso\": self.form.SubjectionSocso.value\n\n                                }\n                            });\n                        }\n                        super.save_submitHandler(res);\n                    })\n                }, {\r\n                onNo: () => { super.save_submitHandler(res) }\n            });\n\n            \n            \n        }\n        else\n            super.save_submitHandler(response);\n\n    }\n\n\n\n\n}"],
  "mappings": "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",
  "names": ["import_q", "import_corelib", "import_corelib", "import_q", "MasterAllowanceDialog", "MasterAllowanceForm", "MasterAllowanceRow", "MasterAllowanceService", "self", "AllowanceSubjectionsElement", "__async", "FullAttendanceElement", "RecurringElement", "OneTimeElement", "response", "res", "EmployeeAllowanceService", "EmployeeAllowanceRow", "index", "__name", "__decorateClass", "MasterAllowanceGrid", "MasterAllowanceColumns", "MasterAllowanceDialog", "MasterAllowanceRow", "MasterAllowanceService", "container", "__name", "__decorateClass", "pageInit", "MasterAllowanceGrid", "__name"]
}
