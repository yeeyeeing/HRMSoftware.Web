import{a as B}from"../../../../_chunks/chunk-5O3QBP2P.js";import"../../../../_chunks/chunk-KEJQ7JSJ.js";import{d as L}from"../../../../_chunks/chunk-DC5JUE5I.js";import"../../../../_chunks/chunk-SPO25IZJ.js";import"../../../../_chunks/chunk-7WX7CVOG.js";import"../../../../_chunks/chunk-PPMBDC6H.js";import{a as I}from"../../../../_chunks/chunk-47F7KCJ6.js";import{a as E,c as k,d as p}from"../../../../_chunks/chunk-C45P7KJQ.js";import{d as S}from"../../../../_chunks/chunk-HDHDXEPW.js";import"../../../../_chunks/chunk-BVVXSYMS.js";import"../../../../_chunks/chunk-F3ZQHHES.js";import"../../../../_chunks/chunk-E5LOGLR4.js";import"../../../../_chunks/chunk-EM5O7OU6.js";import"../../../../_chunks/chunk-JXMDZA3A.js";import"../../../../_chunks/chunk-LLMDZJQJ.js";import{b as R}from"../../../../_chunks/chunk-J5PFZI4S.js";import"../../../../_chunks/chunk-K2UT2MVJ.js";import{a as j}from"../../../../_chunks/chunk-DNINIZJD.js";import{c as a,g as y,h as C,j as D,k as H}from"../../../../_chunks/chunk-L3ECGIWB.js";var x=y(H(),1);var c=y(j(),1);var l=y(H(),1);var i=class extends c.EntityGrid{getColumnsKey(){return E.columnsKey}getDialogType(){return I}getRowDefinition(){return k}getService(){return p.baseUrl}constructor(e){super(e)}getButtons(){var e=super.getButtons(),s=this;return e.push({title:"Renew Public Holiday",cssClass:"apply-changes-button",onClick:g=>{(0,l.confirm)("Do you sure you want to renew the public holiday",()=>D(this,null,function*(){try{let t,u=yield new Promise((r,n)=>{S.List({},o=>{r(o.Entities)},o=>n(o))});for(let r of u)if(r.IsActive===1){t=r.BasedCountry;break}if(!t)return;let d=yield new Promise((r,n)=>{L.List({},o=>{r(o.Entities)},o=>n(o))}),f=[];for(let r of d){let n=new B(t),o=r.Year,v=n.getHolidays(o);console.log(n),console.log(v);for(let b of v){let A=b.date.substring(0,10),m=new Date(A),P=`${m.getFullYear()}-${(m.getMonth()+1).toString().padStart(2,"0")}-${m.getDate().toString().padStart(2,"0")}`,h=b.name;console.log(h),console.log(P),console.log(t);let U=new Promise((Y,_)=>{(0,l.serviceCall)({service:R.baseUrl+"/CreatePublicHolidayRecord",data:{HolidayName:h,Date:P,CountryCode:t},method:"GET",async:!1,onSuccess:()=>Y(),onError:w=>{console.log(w.Error),_(w)}})});f.push(U)}}yield Promise.all(f),s.refresh()}catch(t){console.error("Error processing holidays:",t)}}))},separator:!0}),e}onViewProcessData(e){return e=super.onViewProcessData(e),this.toolbar.findButton("column-picker-button").toggle(!1),e}onClick(e,s,g){if(super.onClick(e,s,g),!e.isDefaultPrevented()){var t=this.itemAt(s),u=$(e.target),d=u[0].checked==!0?1:-1;p.Update({EntityId:t.Id,Entity:{IsActive:d}})}}};a(i,"PublicHolidayGrid"),i=C([c.Decorators.registerClass("HRMSoftware.PublicHoliday.PublicHolidayGrid")],i);function F(){(0,x.initFullHeightGridPage)(new i($("#GridDiv")).element)}a(F,"pageInit");export{F as default};
//# sourceMappingURL=PublicHolidayPage.js.map
