import{ka as J,oa as W,pa as B,qa as h,ra as L}from"../../../../_chunks/chunk-N2Z54I7F.js";import"../../../../_chunks/chunk-J5U3DV55.js";import"../../../../_chunks/chunk-GHIP3IPF.js";import"../../../../_chunks/chunk-2YJXBIYS.js";import"../../../../_chunks/chunk-GYFJ4L6D.js";import"../../../../_chunks/chunk-T7E74GLF.js";import"../../../../_chunks/chunk-3FMYFY2A.js";import"../../../../_chunks/chunk-OAOSE5IN.js";import"../../../../_chunks/chunk-F3ZQHHES.js";import"../../../../_chunks/chunk-E5LOGLR4.js";import"../../../../_chunks/chunk-EM5O7OU6.js";import"../../../../_chunks/chunk-JXMDZA3A.js";import"../../../../_chunks/chunk-LLMDZJQJ.js";import{a as g,b as F}from"../../../../_chunks/chunk-J5PFZI4S.js";import"../../../../_chunks/chunk-K2UT2MVJ.js";import{a as O}from"../../../../_chunks/chunk-DNINIZJD.js";import{c as l,g as E,h as v,j as n,k as G}from"../../../../_chunks/chunk-L3ECGIWB.js";var K=E(G(),1);var w=E(O(),1);var p=E(O(),1);var S=E(G(),1);var c=class extends p.EntityDialog{constructor(){super();this.form=new B(this.idPrefix);var e;F.List({Criteria:p.Criteria.and(e,[[g.Fields.Retired],"=","0"],[[g.Fields.Terminated],"=","0"],[[g.Fields.Resigned],"=","0"])},a=>{this.EmployeeData=a.Entities})}getFormKey(){return B.formKey}getRowDefinition(){return h}getService(){return L.baseUrl}dialogOpen(){super.dialogOpen();var e=this;$(document).ready(function(){$("<button>Add Employee into Group</button>").insertAfter(`#${e.idPrefix}NewAddedEmployee`).on("click",function(){(0,S.isEmptyOrNull)(e.form.NewAddedEmployee.value)||(0,S.confirmDialog)("Do you want to add these employees?",()=>{e.form.EmployeeList.value=`${e.form.EmployeeList.value},${e.form.NewAddedEmployee.value}`,e.form.NewAddedEmployee.value="";var a=e.form.EmployeeList.values;e.form.NewAddedEmployee.items=e.form.NewAddedEmployee.items.filter(f=>!a.includes(f.id))},{onNo:()=>{console.log("User canceled")}})})})}SearchCallback(){var e=this,a=document.getElementById(this.idPrefix+"OccupationList"),f=document.getElementById(this.idPrefix+"DepartmentList"),D=document.getElementById(this.idPrefix+"DivisionList"),I=document.getElementById(this.idPrefix+"JobGradeList"),P=document.getElementById(this.idPrefix+"SectionList"),b=document.getElementById(this.idPrefix+"CostCentreList");function r(m){let y=$(m).val();return y.length?y.split(",").map(k=>parseInt(k,10)):[]}l(r,"parseListFromElement");let C=r(I),x=r(D),t=r(f),i=r(a),o=r(P),u=r(b),j=new Set(C),H=new Set(x),U=new Set(t),M=new Set(i),Q=new Set(o),V=new Set(u);var s;e.isNew()==!0?s=e.form.EmployeeList.value?e.form.EmployeeList.value.split(",").map(Number):[]:e.isNew()==!1&&(s=e.form.NewAddedEmployee.value?e.form.NewAddedEmployee.value.split(",").map(Number):[]);for(let m of e.EmployeeData){let{JobGradeID:y,DivisionID:k,DepartmentID:_,OccupationID:q,SectionID:z,Id:A,CostCentreID:X}=m;j.has(y)||H.has(k)||U.has(_)||M.has(q)||Q.has(z)||V.has(X)?s.includes(A)||s.push(A):s=s.filter(Y=>Y!==A)}let N=[];for(let m=0;m<s.length;m++)N.push(s[m]);e.isNew()==!0?e.form.EmployeeList.value=N.join(","):e.isNew()==!1&&(e.form.NewAddedEmployee.value=N.join(","))}onDialogOpen(){super.onDialogOpen();var e=this,a=document.getElementById(this.idPrefix+"SectionList"),f=document.getElementById(this.idPrefix+"OccupationList"),D=document.getElementById(this.idPrefix+"DepartmentList"),I=document.getElementById(this.idPrefix+"DivisionList"),P=document.getElementById(this.idPrefix+"JobGradeList"),b=document.getElementById(this.idPrefix+"CostCentreList"),r=document.getElementById(this.idPrefix+"EmployeeList"),C=this.form.EmployeeList.values;function x(t,i){return t.filter(o=>!i.includes(o))}l(x,"getDifference"),$(r).on("change",function(){return n(this,null,function*(){var t=x(C,e.form.EmployeeList.values);for(let o=0;o<t.length;o++){var i=e.EmployeeData.filter(u=>u.Id==parseInt(t[o]));e.form.NewAddedEmployee.addOption(i[0].Id.toString(),i[0].EmployeeID)}})}),$(`#s2id_${this.idPrefix}EmployeeList`).on("click",function(t){return n(this,null,function*(){$(".select2-drop").hide()})}),J.List({},t=>{let i=this.form.NewAddedEmployee.items;for(var o in t.Entities)i=i.filter(u=>parseInt(u.id)!==t.Entities[o].EmployeeRowId);this.form.NewAddedEmployee.items=i}),$(b).on("change",function(){return n(this,null,function*(){e.SearchCallback()})}),$(f).on("change",function(){return n(this,null,function*(){e.SearchCallback()})}),$(I).on("change",function(){return n(this,null,function*(){e.SearchCallback()})}),$(P).on("change",function(){return n(this,null,function*(){e.SearchCallback()})}),$(D).on("change",function(){return n(this,null,function*(){e.SearchCallback()})}),$(a).on("change",function(){return n(this,null,function*(){e.SearchCallback()})})}};l(c,"WeeklyPayrollSettingsDialog"),c=v([p.Decorators.registerClass("HRMSoftware.PayrollSettings.WeeklyPayrollSettingsDialog")],c);var d=class extends w.EntityGrid{getColumnsKey(){return W.columnsKey}getDialogType(){return c}getRowDefinition(){return h}getService(){return L.baseUrl}constructor(R){super(R)}};l(d,"WeeklyPayrollSettingsGrid"),d=v([w.Decorators.registerClass("HRMSoftware.PayrollSettings.WeeklyPayrollSettingsGrid")],d);function Z(){(0,K.initFullHeightGridPage)(new d($("#GridDiv")).element)}l(Z,"pageInit");export{Z as default};
//# sourceMappingURL=WeeklyPayrollSettingsPage.js.map
