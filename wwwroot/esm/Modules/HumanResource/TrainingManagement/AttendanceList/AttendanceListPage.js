import{a as E}from"../../../../_chunks/chunk-INC2AK5C.js";import{a as P,b as A,c as I,i as h,m as v,n as x,o as C}from"../../../../_chunks/chunk-4NBL3D7H.js";import"../../../../_chunks/chunk-DMDSRNFC.js";import"../../../../_chunks/chunk-YDNSOE4Z.js";import"../../../../_chunks/chunk-27W64ILM.js";import"../../../../_chunks/chunk-2C2HJ25O.js";import"../../../../_chunks/chunk-XGDIBSP2.js";import{a as D}from"../../../../_chunks/chunk-K2UT2MVJ.js";import{a as b}from"../../../../_chunks/chunk-DNINIZJD.js";import{c,g as u,h as f,k as y}from"../../../../_chunks/chunk-L3ECGIWB.js";var F=u(y(),1);var l=u(b(),1);var p=u(b(),1),R=u(D(),1),T=u(y(),1);var s=class extends R.GridEditorDialog{constructor(){super();this.form=new h(this.idPrefix)}getFormKey(){return h.formKey}getLocalTextPrefix(){return x.localTextPrefix}getService(){return C.baseUrl}dialogOpen(a){super.dialogOpen(a),p.EditorUtils.setReadonly(this.form.FlowType.element,!0),p.EditorUtils.setReadonly(this.form.Date.element,!0),p.EditorUtils.setReadonly(this.form.Remark.element,!0),$("#"+this.idPrefix+"GradeType").parent().hide(),this.saveAndCloseButton.hide();let i={};v.List({Criteria:[["FlowId"],"=",this.entity.Id]},o=>{for(var t in o.Entities){let r=o.Entities[t].EmployeeId.toString();i[r]=[o.Entities[t].Id,o.Entities[t].Attendance]}var n=$('div.field.ParticipantList.AttendanceTable > label[title="Participant List"] + div.editor.s-ProgramAttendanceResponseEditor.s-DataGrid > div.grid-container.slick-container > div.slick-viewport > div.grid-canvas > div.ui-widget-content.slick-row > div.ProgramAttendanceResponseColumnPlaceHolder > div > form');n.each((r,m)=>{console.log(m);let g=m.getAttribute("participantId"),k=i[g]?i[g][0]:null,w=i[g]?i[g][1]:null;m.setAttribute("EntityId",k),m.setAttribute("OldValue",w),m.children[0].checked=w})})}getToolbarButtons(){var a=super.getToolbarButtons();return a.push({title:"Save",cssClass:"stampe",icon:"fa-check-circle text-purple",onClick:()=>{var i=$('div.field.ParticipantList.AttendanceTable > label[title="Participant List"] + div.editor.s-ProgramAttendanceResponseEditor.s-DataGrid > div.grid-container.slick-container > div.slick-viewport > div.grid-canvas > div.ui-widget-content.slick-row > div.ProgramAttendanceResponseColumnPlaceHolder > div > form');i.each((o,t)=>{var n=t.getAttribute("participantId"),r=t.children[0].checked;t.getAttribute("entityId")=="null"?r&&v.Create({Entity:{FlowId:this.entity.Id,EmployeeId:parseInt(n),Attendance:r}}):t.getAttribute("OldValue")==="true"!=r&&v.Update({EntityId:t.getAttribute("EntityId"),Entity:{Attendance:r}})}),(0,T.alertDialog)("Attendance Save Success !"),this.dialogClose()}}),a}};c(s,"ProgramFlowAttendanceEditDialog"),s=f([p.Decorators.registerClass("RMSoftware.TrainingManagement.ProgramFlowAttendanceEditDialog")],s);var d=class extends l.EntityGrid{getColumnsKey(){return P.columnsKey}getDialogType(){return s}getRowDefinition(){return A}getService(){return I.baseUrl}constructor(e){super(e)}onClick(e,a,i){if(!e.isDefaultPrevented()){var o=this.itemAt(a),t=$(e.target);if(t.parent().hasClass("inline-action")&&(t=t.parent()),t.hasClass("view-program")){var n=new E(!1);let r=n.element.find("#"+n.idPrefix+"FlowList");n.selectEditorTab(r),n.loadByIdAndOpenDialog(o.ProgramId,!1)}else super.onClick(e,a,i)}}getColumns(){l.DataGrid.defaultRowHeight=60;let e=super.getColumns();return e.splice(0,0,{field:"Action",name:"Action",format:a=>'<a class="inline-action view-program" title="View Program Session"><i class="fa fa-chalkboard-teacher"></i></a>',width:60,minWidth:60,maxWidth:60}),e}};c(d,"AttendanceListGrid"),d=f([l.Decorators.registerClass("HRMSoftware.TrainingManagement.AttendanceListGrid")],d);function L(){(0,F.initFullHeightGridPage)(new d($("#GridDiv")).element)}c(L,"pageInit");export{L as default};
//# sourceMappingURL=AttendanceListPage.js.map
