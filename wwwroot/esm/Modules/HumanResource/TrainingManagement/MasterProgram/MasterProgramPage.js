import{a as b}from"../../../../_chunks/chunk-GWG4SHID.js";import{a as R}from"../../../../_chunks/chunk-TIB4BNCY.js";import{a as S}from"../../../../_chunks/chunk-INC2AK5C.js";import{e as P,f as y,g as D,h as f}from"../../../../_chunks/chunk-4NBL3D7H.js";import"../../../../_chunks/chunk-DMDSRNFC.js";import"../../../../_chunks/chunk-YDNSOE4Z.js";import"../../../../_chunks/chunk-27W64ILM.js";import"../../../../_chunks/chunk-2C2HJ25O.js";import"../../../../_chunks/chunk-XGDIBSP2.js";import"../../../../_chunks/chunk-K2UT2MVJ.js";import{a as v}from"../../../../_chunks/chunk-DNINIZJD.js";import{c as d,g as w,h,k as A}from"../../../../_chunks/chunk-L3ECGIWB.js";var E=w(A(),1);var a=w(v(),1);var m=w(v(),1);var l=class extends m.EntityDialog{constructor(){super(...arguments);this.form=new y(this.idPrefix);this.departmentList=[]}getFormKey(){return y.formKey}getRowDefinition(){return D}getService(){return f.baseUrl}dialogOpen(n){super.dialogOpen(n),this.isNew()&&(this.form.FlowList.value=[{FlowType:1,GradeType:0}]),$("div.field.FlowList > div > div.grid-container.slick-container.ltr.ui-widget.sleek-vars > div.slick-viewport").css({height:"auto","min-height":"200px"});let s=$('div.field.AllDepartment > label[title="All Department"] + input.editor.s-BooleanEditor[type="checkbox"]');s.css({flex:"0 0 auto"}),m.EditorUtils.setReadonly(this.form.DepartmentList.element,this.form.AllDepartment.value==!0),s.on("change",c=>{m.EditorUtils.setReadonly(this.form.DepartmentList.element,this.form.AllDepartment.value==!0),this.form.AllDepartment.value==!0?(this.departmentList=this.form.DepartmentList.values,this.form.DepartmentList.values=[]):this.form.DepartmentList.values=this.departmentList});let e=$("#"+this.idPrefix+"Routine"),i=$("#"+this.idPrefix+"RoutineInterval").parent(),o=$("#"+this.idPrefix+"RoutineStartDate").parent(),u=$("#"+this.idPrefix+"RoutineEndDate").parent();this.form.Routine.get_value()==0&&(i.hide(),o.hide(),u.hide()),e.on("change",c=>{this.form.Routine.get_value()==0?(i.hide(),o.hide(),u.hide()):(i.show(),o.show(),u.show())});let g=$("#"+this.idPrefix+"Status"),r=$("#"+this.idPrefix+"Comment").parent();this.form.Status.get_value()!=2&&r.hide(),g.on("change",c=>{this.form.Status.get_value()!=2?r.hide():r.show()})}};d(l,"MasterProgramDialog"),l=h([m.Decorators.registerClass("HRMSoftware.TrainingManagement.MasterProgramDialog")],l);var C=a.SubDialogHelper.bindToDataChange,p=class extends a.EntityGrid{getColumnsKey(){return P.columnsKey}getDialogType(){return l}getRowDefinition(){return D}getService(){return f.baseUrl}constructor(t){super(t),this.openDialogsAsPanel=!0}getColumns(){a.DataGrid.defaultRowHeight=60;let t=super.getColumns();return t.splice(0,0,{field:"Action",name:"Action",format:n=>{if(n.item.Status==1)return'<a class="inline-action New-Session button" title="New Session"><button type="button" class="btn btn-labeled btn-warning" style="padding: 0 1px;"><span class="btn-label"><i class="fa fa-plus-circle"></i></span>New Session</button></a>'},width:100,minWidth:30,maxWidth:120}),t}onClick(t,n,s){if(super.onClick(t,n,s),t.isDefaultPrevented())return;let e=this.itemAt(n),i=$(t.target);i.parent().hasClass("inline-action")&&(i=i.parent()),i.hasClass("New-Session")&&f.Retrieve({EntityId:e.Id},o=>{let u=new S(!1),g=[];for(let r in o.Entity.FlowList)g.push({FlowType:o.Entity.FlowList[r].FlowType,GradeType:o.Entity.FlowList[r].GradeType,Remark:o.Entity.FlowList[r].Remark});e.AllDepartment?R.List({},r=>{let c=[];for(let x in r.Entities)c.push(r.Entities[x].Id);u.loadEntityAndOpenDialog({ProgramName:e.ProgramName,DepartmentList:c,Detail:e.Detail,ExtraDocument:e.ExtraDocument,FlowList:g},!0)}):u.loadEntityAndOpenDialog({ProgramName:e.ProgramName,DepartmentList:e.DepartmentList,Detail:e.Detail,ExtraDocument:e.ExtraDocument,FlowList:g},!0)})}getButtons(){let t=super.getButtons();return t.push({title:"Apply New Program",cssClass:"apply-changes-button",onClick:n=>{let s=new b;C(s,this,(e,i)=>{this.refresh()},!0),s.loadEntityAndOpenDialog({DepartmentList:[2],Status:0},!0)},separator:!0}),t}};d(p,"MasterProgramGrid"),p=h([a.Decorators.registerClass("HRMSoftware.TrainingManagement.MasterProgramGrid")],p);function F(){(0,E.initFullHeightGridPage)(new p($("#GridDiv")).element)}d(F,"pageInit");export{F as default};
//# sourceMappingURL=MasterProgramPage.js.map
