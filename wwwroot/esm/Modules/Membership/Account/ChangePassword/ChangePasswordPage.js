import{a as m,g as e}from"../../../../_chunks/chunk-EUGFEW3M.js";import{a as o}from"../../../../_chunks/chunk-6SXP7JNB.js";import"../../../../_chunks/chunk-7GGACY5T.js";import"../../../../_chunks/chunk-HERT6KZV.js";import"../../../../_chunks/chunk-DMDSRNFC.js";import"../../../../_chunks/chunk-TIB4BNCY.js";import{b as d}from"../../../../_chunks/chunk-TYRFK7TU.js";import"../../../../_chunks/chunk-K2UT2MVJ.js";import{a as p}from"../../../../_chunks/chunk-DNINIZJD.js";import{c as a,g as n,k as f}from"../../../../_chunks/chunk-L3ECGIWB.js";var c=n(p(),1),t=n(f(),1);var h=n(f(),1);function w(){$(function(){new s($("#PanelDiv").addClass("s-container-tight mt-5"))})}a(w,"pageInit");var u=o.Forms.Membership.ChangePassword,s=class extends c.PropertyPanel{constructor(i){super(i);this.form=new m(this.idPrefix);this.form.NewPassword.addValidationRule(this.uniqueName,()=>{if(this.form.NewPassword.value.length<7)return(0,t.format)(o.Validation.MinRequiredPasswordLength,7)}),this.form.ConfirmPassword.addValidationRule(this.uniqueName,()=>{if(this.form.ConfirmPassword.value!==this.form.NewPassword.value)return o.Validation.PasswordConfirmMismatch})}getFormKey(){return m.formKey}submitClick(){if(this.validateForm()){var i=this.getSaveEntity();(0,t.serviceCall)({url:(0,t.resolveUrl)("~/Account/ChangePassword"),request:i,onSuccess:()=>{d.List({},r=>{for(var l in r.Entities)r.Entities[l].Id==h.Authorization.userDefinition.EmployeeRowID&&d.Update({EntityId:r.Entities[l].Id,Entity:{UserPassword:this.form.NewPassword.value}})}),(0,t.informationDialog)(u.Success,()=>{window.location.href=(0,t.resolveUrl)("~/")})}})}}renderContents(){let i=this.useIdPrefix();this.element.empty().append(e("div",{class:"s-Panel",children:[e("h3",{class:"page-title mb-4 text-center",children:u.FormTitle}),e("form",{id:i.Form,action:"",children:[e("div",{id:i.PropertyGrid}),e("div",{class:"px-field mt-4",children:e("button",{id:i.SubmitButton,type:"submit",class:"btn btn-primary w-100",onClick:r=>{r.preventDefault(),this.submitClick()},children:u.SubmitButton})})]})]}))}};a(s,"ChangePasswordPanel");export{w as default};
//# sourceMappingURL=ChangePasswordPage.js.map
